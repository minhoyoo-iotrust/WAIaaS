# 설계 부채 추적

## 목적

구현 중 발견되지만 즉시 처리하지 않는 설계 미비점을 추적한다. 이 파일은 설계 부채의 **운영 SSoT**(Single Source of Truth)이며, `objectives/v1.0-implementation-planning.md`의 "설계 부채 관리" 섹션에 정의된 규칙을 기반으로 실제 운영에 필요한 절차를 포함한다.

---

## 추적 테이블

| ID | 발견 시점 | 내용 | 영향 문서 | Tier | 처리 예정 |
|----|----------|------|----------|------|----------|
| DD-01 | v1.1 사전 점검 | `POST /v1/agents` (에이전트 생성) 정식 스펙이 doc 37에 없음. doc 54 §3에서 CLI `agent create`가 호출하는 엔드포인트로 설계되어 있으나, doc 37에는 "미래 확장" 테이블에만 언급. 요청/응답 스키마, 에러 코드, 인증 방식 정식 정의 필요. | 37-rest-api-complete-spec.md | Tier 1 | v1.1 구현 시 인라인 추가 |
| DD-02 | v1.1 사전 점검 | `GET /v1/transactions/:id` (트랜잭션 단건 조회) 정식 스펙이 doc 37에 없음. doc 37:860, doc 32:576에서 폴링 엔드포인트로 참조되나 38개 엔드포인트 목록에 미포함. v1.1 E-09 시나리오가 의존. | 37-rest-api-complete-spec.md | Tier 1 | v1.1 구현 시 인라인 추가 |
| DD-03 | v1.1 사전 점검 | doc 37 내 health 엔드포인트 경로 불일치. 정식 정의(§5.1, 테이블 #1)는 `GET /health`이나, doc 37 내부 다른 위치(line 315, 2986)에서 `GET /v1/health`로 참조. v1.1에서 `GET /health`로 확정. | 37-rest-api-complete-spec.md | Tier 1 | v1.1 구현 시 인라인 정리 |

---

## Tier 정의 및 허용 기준

### Tier 1: 인라인 수정

- **범위:** 영향 문서 1개, 30분 이내
- **대응:** 설계 문서를 직접 수정하고 구현을 계속한다
- **표기:** 설계 문서에 `> [vX.Y 구현 중 변경]` 주석 추가
- **커밋:** 구현 커밋에 설계 문서 수정 포함
- **예시:** 메서드 시그니처 미세 조정, 에러 코드 추가, config 키 변경

### Tier 2: 소수 페이즈 삽입

- **범위:** 영향 문서 2~5개, 1~3일
- **대응:** 현재 마일스톤 내부에 Phase X.1 형태로 소수 페이즈를 삽입하여 설계를 보완한 후 구현을 재개한다
- **기록:** ROADMAP 변경 이력에 삽입 사유 기록
- **예시:** API 엔드포인트 그룹 재설계, 테이블 구조 변경, 정책 규칙 추가

### Tier 3: 설계 마일스톤 삽입

- **범위:** 영향 문서 5개 이상, 3일 이상
- **대응:** 구현을 중단하고 `vX.Yd` (design) 형태의 독립 설계 마일스톤을 삽입한다
- **기록:** objective 문서 생성, 완료 후 구현 재개 또는 재계획
- **예시:** 아키텍처 수준 변경, 보안 모델 전환, 외부 API 단종 대응

---

## 누적 허용 규칙

1. **Tier 1~2:** 다음 마일스톤 시작 전까지 누적 허용
2. **Tier 3:** 즉시 처리 (구현 중단)
3. **매 마일스톤 시작 시 설계 부채 리뷰 필수** -- 미처리 항목에 대해 처리 또는 이연 결정
4. **v2.0 릴리스 전 부채 0건 달성 목표** (불가피한 경우 v2.1 이연을 명시적으로 기록)

---

## 운영 절차

### 발견 시

1. 이 테이블에 새 행을 추가한다
2. ID는 `DD-{순번}` 형식 (예: DD-01, DD-02, ...)
3. 발견 시점에 해당 마일스톤 버전을 기록한다 (예: v1.1, v1.2)
4. Tier를 판정하여 기록한다
5. 처리 예정 마일스톤 또는 시점을 기록한다

### 처리 시

1. 처리 완료 마일스톤을 `처리 예정` 컬럼에 업데이트한다 (예: "v1.3에서 처리 완료")
2. **행을 삭제하지 않는다** -- 처리 완료 표시로 이력을 유지한다
3. 관련 설계 문서 수정 사항이 있으면 함께 커밋한다

### 마일스톤 시작 시 리뷰

1. 미처리 항목 전수 확인
2. Tier 재평가 -- 구현 진행에 따라 Tier가 변경될 수 있음
3. 각 항목에 대해 **처리**(현재 마일스톤) 또는 **이연**(후속 마일스톤) 결정
4. Tier 3 항목이 존재하면 구현을 중단하고 설계 마일스톤을 삽입한다

---

## 참조

- `objectives/v1.0-implementation-planning.md` 섹션 4 "설계 부채 관리" -- Tier 구조 및 규칙 정의 원본
- 이 파일이 운영 SSoT이며, 실제 부채 항목의 추적/처리/리뷰는 이 파일에서 관리한다
