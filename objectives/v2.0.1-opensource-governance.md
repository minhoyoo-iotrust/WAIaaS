# 마일스톤 v2.0.1: 오픈소스 거버넌스 + 신뢰 강화

## 목표

v2.0 공개 릴리스 직후, 오픈소스 프로젝트로서의 거버넌스·보안·커뮤니티 신뢰 체계를 강화하는 상태. Signed Releases, DCO 강제, OpenSSF Badge, GitHub Discussions, Public Roadmap이 갖춰져 외부 기여자와 기업 사용자가 프로젝트를 신뢰하고 참여할 수 있다.

> **v2.0 = 공개 릴리스 + 필수(Critical) 항목, v2.0.1 = 신뢰 강화(High) 항목**

---

## 산출물

### 1. 공급망 보안 강화

| 항목 | 내용 | 위치 |
|------|------|------|
| **Signed Releases (cosign/sigstore)** | GitHub Release 아티팩트에 cosign 키리스 서명. Sigstore 투명성 로그(Rekor)에 자동 기록 | `release.yml` sign step |
| **OpenSSF Scorecard** | GitHub Actions에 scorecard.yml 추가. 점수 공개 + README 배지 | `.github/workflows/scorecard.yml` |
| **OpenSSF Best Practices Badge** | bestpractices.coreinfrastructure.org 등록. 자가 평가 완료 | README 배지 |

### 2. 법률 + 기여 프로세스

| 항목 | 내용 | 위치 |
|------|------|------|
| **DCO (Developer Certificate of Origin)** | `Signed-off-by` 트레일러 필수. GitHub App 또는 CI check로 강제 | `.github/workflows/dco.yml` 또는 GitHub App |
| **PR Template** | 체크리스트 포함: 변경 요약, 테스트 방법, 관련 이슈, DCO 서명 확인 | `.github/PULL_REQUEST_TEMPLATE.md` |

### 3. 문서 + 투명성

| 항목 | 내용 | 위치 |
|------|------|------|
| **API Versioning Policy** | `/v1` 경로 사용 중이므로 breaking change 정책, 폐기(deprecation) 절차, 지원 기간 명시 | `docs/api-versioning.md` + README 링크 |
| **Migration Guide 템플릿** | 버전 간 업그레이드 가이드 작성 프레임워크. v1.8/v1.9 업그레이드 인프라와 연동 | `docs/migration/` 디렉토리 |
| **Public Roadmap** | GitHub Projects 보드 또는 `ROADMAP.md`로 향후 개발 방향 공개 | GitHub Projects 또는 `ROADMAP.md` |

### 4. 커뮤니티

| 항목 | 내용 | 위치 |
|------|------|------|
| **GitHub Discussions** | Q&A, Ideas, Show and Tell 카테고리 활성화 | GitHub 리포지토리 Settings > Features |

---

## 기술 결정 사항

| # | 결정 항목 | 선택지 | 결정 근거 |
|---|----------|--------|----------|
| 1 | Release 서명 도구 | cosign (Sigstore) | 키리스 서명 — CI에 별도 키 관리 불필요. Rekor 투명성 로그로 서명 검증 가능. CNCF 표준 |
| 2 | DCO 강제 방식 | GitHub App (DCO bot) | CI workflow 대비 설정 간단. PR 단위 자동 체크. `--signoff` 누락 시 자동 안내 |
| 3 | OpenSSF Scorecard 실행 주기 | 주 1회 (cron) | 매 push 시 실행은 과도. 주간 트렌드 추적으로 충분 |
| 4 | Public Roadmap 도구 | GitHub Projects | 별도 도구 없이 GitHub 내 관리. 이슈 연동 자동화 |
| 5 | API Versioning 전략 | URL prefix (`/v1`, `/v2`) + 1년 deprecation 기간 | 헤더 기반 버전은 디버깅 어려움. URL prefix가 명시적이고 캐시 친화적 |

---

## E2E 검증 시나리오

**자동화 비율: 90% -- `[HUMAN]` 1건**

### 자동 검증 (10건)

| # | 시나리오 | 검증 방법 | 태그 |
|---|---------|----------|------|
| 1 | cosign 서명 생성 + 검증 | release.yml sign step → `cosign verify-blob` 성공 assert | [L1] |
| 2 | Rekor 투명성 로그 기록 | cosign sign 후 `rekor-cli search --artifact` → 엔트리 존재 assert | [L1] |
| 3 | OpenSSF Scorecard 실행 성공 | scorecard.yml → results.sarif 생성 + 점수 > 0 assert | [L0] |
| 4 | DCO check 동작 — 누락 시 실패 | `Signed-off-by` 없는 PR → check fail assert | [L0] |
| 5 | DCO check 동작 — 포함 시 통과 | `Signed-off-by` 있는 PR → check pass assert | [L0] |
| 6 | PR Template 존재 + 필수 섹션 포함 | `.github/PULL_REQUEST_TEMPLATE.md` 존재 + "Checklist" 섹션 포함 assert | [L0] |
| 7 | API Versioning 문서 존재 | `docs/api-versioning.md` 파일 존재 + "Deprecation" 섹션 포함 assert | [L0] |
| 8 | Migration Guide 디렉토리 존재 | `docs/migration/` 디렉토리 존재 + 최소 1개 가이드 파일 assert | [L0] |
| 9 | GitHub Discussions 활성화 | `gh api repos/{owner}/{repo}` → `has_discussions == true` assert | [L0] |
| 10 | OpenSSF Best Practices 배지 URL 유효 | README.md 내 bestpractices.coreinfrastructure.org 배지 URL → HTTP 200 assert | [L0] |

### 수동 검증 [HUMAN]

| # | 시나리오 | 검증 방법 | 태그 |
|---|---------|----------|------|
| 11 | API Versioning 정책 내용 검토 | deprecation 기간, 공지 방법, 마이그레이션 지원이 현실적인지 판단 | [HUMAN] |

---

## 의존

| 의존 대상 | 이유 |
|----------|------|
| v2.0 (전 기능 릴리스) | v2.0에서 SECURITY.md, npm Provenance, SHA256 Checksums, CODE_OF_CONDUCT.md, Issue Templates 등 Critical 항목이 구축됨. v2.0.1은 이 기반 위에 신뢰 체계를 강화 |
| v1.7 (CI/CD) | release.yml에 cosign 서명 step, scorecard.yml, dco.yml 추가. CI/CD 파이프라인이 기반 |
| v1.8/v1.9 (업그레이드 인프라) | Migration Guide가 v1.8/v1.9의 업그레이드 시퀀스와 연동 |

---

## 리스크

| # | 리스크 | 영향 | 대응 방안 |
|---|--------|------|----------|
| 1 | Sigstore/Rekor 서비스 가용성 | cosign 키리스 서명이 Sigstore 인프라에 의존. 다운 시 릴리스 서명 불가 | CI에서 재시도 로직 + 실패 시 수동 서명 폴백 문서화 |
| 2 | OpenSSF Scorecard 점수 개선 난이도 | 초기 점수가 낮을 수 있음 (branch protection, SAST 등 미설정 항목) | 점수 공개 자체가 목표. 개선 항목을 이슈로 관리하여 점진적 개선 |
| 3 | DCO 강제로 인한 기여 진입장벽 | `--signoff` 습관이 없는 기여자가 PR 거부당할 수 있음 | DCO bot이 자동 안내 메시지 제공. CONTRIBUTING.md에 `git commit --signoff` 가이드 포함 |
| 4 | API Versioning 정책의 하위호환 부담 | `/v1` API를 1년간 유지해야 하므로, `/v2` 도입 시 2개 버전 동시 운영 | 초기에는 `/v1`만 존재하므로 실질 부담 없음. `/v2` 도입 시점에 구체적 전략 수립 |

---

*최종 업데이트: 2026-02-10 — 초안 작성 (v2.0 Critical 기반 위에 High 항목 8건 구현)*
