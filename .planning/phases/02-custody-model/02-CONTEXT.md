# Phase 2: 커스터디 모델 분석 - Context

**Gathered:** 2026-02-04
**Status:** Ready for planning

<domain>
## Phase Boundary

AI 에이전트 지갑에 최적화된 커스터디 모델을 분석하고 권장 방식을 제안한다. **외부 프로바이더 의존 없이 직접 구축**을 전제로 HSM/KMS/MPC 등 자체 키 관리 방식을 비교 분석한다.

**중요 변경:** Phase 1에서 선택한 Turnkey 프로바이더를 철회하고, 지갑 전체를 직접 구축하는 방향으로 전환한다.

</domain>

<decisions>
## Implementation Decisions

### 비교 기준 설정
- **보안성 최우선**: 키 유출 위험, 단일 장애점, 복구 가능성이 최우선 기준
- **위협 모델**: 내부 위협(에이전트 키 탈취, 내부자 공격, 신뢰 문제)과 외부 위협(해커 공격, 피싱, API 엔드포인트 공격) 모두 동등하게 분석
- **규제 고려**: GDPR, SOC2, 암호화폐 규제 등 컴플라이언스 요소 분석 포함

### AI 에이전트 특화 관점
- **자율적 트랜잭션**: 사람 승인 없이 AI가 직접 서명/제출하는 시나리오를 기본으로 가정
- **자율성 제한**: 금액 한도 + 화이트리스트 + 시간 제어 등 복합 정책으로 제한
- **장애 복구**: 에이전트 장애 시 소유자 즉각 복구와 키 교체 모두 필수 요소로 설계
- **비교 형식**: "일반 사용자라면 X, AI 에이전트라면 Y" 형식의 시나리오 기반 차이점 정리

### 키 관리 방식 (직접 구축 전제)
- **범위**: HSM(AWS CloudHSM 등), KMS(AWS KMS 등), 자체 MPC 구현 등 자체 구축 옵션 비교 분석
- **프로바이더 비교**: 외부 WaaS 프로바이더(Turnkey, Crossmint, Dfns, Privy, Dynamic, Capsule 등) 비교는 참고 자료로만 포함
- **테스트**: 문서 기반 분석만 진행 (실제 PoC 테스트 없음)
- **비교 항목**: 지원 체인, API 특성, 보안 모델, SDK 지원 등 기술 중심 비교

### 권장안 제시 형식
- **핵심 원칙**: 보안 최우선, 단순 키 저장이 아닌 에이전트-서버 간 키 관리 프로토콜 설계 포함
- **키 분리 설계**: 에이전트만 알고 있는 값(agent secret)과 서버에서 관리하는 값의 분리 구조 설계
- **표준 참고**: MPC-TSS 표준, 개인키 암호화 기술 표준, 업계 베스트 프랙티스 종합 검토
- **위험 분석**: 각 권장안의 위험 요소와 완화 방안 포함

### Claude's Discretion
- 비용 분석 수준 (정성적/정량적)
- 외부 프로바이더 비교 시 추가 프로바이더 선정
- 에이전트 비밀값 저장 위치 권장 (휘발성 메모리 vs 암호화 저장소)
- 각 키 관리 방식의 상세 기술 비교 기준

</decisions>

<specifics>
## Specific Ideas

- 에이전트-서버 간 비밀값 분리: 에이전트 측 시크릿과 서버 측 관리값을 결합해야만 유효한 서명이 가능하도록 설계
- Dual Key 개념: Owner Key(소유자 통제)와 Agent Key(에이전트 운영용)의 역할 분리가 Phase 3 아키텍처로 연결됨
- Phase 1 Turnkey 결정 철회 필요: TECH-01 문서에서 Turnkey 관련 내용을 "직접 구축"으로 변경

</specifics>

<deferred>
## Deferred Ideas

None — 논의가 Phase 2 범위 내에서 진행됨

</deferred>

---

*Phase: 02-custody-model*
*Context gathered: 2026-02-04*
