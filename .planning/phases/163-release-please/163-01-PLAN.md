---
phase: 163-release-please
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .release-please-manifest.json
  - release-please-config.json
  - .github/workflows/release-please.yml
autonomous: true
requirements: [RLSE-01, RLSE-02, RLSE-03, RLSE-07]

must_haves:
  truths:
    - "release-please 설정 파일이 모노레포 루트 단일 버전 전략으로 구성되어 있다"
    - "release-please.yml 워크플로우가 main 푸시 시 자동 실행되어 Release PR을 생성/갱신한다"
    - "Release PR 머지 시 CHANGELOG.md가 갱신되고 GitHub Release + 태그가 자동 생성된다"
    - "BREAKING CHANGE 커밋 시 major 버전이 범프된다"
  artifacts:
    - path: ".release-please-manifest.json"
      provides: "현재 버전 매핑 (루트 패키지)"
      contains: '"."'
    - path: "release-please-config.json"
      provides: "release-please 설정 (릴리스 타입, CHANGELOG, 모노레포 패키지 목록)"
      contains: "release-type"
    - path: ".github/workflows/release-please.yml"
      provides: "release-please GitHub Action 워크플로우"
      contains: "google-github-actions/release-please-action"
  key_links:
    - from: ".github/workflows/release-please.yml"
      to: "release-please-config.json"
      via: "config-file input"
      pattern: "config-file.*release-please-config.json"
    - from: ".github/workflows/release-please.yml"
      to: ".release-please-manifest.json"
      via: "manifest-file input"
      pattern: "manifest-file.*\\.release-please-manifest\\.json"
---

<objective>
release-please 설정 파일과 워크플로우를 생성하여, Conventional Commits 기반 자동 릴리스 PR 생성 + CHANGELOG + GitHub Release + 태그 자동화를 구현한다.

Purpose: 수동 버전 관리를 제거하고 Conventional Commits → 자동 CHANGELOG/버전/태그 파이프라인을 구축한다
Output: `.release-please-manifest.json`, `release-please-config.json`, `.github/workflows/release-please.yml`
</objective>

<execution_context>
@/Users/minho.yoo/.claude/get-shit-done/workflows/execute-plan.md
@/Users/minho.yoo/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@objectives/v1.8-upgrade-distribution.md (섹션 7: 릴리스 자동화 2-게이트 모델)
@package.json (루트 - 현재 버전 없음, private: true)
@packages/core/package.json (현재 버전 1.7.0)
</context>

<tasks>

<task type="auto">
  <name>Task 1: release-please 설정 파일 3종 생성</name>
  <files>
    .release-please-manifest.json
    release-please-config.json
    .github/workflows/release-please.yml
  </files>
  <action>
**1. `.release-please-manifest.json` 생성 (루트에)**

모노레포 단일 버전 전략. 루트 패키지(`.`)가 모든 패키지의 버전을 대표한다.

```json
{
  ".": "1.7.0"
}
```

현재 모든 패키지가 1.7.0이므로 시작 버전을 1.7.0으로 설정한다. release-please가 다음 릴리스 시 Conventional Commits를 파싱하여 1.8.0 또는 2.0.0으로 범프한다.

**2. `release-please-config.json` 생성 (루트에)**

```json
{
  "$schema": "https://raw.githubusercontent.com/googleapis/release-please/main/schemas/config.json",
  "release-type": "node",
  "bump-minor-pre-major": false,
  "bump-patch-for-minor-pre-major": false,
  "include-component-in-tag": false,
  "include-v-in-tag": true,
  "changelog-sections": [
    { "type": "feat", "section": "Features" },
    { "type": "fix", "section": "Bug Fixes" },
    { "type": "perf", "section": "Performance" },
    { "type": "refactor", "section": "Code Refactoring" },
    { "type": "docs", "section": "Documentation", "hidden": true },
    { "type": "test", "section": "Tests", "hidden": true },
    { "type": "chore", "section": "Miscellaneous", "hidden": true },
    { "type": "ci", "section": "CI/CD", "hidden": true }
  ],
  "packages": {
    ".": {
      "component": "waiaas",
      "changelog-path": "CHANGELOG.md",
      "extra-files": [
        "packages/core/package.json",
        "packages/daemon/package.json",
        "packages/cli/package.json",
        "packages/sdk/package.json",
        "packages/mcp/package.json",
        "packages/admin/package.json",
        "packages/adapters/solana/package.json",
        "packages/adapters/evm/package.json",
        "python-sdk/pyproject.toml"
      ]
    }
  }
}
```

핵심 설정 근거:
- `release-type: node` → package.json 버전 자동 범프 (기술 결정 #10, #16)
- `bump-minor-pre-major: false` → 1.x에서도 BREAKING CHANGE가 major 범프 (RLSE-07)
- `include-v-in-tag: true` → 태그 형식 `v1.8.0` (기존 태그 형식 유지)
- `include-component-in-tag: false` → 컴포넌트 접두사 없음 (단일 릴리스)
- `extra-files` → 8개 Node.js 패키지 + python-sdk의 버전도 함께 범프
- `changelog-sections` → feat, fix, perf, refactor만 CHANGELOG에 표시. docs/test/chore/ci는 숨김

**3. `.github/workflows/release-please.yml` 생성**

```yaml
name: Release Please

on:
  push:
    branches: [main]

permissions:
  contents: write
  pull-requests: write

jobs:
  release-please:
    runs-on: ubuntu-latest
    outputs:
      release_created: ${{ steps.release.outputs.release_created }}
      tag_name: ${{ steps.release.outputs.tag_name }}
      version: ${{ steps.release.outputs.version }}
    steps:
      - name: Release Please
        id: release
        uses: google-github-actions/release-please-action@v4
        with:
          config-file: release-please-config.json
          manifest-file: .release-please-manifest.json
```

워크플로우 설명:
- `on: push: branches: [main]` → main 브랜치 푸시 시 자동 실행
- `permissions: contents: write, pull-requests: write` → Release PR 생성/갱신 + Release 생성에 필요
- `google-github-actions/release-please-action@v4` → 최신 v4 사용
- `config-file` / `manifest-file` → 루트 설정 파일 참조
- outputs → 다른 job에서 활용 가능 (현재는 단독 워크플로우, release.yml이 별도 트리거)

**중요:** release-please.yml은 Release PR 생성/갱신 + Release 생성만 담당. 품질 게이트와 배포는 기존 release.yml이 `on: release: types: [published]`로 처리한다 (163-02에서 확장).
  </action>
  <verify>
모든 파일이 올바른 위치에 생성되었는지 확인:
- `ls -la .release-please-manifest.json release-please-config.json .github/workflows/release-please.yml`
- JSON 파싱 검증: `node -e "JSON.parse(require('fs').readFileSync('.release-please-manifest.json','utf8'))"`
- JSON 파싱 검증: `node -e "JSON.parse(require('fs').readFileSync('release-please-config.json','utf8'))"`
- release-please.yml에 `google-github-actions/release-please-action@v4` 포함 확인
- release-please-config.json에 extra-files로 9개 패키지 경로가 포함되어 있는지 확인
- manifest에 현재 버전 "1.7.0"이 설정되어 있는지 확인
  </verify>
  <done>
- `.release-please-manifest.json`에 `".": "1.7.0"` 매핑이 존재한다
- `release-please-config.json`에 `release-type: node`, `extra-files` 9개 패키지, `bump-minor-pre-major: false` 설정이 존재한다
- `.github/workflows/release-please.yml`이 main 푸시 시 release-please-action@v4를 실행한다
- BREAKING CHANGE 커밋 시 major 범프가 가능하도록 `bump-minor-pre-major: false`로 설정되어 있다
  </done>
</task>

</tasks>

<verification>
1. `.release-please-manifest.json` 파일이 유효한 JSON이고 `".": "1.7.0"` 포함
2. `release-please-config.json`이 유효한 JSON이고 `release-type: "node"`, 9개 `extra-files`, `bump-minor-pre-major: false`, `include-v-in-tag: true` 포함
3. `.github/workflows/release-please.yml`이 `on: push: branches: [main]` 트리거 + `google-github-actions/release-please-action@v4` 사용
4. 3개 파일 간 참조 일관성 (config-file, manifest-file 경로)
</verification>

<success_criteria>
- release-please 설정 3종이 모노레포 루트에 존재하고 유효한 형식이다
- feat: 커밋 머지 시 Release PR이 자동 생성되는 워크플로우가 구성되어 있다
- Release PR 머지 시 CHANGELOG.md 갱신 + GitHub Release + 태그 자동 생성이 가능하다
- BREAKING CHANGE 시 major 버전 범프가 구성되어 있다
</success_criteria>

<output>
After completion, create `.planning/phases/163-release-please/163-01-SUMMARY.md`
</output>
