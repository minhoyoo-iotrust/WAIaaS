---
phase: 48-monorepo-scaffold-core
plan: 03
type: tdd
wave: 3
depends_on: ["48-02"]
files_modified:
  - packages/core/src/interfaces/IChainAdapter.ts
  - packages/core/src/interfaces/ILocalKeyStore.ts
  - packages/core/src/interfaces/IPolicyEngine.ts
  - packages/core/src/interfaces/INotificationChannel.ts
  - packages/core/src/interfaces/chain-adapter.types.ts
  - packages/core/src/interfaces/index.ts
  - packages/core/src/i18n/en.ts
  - packages/core/src/i18n/ko.ts
  - packages/core/src/i18n/index.ts
  - packages/core/src/index.ts
  - packages/core/src/__tests__/interfaces.test.ts
  - packages/core/src/__tests__/i18n.test.ts
  - packages/core/src/__tests__/package-exports.test.ts
autonomous: true

must_haves:
  truths:
    - "IChainAdapter(10개 메서드), ILocalKeyStore, IPolicyEngine, INotificationChannel 인터페이스가 정의되고 다른 패키지에서 import 가능하다"
    - "`getMessages('ko')` 호출 시 한글 메시지 객체가 반환되고, `getMessages('en')` 호출 시 영문 메시지 객체가 반환된다"
    - "`@waiaas/core`를 다른 패키지에서 import하면 12개 Enum, Zod 스키마, 66개 에러 코드, 4개 인터페이스에 대한 타입 추론이 IDE에서 동작한다"
    - "`pnpm build && pnpm test && pnpm lint`가 루트에서 한 번에 성공한다"
  artifacts:
    - path: "packages/core/src/interfaces/IChainAdapter.ts"
      provides: "IChainAdapter 인터페이스 (10 메서드)"
      exports: ["IChainAdapter"]
    - path: "packages/core/src/interfaces/ILocalKeyStore.ts"
      provides: "ILocalKeyStore 인터페이스"
      exports: ["ILocalKeyStore"]
    - path: "packages/core/src/interfaces/IPolicyEngine.ts"
      provides: "IPolicyEngine 인터페이스"
      exports: ["IPolicyEngine"]
    - path: "packages/core/src/interfaces/INotificationChannel.ts"
      provides: "INotificationChannel 인터페이스"
      exports: ["INotificationChannel"]
    - path: "packages/core/src/interfaces/chain-adapter.types.ts"
      provides: "체인 어댑터 공통 타입 (TransferRequest, UnsignedTransaction 등)"
      exports: ["TransferRequest", "UnsignedTransaction", "SimulationResult", "SubmitResult", "BalanceInfo", "TokenAmount"]
    - path: "packages/core/src/i18n/index.ts"
      provides: "getMessages() 함수 + SupportedLocale 타입"
      exports: ["getMessages", "SupportedLocale"]
    - path: "packages/core/src/i18n/en.ts"
      provides: "영문 메시지 템플릿"
      contains: "messages"
    - path: "packages/core/src/i18n/ko.ts"
      provides: "한글 메시지 템플릿"
      contains: "messages"
  key_links:
    - from: "packages/core/src/interfaces/IChainAdapter.ts"
      to: "packages/core/src/interfaces/chain-adapter.types.ts"
      via: "import types for method signatures"
      pattern: "import.*from.*chain-adapter\\.types"
    - from: "packages/core/src/interfaces/IChainAdapter.ts"
      to: "packages/core/src/enums/chain.ts"
      via: "ChainType, NetworkType for adapter identity"
      pattern: "import.*ChainType.*from.*enums"
    - from: "packages/core/src/i18n/index.ts"
      to: "packages/core/src/i18n/en.ts"
      via: "dynamic import for locale messages"
      pattern: "import.*en"
    - from: "packages/core/src/index.ts"
      to: "packages/core/src/interfaces/index.ts"
      via: "re-export all interfaces"
      pattern: "export.*from.*interfaces"
---

<objective>
@waiaas/core에 4개 인터페이스(IChainAdapter, ILocalKeyStore, IPolicyEngine, INotificationChannel)와 체인 어댑터 공통 타입, i18n 다국어 메시지 시스템을 구현하고, 패키지 전체 빌드/export 검증을 수행한다.

Purpose: 인터페이스는 Phase 49-50에서 구현되는 어댑터/키스토어/정책엔진의 계약(contract). i18n은 에러 메시지와 CLI 출력의 다국어 지원 기반. 이 Plan이 완료되면 @waiaas/core는 모든 다운스트림 패키지의 공유 의존성으로서 완전하다.
Output: 4 인터페이스 파일, chain-adapter.types.ts, i18n 3 파일, 테스트 3 파일
</objective>

<execution_context>
@/Users/minho.yoo/.claude/get-shit-done/workflows/execute-plan.md
@/Users/minho.yoo/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/48-monorepo-scaffold-core/48-01-SUMMARY.md
@.planning/phases/48-monorepo-scaffold-core/48-02-SUMMARY.md
@.planning/deliverables/27-chain-adapter-interface.md (IChainAdapter 전체 설계)
@.planning/deliverables/26-keystore-spec.md (ILocalKeyStore 설계)
@.planning/deliverables/33-time-lock-approval-mechanism.md (IPolicyEngine 설계)
@.planning/deliverables/35-notification-architecture.md (INotificationChannel 설계)
@objectives/v1.1-core-infrastructure.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: 4개 인터페이스 + 체인 어댑터 공통 타입 정의</name>
  <files>
    packages/core/src/interfaces/chain-adapter.types.ts
    packages/core/src/interfaces/IChainAdapter.ts
    packages/core/src/interfaces/ILocalKeyStore.ts
    packages/core/src/interfaces/IPolicyEngine.ts
    packages/core/src/interfaces/INotificationChannel.ts
    packages/core/src/interfaces/index.ts
    packages/core/src/index.ts
  </files>
  <action>
**A. 체인 어댑터 공통 타입 (chain-adapter.types.ts)**

27-chain-adapter-interface.md 섹션 2에서 정의된 타입들을 그대로 TypeScript 인터페이스로 작성:

```typescript
import type { ChainType } from '../enums/chain.js';

export interface TokenAmount {
  raw: bigint;
  decimals: number;
  symbol: string;
}

export interface TransferRequest {
  from: string;
  to: string;
  amount: bigint;
  memo?: string;
}

export interface UnsignedTransaction {
  chain: ChainType;
  serialized: Uint8Array;
  estimatedFee: bigint;
  expiresAt?: Date;
  metadata: Record<string, unknown>;
  nonce?: number; // [v0.7] EVM only
}

export interface SimulationResult {
  success: boolean;
  logs: string[];
  unitsConsumed?: bigint;
  error?: string;
}

export interface SubmitResult {
  txHash: string;
  status: 'submitted' | 'confirmed' | 'finalized';
  confirmations?: number;
  blockNumber?: bigint;
  fee?: bigint;
}

export interface BalanceInfo {
  address: string;
  balance: bigint;
  decimals: number;
  symbol: string;
  usdValue?: number;
}

export interface HealthInfo {
  healthy: boolean;
  latencyMs: number;
  blockHeight?: bigint;
}
```

**B. IChainAdapter (10개 v1.1 메서드)**

27-chain-adapter-interface.md 섹션 3에서 정의된 20개 메서드 중 v1.1에서 구현하는 10개만 포함. 나머지 10개는 주석으로 "v1.4에서 추가" 표기.

```typescript
import type { ChainType, NetworkType } from '../enums/chain.js';
import type {
  TransferRequest, UnsignedTransaction, SimulationResult,
  SubmitResult, BalanceInfo, HealthInfo,
} from './chain-adapter.types.js';

export interface IChainAdapter {
  readonly chain: ChainType;
  readonly network: NetworkType;

  // 연결 관리 (4개)
  connect(rpcUrl: string): Promise<void>;
  disconnect(): Promise<void>;
  isConnected(): boolean;
  getHealth(): Promise<HealthInfo>;

  // 잔액 조회 (1개)
  getBalance(address: string): Promise<BalanceInfo>;

  // 트랜잭션 4단계 (4개)
  buildTransaction(request: TransferRequest): Promise<UnsignedTransaction>;
  simulateTransaction(tx: UnsignedTransaction): Promise<SimulationResult>;
  signTransaction(tx: UnsignedTransaction, privateKey: Uint8Array): Promise<Uint8Array>;
  submitTransaction(signedTx: Uint8Array): Promise<SubmitResult>;

  // 확정 대기 (1개)
  waitForConfirmation(txHash: string, timeoutMs?: number): Promise<SubmitResult>;

  // v1.4에서 추가 예정:
  // getAssets(address: string): Promise<AssetInfo[]>;
  // estimateFee(request: TransferRequest): Promise<FeeEstimate>;
  // buildContractCall(request: ContractCallRequest): Promise<UnsignedTransaction>;
  // buildApprove(request: ApproveRequest): Promise<UnsignedTransaction>;
  // buildBatch(request: BatchRequest): Promise<UnsignedTransaction>;
  // sweepAll(address: string, toAddress: string, privateKey: Uint8Array): Promise<SweepResult>;
  // getCurrentNonce(address: string): Promise<number>;
  // resetNonceTracker(address: string): void;
  // getTransactionStatus(txHash: string): Promise<SubmitResult>;
  // validateAddress(address: string): boolean;
}
```

**C. ILocalKeyStore**

26-keystore-spec.md에서 정의된 키스토어 인터페이스. v1.1에 필요한 최소 메서드:

```typescript
export interface ILocalKeyStore {
  /** 키 쌍 생성 + 암호화 저장 */
  generateKeyPair(agentId: string, chain: ChainType, masterPassword: string): Promise<{
    publicKey: string;
    encryptedPrivateKey: Uint8Array;
  }>;

  /** 개인키 복호화 (guarded memory) */
  decryptPrivateKey(agentId: string, masterPassword: string): Promise<Uint8Array>;

  /** 개인키를 메모리에서 안전하게 해제 */
  releaseKey(key: Uint8Array): void;

  /** 키스토어 파일 존재 확인 */
  hasKey(agentId: string): Promise<boolean>;

  /** 키스토어 파일 삭제 */
  deleteKey(agentId: string): Promise<void>;
}
```

**D. IPolicyEngine**

33-time-lock-approval-mechanism.md에서 정의. v1.1에서는 INSTANT 고정이지만 인터페이스는 완전한 계약을 정의:

```typescript
import type { PolicyTier } from '../enums/policy.js';
import type { Transaction } from '../schemas/transaction.schema.js';

export interface PolicyEvaluation {
  tier: PolicyTier;
  allowed: boolean;
  reason?: string;
  delaySeconds?: number; // DELAY tier일 때 대기 시간
}

export interface IPolicyEngine {
  /** 트랜잭션의 정책 티어를 평가 */
  evaluate(agentId: string, transaction: {
    type: string;
    amount: string;
    toAddress: string;
    chain: string;
  }): Promise<PolicyEvaluation>;
}
```

**E. INotificationChannel**

35-notification-architecture.md에서 정의. 알림 채널 인터페이스:

```typescript
import type { NotificationEventType } from '../enums/notification.js';

export interface NotificationPayload {
  eventType: NotificationEventType;
  agentId: string;
  message: string;
  details?: Record<string, unknown>;
  timestamp: number; // Unix epoch seconds
}

export interface INotificationChannel {
  /** 채널 초기화 (API 키 등 설정 검증) */
  initialize(config: Record<string, unknown>): Promise<void>;

  /** 알림 발송 */
  send(payload: NotificationPayload): Promise<void>;

  /** 채널 이름 */
  readonly name: string;
}
```

**F. interfaces/index.ts:** 모든 인터페이스와 타입을 re-export.

**G. packages/core/src/index.ts 업데이트:** interfaces 모듈 re-export 추가.
  </action>
  <verify>
`pnpm --filter @waiaas/core build` -- 빌드 성공, dist/interfaces/*.d.ts 생성 확인.
`pnpm --filter @waiaas/core lint` -- 린트 에러 0.
  </verify>
  <done>4개 인터페이스(IChainAdapter 10메서드, ILocalKeyStore, IPolicyEngine, INotificationChannel)와 체인 어댑터 공통 타입이 정의되고 다른 패키지에서 import 가능하다.</done>
</task>

<task type="auto">
  <name>Task 2: i18n 메시지 시스템 + 전체 빌드/export 검증 테스트</name>
  <files>
    packages/core/src/i18n/en.ts
    packages/core/src/i18n/ko.ts
    packages/core/src/i18n/index.ts
    packages/core/src/index.ts
    packages/core/src/__tests__/interfaces.test.ts
    packages/core/src/__tests__/i18n.test.ts
    packages/core/src/__tests__/package-exports.test.ts
  </files>
  <action>
**A. i18n 메시지 시스템 (packages/core/src/i18n/)**

**i18n/en.ts:**
영문 메시지 템플릿. 에러 코드별 메시지와 CLI/시스템 메시지를 포함:

```typescript
export const messages = {
  // 에러 메시지 (66개 에러 코드의 기본 메시지)
  errors: {
    INVALID_TOKEN: 'Invalid authentication token',
    TOKEN_EXPIRED: 'Authentication token has expired',
    SESSION_REVOKED: 'Session has been revoked',
    INVALID_SIGNATURE: 'Invalid signature',
    INVALID_NONCE: 'Invalid or expired nonce',
    INVALID_MASTER_PASSWORD: 'Invalid master password',
    MASTER_PASSWORD_LOCKED: 'Master password locked due to too many attempts',
    SYSTEM_LOCKED: 'System is locked (Kill Switch active)',
    SESSION_NOT_FOUND: 'Session not found',
    SESSION_EXPIRED: 'Session has expired',
    SESSION_LIMIT_EXCEEDED: 'Session limit exceeded',
    CONSTRAINT_VIOLATED: 'Session constraint violated',
    RENEWAL_LIMIT_REACHED: 'Session renewal limit reached',
    SESSION_ABSOLUTE_LIFETIME_EXCEEDED: 'Session absolute lifetime exceeded',
    RENEWAL_TOO_EARLY: 'Session renewal too early',
    SESSION_RENEWAL_MISMATCH: 'Session renewal token mismatch',
    INSUFFICIENT_BALANCE: 'Insufficient balance',
    INVALID_ADDRESS: 'Invalid address format',
    TX_NOT_FOUND: 'Transaction not found',
    TX_EXPIRED: 'Transaction has expired',
    TX_ALREADY_PROCESSED: 'Transaction already processed',
    CHAIN_ERROR: 'Blockchain error',
    SIMULATION_FAILED: 'Transaction simulation failed',
    TOKEN_NOT_FOUND: 'Token not found',
    TOKEN_NOT_ALLOWED: 'Token not allowed by policy',
    INSUFFICIENT_TOKEN_BALANCE: 'Insufficient token balance',
    CONTRACT_CALL_DISABLED: 'Contract calls are disabled',
    CONTRACT_NOT_WHITELISTED: 'Contract not whitelisted',
    METHOD_NOT_WHITELISTED: 'Method not whitelisted',
    APPROVE_DISABLED: 'Approve operations are disabled',
    SPENDER_NOT_APPROVED: 'Spender not approved',
    APPROVE_AMOUNT_EXCEEDED: 'Approve amount exceeded',
    UNLIMITED_APPROVE_BLOCKED: 'Unlimited approve is blocked',
    BATCH_NOT_SUPPORTED: 'Batch transactions not supported on this chain',
    BATCH_SIZE_EXCEEDED: 'Batch size exceeded',
    BATCH_POLICY_VIOLATION: 'Batch policy violation',
    POLICY_DENIED: 'Policy denied',
    SPENDING_LIMIT_EXCEEDED: 'Spending limit exceeded',
    RATE_LIMIT_EXCEEDED: 'Rate limit exceeded',
    WHITELIST_DENIED: 'Address not in whitelist',
    OWNER_ALREADY_CONNECTED: 'Owner already connected',
    OWNER_NOT_CONNECTED: 'Owner not connected',
    OWNER_NOT_FOUND: 'Owner not found',
    APPROVAL_TIMEOUT: 'Approval request has timed out',
    APPROVAL_NOT_FOUND: 'Approval request not found',
    KILL_SWITCH_ACTIVE: 'Kill switch is already active',
    KILL_SWITCH_NOT_ACTIVE: 'Kill switch is not active',
    KEYSTORE_LOCKED: 'Keystore is locked',
    CHAIN_NOT_SUPPORTED: 'Chain not supported',
    SHUTTING_DOWN: 'Server is shutting down',
    ADAPTER_NOT_AVAILABLE: 'Chain adapter not available',
    AGENT_NOT_FOUND: 'Agent not found',
    AGENT_SUSPENDED: 'Agent is suspended',
    AGENT_TERMINATED: 'Agent has been terminated',
    NO_OWNER: 'No owner registered for this agent',
    WITHDRAW_LOCKED_ONLY: 'Withdrawal requires LOCKED owner state',
    SWEEP_TOTAL_FAILURE: 'All sweep operations failed',
    INSUFFICIENT_FOR_FEE: 'Insufficient balance for transaction fee',
    ACTION_NOT_FOUND: 'Action not found',
    ACTION_VALIDATION_FAILED: 'Action validation failed',
    ACTION_RESOLVE_FAILED: 'Action resolve failed',
    ACTION_RETURN_INVALID: 'Action return value is invalid',
    ACTION_PLUGIN_LOAD_FAILED: 'Action plugin failed to load',
    ACTION_NAME_CONFLICT: 'Action name conflict',
    ACTION_CHAIN_MISMATCH: 'Action chain mismatch',
    ROTATION_TOO_RECENT: 'Secret rotation too recent',
  },
  // 시스템 메시지
  system: {
    daemon_started: 'WAIaaS daemon started',
    daemon_stopped: 'WAIaaS daemon stopped',
    daemon_already_running: 'Daemon is already running',
    init_complete: 'WAIaaS initialized successfully',
  },
  // CLI 메시지
  cli: {
    prompt_master_password: 'Enter master password:',
    confirm_master_password: 'Confirm master password:',
    password_mismatch: 'Passwords do not match',
    status_running: 'Status: running',
    status_stopped: 'Status: stopped',
  },
} as const;

export type Messages = typeof messages;
```

**i18n/ko.ts:**
한글 메시지 (동일 구조, 값만 한글):

```typescript
import type { Messages } from './en.js';

export const messages: Messages = {
  errors: {
    INVALID_TOKEN: '유효하지 않은 인증 토큰입니다',
    TOKEN_EXPIRED: '인증 토큰이 만료되었습니다',
    SESSION_REVOKED: '세션이 폐기되었습니다',
    INVALID_SIGNATURE: '유효하지 않은 서명입니다',
    INVALID_NONCE: '유효하지 않거나 만료된 nonce입니다',
    INVALID_MASTER_PASSWORD: '마스터 패스워드가 올바르지 않습니다',
    MASTER_PASSWORD_LOCKED: '로그인 시도 초과로 마스터 패스워드가 잠겼습니다',
    SYSTEM_LOCKED: '시스템이 잠겼습니다 (킬 스위치 활성)',
    // ... (나머지 66개 한글 메시지 모두 포함)
    SESSION_NOT_FOUND: '세션을 찾을 수 없습니다',
    SESSION_EXPIRED: '세션이 만료되었습니다',
    SESSION_LIMIT_EXCEEDED: '세션 제한을 초과했습니다',
    CONSTRAINT_VIOLATED: '세션 제약 조건을 위반했습니다',
    RENEWAL_LIMIT_REACHED: '세션 갱신 제한에 도달했습니다',
    SESSION_ABSOLUTE_LIFETIME_EXCEEDED: '세션 절대 수명을 초과했습니다',
    RENEWAL_TOO_EARLY: '세션 갱신이 너무 이릅니다',
    SESSION_RENEWAL_MISMATCH: '세션 갱신 토큰이 일치하지 않습니다',
    INSUFFICIENT_BALANCE: '잔액이 부족합니다',
    INVALID_ADDRESS: '유효하지 않은 주소 형식입니다',
    TX_NOT_FOUND: '트랜잭션을 찾을 수 없습니다',
    TX_EXPIRED: '트랜잭션이 만료되었습니다',
    TX_ALREADY_PROCESSED: '이미 처리된 트랜잭션입니다',
    CHAIN_ERROR: '블록체인 오류가 발생했습니다',
    SIMULATION_FAILED: '트랜잭션 시뮬레이션에 실패했습니다',
    TOKEN_NOT_FOUND: '토큰을 찾을 수 없습니다',
    TOKEN_NOT_ALLOWED: '정책에 의해 허용되지 않는 토큰입니다',
    INSUFFICIENT_TOKEN_BALANCE: '토큰 잔액이 부족합니다',
    CONTRACT_CALL_DISABLED: '컨트랙트 호출이 비활성화되어 있습니다',
    CONTRACT_NOT_WHITELISTED: '화이트리스트에 없는 컨트랙트입니다',
    METHOD_NOT_WHITELISTED: '화이트리스트에 없는 메서드입니다',
    APPROVE_DISABLED: 'Approve 작업이 비활성화되어 있습니다',
    SPENDER_NOT_APPROVED: '승인되지 않은 spender입니다',
    APPROVE_AMOUNT_EXCEEDED: 'Approve 금액을 초과했습니다',
    UNLIMITED_APPROVE_BLOCKED: '무제한 approve가 차단되어 있습니다',
    BATCH_NOT_SUPPORTED: '이 체인에서 배치 트랜잭션이 지원되지 않습니다',
    BATCH_SIZE_EXCEEDED: '배치 크기를 초과했습니다',
    BATCH_POLICY_VIOLATION: '배치 정책 위반입니다',
    POLICY_DENIED: '정책에 의해 거부되었습니다',
    SPENDING_LIMIT_EXCEEDED: '지출 한도를 초과했습니다',
    RATE_LIMIT_EXCEEDED: '요청 빈도 제한을 초과했습니다',
    WHITELIST_DENIED: '화이트리스트에 없는 주소입니다',
    OWNER_ALREADY_CONNECTED: 'Owner가 이미 연결되어 있습니다',
    OWNER_NOT_CONNECTED: 'Owner가 연결되지 않았습니다',
    OWNER_NOT_FOUND: 'Owner를 찾을 수 없습니다',
    APPROVAL_TIMEOUT: '승인 요청이 시간 초과되었습니다',
    APPROVAL_NOT_FOUND: '승인 요청을 찾을 수 없습니다',
    KILL_SWITCH_ACTIVE: '킬 스위치가 이미 활성화되어 있습니다',
    KILL_SWITCH_NOT_ACTIVE: '킬 스위치가 활성화되지 않았습니다',
    KEYSTORE_LOCKED: '키스토어가 잠겨 있습니다',
    CHAIN_NOT_SUPPORTED: '지원하지 않는 체인입니다',
    SHUTTING_DOWN: '서버가 종료 중입니다',
    ADAPTER_NOT_AVAILABLE: '체인 어댑터를 사용할 수 없습니다',
    AGENT_NOT_FOUND: '에이전트를 찾을 수 없습니다',
    AGENT_SUSPENDED: '에이전트가 정지 상태입니다',
    AGENT_TERMINATED: '에이전트가 종료되었습니다',
    NO_OWNER: '이 에이전트에 등록된 Owner가 없습니다',
    WITHDRAW_LOCKED_ONLY: '출금에는 LOCKED Owner 상태가 필요합니다',
    SWEEP_TOTAL_FAILURE: '모든 sweep 작업이 실패했습니다',
    INSUFFICIENT_FOR_FEE: '트랜잭션 수수료에 필요한 잔액이 부족합니다',
    ACTION_NOT_FOUND: '액션을 찾을 수 없습니다',
    ACTION_VALIDATION_FAILED: '액션 검증에 실패했습니다',
    ACTION_RESOLVE_FAILED: '액션 해석에 실패했습니다',
    ACTION_RETURN_INVALID: '액션 반환값이 유효하지 않습니다',
    ACTION_PLUGIN_LOAD_FAILED: '액션 플러그인 로드에 실패했습니다',
    ACTION_NAME_CONFLICT: '액션 이름이 충돌합니다',
    ACTION_CHAIN_MISMATCH: '액션의 체인이 일치하지 않습니다',
    ROTATION_TOO_RECENT: '시크릿 로테이션이 너무 최근에 수행되었습니다',
  },
  system: {
    daemon_started: 'WAIaaS 데몬이 시작되었습니다',
    daemon_stopped: 'WAIaaS 데몬이 종료되었습니다',
    daemon_already_running: '데몬이 이미 실행 중입니다',
    init_complete: 'WAIaaS 초기화가 완료되었습니다',
  },
  cli: {
    prompt_master_password: '마스터 패스워드를 입력하세요:',
    confirm_master_password: '마스터 패스워드를 다시 입력하세요:',
    password_mismatch: '패스워드가 일치하지 않습니다',
    status_running: '상태: 실행 중',
    status_stopped: '상태: 정지',
  },
};
```

**i18n/index.ts:**
```typescript
import type { Messages } from './en.js';
import { messages as en } from './en.js';
import { messages as ko } from './ko.js';

export type SupportedLocale = 'en' | 'ko';

const localeMap: Record<SupportedLocale, Messages> = { en, ko };

export function getMessages(locale: SupportedLocale = 'en'): Messages {
  return localeMap[locale] ?? en;
}

export type { Messages };
```

**B. packages/core/src/index.ts 최종 업데이트:**
enums, schemas, errors, interfaces, i18n 모듈에서 모든 public API를 re-export. 이것이 @waiaas/core의 최종 진입점.

**C. 테스트 파일 3개:**

**interfaces.test.ts:**
```typescript
import { describe, it, expect } from 'vitest';
// 인터페이스는 컴파일 타임에만 존재하므로, import가 성공하는지와
// 공통 타입이 올바르게 export되는지만 검증한다.
import type { IChainAdapter, ILocalKeyStore, IPolicyEngine, INotificationChannel } from '../index.js';
import type { TransferRequest, UnsignedTransaction, SimulationResult, SubmitResult, BalanceInfo, HealthInfo, TokenAmount } from '../index.js';

describe('인터페이스 export 검증', () => {
  it('IChainAdapter 타입이 import 가능하다', () => {
    // 컴파일 타임 검증. 런타임에는 타입이 존재하지 않으므로 빈 테스트.
    // 이 파일이 tsc 컴파일에 성공하면 인터페이스 export가 올바른 것.
    const _check: IChainAdapter | null = null;
    expect(_check).toBeNull();
  });

  it('체인 어댑터 공통 타입이 import 가능하다', () => {
    const _req: TransferRequest | null = null;
    const _tx: UnsignedTransaction | null = null;
    const _sim: SimulationResult | null = null;
    const _sub: SubmitResult | null = null;
    const _bal: BalanceInfo | null = null;
    const _health: HealthInfo | null = null;
    const _amt: TokenAmount | null = null;
    expect(_req).toBeNull();
  });
});
```

**i18n.test.ts:**
```typescript
import { describe, it, expect } from 'vitest';
import { getMessages } from '../index.js';
import type { SupportedLocale, Messages } from '../index.js';

describe('i18n 메시지 시스템', () => {
  it('getMessages("en")이 영문 메시지를 반환한다', () => {
    const msg = getMessages('en');
    expect(msg.errors.AGENT_NOT_FOUND).toBe('Agent not found');
    expect(msg.system.daemon_started).toBe('WAIaaS daemon started');
    expect(msg.cli.prompt_master_password).toBe('Enter master password:');
  });

  it('getMessages("ko")이 한글 메시지를 반환한다', () => {
    const msg = getMessages('ko');
    expect(msg.errors.AGENT_NOT_FOUND).toBe('에이전트를 찾을 수 없습니다');
    expect(msg.system.daemon_started).toBe('WAIaaS 데몬이 시작되었습니다');
    expect(msg.cli.prompt_master_password).toBe('마스터 패스워드를 입력하세요:');
  });

  it('기본 locale은 "en"이다', () => {
    const msg = getMessages();
    expect(msg.errors.AGENT_NOT_FOUND).toBe('Agent not found');
  });

  it('en과 ko의 에러 메시지 키가 동일하다', () => {
    const en = getMessages('en');
    const ko = getMessages('ko');
    const enKeys = Object.keys(en.errors).sort();
    const koKeys = Object.keys(ko.errors).sort();
    expect(enKeys).toEqual(koKeys);
  });

  it('모든 에러 코드에 대한 메시지가 존재한다', () => {
    const en = getMessages('en');
    // ERROR_CODES의 모든 키가 en.errors에 존재하는지 확인
    // (import ERROR_CODES는 circular dependency 방지를 위해 별도 확인)
    expect(Object.keys(en.errors).length).toBe(66);
  });
});
```

**package-exports.test.ts:**
```typescript
import { describe, it, expect } from 'vitest';
import * as core from '../index.js';

describe('@waiaas/core 패키지 export 검증', () => {
  it('12개 Enum as const 배열이 export된다', () => {
    expect(core.CHAIN_TYPES).toBeDefined();
    expect(core.NETWORK_TYPES).toBeDefined();
    expect(core.AGENT_STATUSES).toBeDefined();
    expect(core.TRANSACTION_STATUSES).toBeDefined();
    expect(core.TRANSACTION_TYPES).toBeDefined();
    expect(core.POLICY_TYPES).toBeDefined();
    expect(core.POLICY_TIERS).toBeDefined();
    expect(core.SESSION_STATUSES).toBeDefined();
    expect(core.NOTIFICATION_EVENT_TYPES).toBeDefined();
    expect(core.AUDIT_ACTIONS).toBeDefined();
    expect(core.KILL_SWITCH_STATES).toBeDefined();
    expect(core.OWNER_STATES).toBeDefined();
  });

  it('12개 Zod enum이 export된다', () => {
    expect(core.ChainTypeEnum).toBeDefined();
    expect(core.NetworkTypeEnum).toBeDefined();
    expect(core.AgentStatusEnum).toBeDefined();
    expect(core.TransactionStatusEnum).toBeDefined();
    expect(core.TransactionTypeEnum).toBeDefined();
    expect(core.PolicyTypeEnum).toBeDefined();
    expect(core.PolicyTierEnum).toBeDefined();
    expect(core.SessionStatusEnum).toBeDefined();
    expect(core.NotificationEventTypeEnum).toBeDefined();
    expect(core.AuditActionEnum).toBeDefined();
    expect(core.KillSwitchStateEnum).toBeDefined();
    expect(core.OwnerStateEnum).toBeDefined();
  });

  it('Zod SSoT 스키마가 export된다', () => {
    expect(core.AgentSchema).toBeDefined();
    expect(core.CreateAgentRequestSchema).toBeDefined();
    expect(core.SessionSchema).toBeDefined();
    expect(core.TransactionSchema).toBeDefined();
    expect(core.SendTransactionRequestSchema).toBeDefined();
    expect(core.PolicySchema).toBeDefined();
    expect(core.ConfigSchema).toBeDefined();
  });

  it('에러 코드와 WAIaaSError가 export된다', () => {
    expect(core.ERROR_CODES).toBeDefined();
    expect(core.WAIaaSError).toBeDefined();
    expect(Object.keys(core.ERROR_CODES)).toHaveLength(66);
  });

  it('getMessages 함수가 export된다', () => {
    expect(core.getMessages).toBeDefined();
    expect(typeof core.getMessages).toBe('function');
  });
});
```
  </action>
  <verify>
`pnpm --filter @waiaas/core test` -- 모든 테스트 통과 (interfaces 2개 + i18n 5개 + package-exports 5개 = 12개+ 신규 테스트).
`pnpm build` -- 전 패키지 빌드 성공.
`pnpm test` -- 루트에서 전 패키지 테스트 통과.
`pnpm lint` -- 린트 에러 0.
  </verify>
  <done>4개 인터페이스, i18n 메시지 시스템(en/ko), 전체 패키지 export 검증 테스트가 완료되어 @waiaas/core가 Phase 49-51의 공유 의존성으로서 완전하다. pnpm install && pnpm build && pnpm test && pnpm lint가 루트에서 한 번에 성공한다.</done>
</task>

</tasks>

<verification>
1. `pnpm install && pnpm build && pnpm test && pnpm lint` 루트에서 한 번에 성공
2. `@waiaas/core`에서 12개 Enum, Zod 스키마, 66개 에러 코드, 4개 인터페이스, getMessages가 모두 export됨
3. `getMessages('ko')` 호출 시 한글 메시지, `getMessages('en')` 호출 시 영문 메시지 반환
4. IChainAdapter에 10개 메서드 시그니처가 정의됨
5. en/ko 메시지 키가 동일하고, 에러 코드 66개와 1:1 대응
6. 전체 단위 테스트 35개+ 통과 (Plan 02의 23개 + Plan 03의 12개)
</verification>

<success_criteria>
- CORE-04: IChainAdapter(10메서드), ILocalKeyStore, IPolicyEngine, INotificationChannel 인터페이스 정의됨
- CORE-05: i18n 메시지 템플릿(en/ko) + getMessages(locale) 함수 동작
- Phase 48 성공 기준 #1: `pnpm install && pnpm build && pnpm test && pnpm lint` 루트에서 성공
- Phase 48 성공 기준 #2: 12개 Enum, Zod 스키마, 66개 에러 코드, 4개 인터페이스의 IDE 타입 추론
- Phase 48 성공 기준 #3: WAIaaSError throw/catch로 code + httpStatus 조회
- Phase 48 성공 기준 #4: getMessages('ko') 한글, getMessages('en') 영문
- Phase 48 성공 기준 #5: Enum-Zod 일치 단위 테스트 통과
</success_criteria>

<output>
After completion, create `.planning/phases/48-monorepo-scaffold-core/48-03-SUMMARY.md`
</output>
