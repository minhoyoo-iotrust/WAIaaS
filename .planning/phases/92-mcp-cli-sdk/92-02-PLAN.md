---
phase: 92-mcp-cli-sdk
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/sdk/src/types.ts
  - packages/sdk/src/client.ts
  - packages/sdk/src/__tests__/client.test.ts
  - packages/sdk/src/__tests__/error.test.ts
  - python-sdk/waiaas/models.py
  - python-sdk/waiaas/client.py
  - python-sdk/waiaas/__init__.py
  - python-sdk/tests/test_models.py
  - python-sdk/tests/test_client.py
autonomous: true

must_haves:
  truths:
    - "TS SDK response types use walletId field (not agentId)"
    - "Python SDK models use wallet_id field with walletId alias (not agent_id/agentId)"
    - "TS SDK tests reference walletId in all mock responses"
    - "Python SDK tests reference walletId in all mock JSON and wallet_id in assertions"
    - "All SDK tests pass"
  artifacts:
    - path: "packages/sdk/src/types.ts"
      provides: "TS SDK response types with walletId"
      contains: "walletId"
    - path: "python-sdk/waiaas/models.py"
      provides: "Python SDK models with wallet_id field"
      contains: "wallet_id"
  key_links:
    - from: "packages/sdk/src/types.ts"
      to: "packages/sdk/src/client.ts"
      via: "BalanceResponse/AddressResponse/AssetsResponse/TransactionResponse types"
      pattern: "walletId"
    - from: "python-sdk/waiaas/models.py"
      to: "python-sdk/waiaas/client.py"
      via: "WalletAddress/WalletBalance/WalletAssets/TransactionDetail model imports"
      pattern: "wallet_id"
---

<objective>
TS SDK와 Python SDK의 응답 필드를 agentId에서 walletId로 변경한다.

Purpose: SDK 소비자(AI 에이전트 프레임워크)가 데몬 응답의 walletId 필드를 올바르게 파싱할 수 있도록 SDK 타입/모델과 테스트를 갱신한다.
Output: TS SDK 4개 파일 + Python SDK 5개 파일 갱신, 모든 테스트 통과
</objective>

<execution_context>
@/Users/minho.yoo/.claude/get-shit-done/workflows/execute-plan.md
@/Users/minho.yoo/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: TS SDK + Python SDK source field rename</name>
  <files>
    packages/sdk/src/types.ts
    packages/sdk/src/client.ts
    python-sdk/waiaas/models.py
    python-sdk/waiaas/client.py
    python-sdk/waiaas/__init__.py
  </files>
  <action>
    **TS SDK types.ts:**
    - `BalanceResponse.agentId` -> `walletId`
    - `AddressResponse.agentId` -> `walletId`
    - `AssetsResponse.agentId` -> `walletId`
    - `TransactionResponse.agentId` -> `walletId`
    - Keep all other fields exactly as-is

    **TS SDK client.ts:**
    - Comment "Core agent client" -> "Core wallet client" (line 2)
    - No structural changes needed -- client.ts references types by name, fields are in types.ts

    **Python SDK models.py:**
    - `WalletAddress`: `agent_id: str = Field(alias="agentId")` -> `wallet_id: str = Field(alias="walletId")`
    - `WalletBalance`: `agent_id: str = Field(alias="agentId")` -> `wallet_id: str = Field(alias="walletId")`
    - `WalletAssets`: `agent_id: str = Field(alias="agentId")` -> `wallet_id: str = Field(alias="walletId")`
    - `TransactionDetail`: `agent_id: str = Field(alias="agentId")` -> `wallet_id: str = Field(alias="walletId")`

    **Python SDK client.py:**
    - Docstring line 1: "AI agent wallet operations" -> "AI wallet operations"
    - Method docstrings: "agent wallet address" -> "wallet address", "agent wallet balance" -> "wallet balance", "agent wallet" -> "wallet" (lines 116, 121, 126)

    **Python SDK __init__.py:**
    - Docstring: "AI Agent Wallet-as-a-Service client" -- keep as-is (describes the service, not the entity). This is the service name.
  </action>
  <verify>
    `grep -n 'agent_id\|agentId' python-sdk/waiaas/models.py python-sdk/waiaas/client.py` returns 0 results.
    `grep -n 'agentId' packages/sdk/src/types.ts` returns 0 results.
    `npx tsc --noEmit -p packages/sdk/tsconfig.json` passes.
  </verify>
  <done>
    TS SDK types use walletId. Python SDK models use wallet_id with walletId alias. No agentId field remains in SDK source files.
  </done>
</task>

<task type="auto">
  <name>Task 2: TS SDK + Python SDK test files wallet terminology update + test pass</name>
  <files>
    packages/sdk/src/__tests__/client.test.ts
    packages/sdk/src/__tests__/error.test.ts
    python-sdk/tests/test_models.py
    python-sdk/tests/test_client.py
  </files>
  <action>
    **TS SDK client.test.ts:**
    - All mock response objects: `agentId: 'agent-1'` -> `walletId: 'wallet-1'` (or whatever the fixture value is)
    - `agentId: 'a'` -> `walletId: 'a'` (short fixtures)
    - JWT payload in test token: `{ sessionId, agentId: 'agent-1' }` -> `{ sessionId, walletId: 'wallet-1' }` (line ~10)
    - Keep `User-Agent` header references as-is (HTTP standard header, not entity naming)

    **TS SDK error.test.ts:**
    - `code: 'AGENT_NOT_FOUND'` -> `code: 'WALLET_NOT_FOUND'`
    - `message: 'Agent not found'` -> `message: 'Wallet not found'`
    - `details: { agentId: 'abc' }` -> `details: { walletId: 'abc' }`
    - `hint: 'Check the agent ID'` -> `hint: 'Check the wallet ID'`
    - Assertion updates to match

    **Python SDK test_models.py:**
    - All `"agentId": AGENT_ID` -> `"walletId": WALLET_ID` in JSON fixtures
    - All `assert model.agent_id == AGENT_ID` -> `assert model.wallet_id == WALLET_ID`
    - Constant `AGENT_ID` -> `WALLET_ID` (rename the test fixture constant)

    **Python SDK test_client.py:**
    - All `"agentId": AGENT_ID` -> `"walletId": WALLET_ID` in mock response JSON
    - All `assert result.agent_id == AGENT_ID` -> `assert result.wallet_id == WALLET_ID`
    - Constant `AGENT_ID` -> `WALLET_ID` if defined at module level
    - Keep any other test structure unchanged

    Run `pnpm test --filter @waiaas/sdk` for TS SDK tests.
    Run `cd python-sdk && python -m pytest tests/ -v` for Python SDK tests.
  </action>
  <verify>
    `pnpm test --filter @waiaas/sdk` passes.
    `cd python-sdk && python -m pytest tests/ -v` passes.
    `grep -r 'agentId\|agent_id' packages/sdk/src/ python-sdk/ --include='*.ts' --include='*.py' | grep -v node_modules | grep -v User-Agent | grep -v __pycache__` returns 0 results.
  </verify>
  <done>
    All TS SDK and Python SDK tests pass with walletId/wallet_id terminology. Zero occurrences of agentId/agent_id remain in SDK packages (excluding User-Agent HTTP header references).
  </done>
</task>

</tasks>

<verification>
1. `grep -r 'agentId' packages/sdk/src/ --include='*.ts' | grep -v node_modules | grep -v User-Agent` returns 0 results
2. `grep -r 'agent_id\|agentId' python-sdk/ --include='*.py' | grep -v __pycache__` returns 0 results
3. `pnpm test --filter @waiaas/sdk` passes
4. `cd python-sdk && python -m pytest tests/ -v` passes
5. `npx tsc --noEmit -p packages/sdk/tsconfig.json` passes
</verification>

<success_criteria>
- TS SDK BalanceResponse, AddressResponse, AssetsResponse, TransactionResponse have walletId field
- Python SDK WalletAddress, WalletBalance, WalletAssets, TransactionDetail have wallet_id with walletId alias
- All TS SDK tests pass (client, error, retry, validation, owner-client)
- All Python SDK tests pass (test_models, test_client, test_retry)
- Zero agentId/agent_id occurrences remain in SDK packages
</success_criteria>

<output>
After completion, create `.planning/phases/92-mcp-cli-sdk/92-02-SUMMARY.md`
</output>
