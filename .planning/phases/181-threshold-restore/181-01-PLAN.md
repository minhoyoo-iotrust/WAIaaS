---
phase: 181-threshold-restore
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/adapters/solana/vitest.config.ts
  - packages/admin/vitest.config.ts
  - packages/cli/vitest.config.ts
autonomous: true
requirements: [GATE-01]

must_haves:
  truths:
    - "adapter-solana vitest.config.ts branches 임계값이 75이다"
    - "admin vitest.config.ts functions 임계값이 70이다"
    - "cli vitest.config.ts lines 임계값이 70이고 statements 임계값이 70이다"
    - "pnpm test 전체 실행 시 모든 패키지가 커버리지 임계값을 만족하며 0건의 실패가 발생한다"
  artifacts:
    - path: "packages/adapters/solana/vitest.config.ts"
      provides: "Restored branches threshold"
      contains: "branches: 75"
    - path: "packages/admin/vitest.config.ts"
      provides: "Restored functions threshold"
      contains: "functions: 70"
    - path: "packages/cli/vitest.config.ts"
      provides: "Restored lines and statements thresholds"
      contains: "lines: 70"
  key_links:
    - from: "vitest.config.ts thresholds"
      to: "coverage reports"
      via: "vitest coverage enforcement"
      pattern: "thresholds.*branches|functions|lines|statements"
---

<objective>
3개 패키지(adapter-solana, admin, cli)의 vitest.config.ts에서 임시 하향된 커버리지 임계값을 원래 수준으로 복원하고, 전체 테스트 스위트가 복원된 임계값으로 통과하는지 검증한다.

Purpose: Phase 178-180에서 추가한 테스트가 충분한 커버리지를 달성했으므로, 임시 하향했던 임계값을 원래 수준으로 되돌려 품질 게이트를 복원한다.
Output: 3개의 수정된 vitest.config.ts 파일 + 전체 테스트 통과 확인
</objective>

<execution_context>
@/Users/minho.yoo/.claude/get-shit-done/workflows/execute-plan.md
@/Users/minho.yoo/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@packages/adapters/solana/vitest.config.ts
@packages/admin/vitest.config.ts
@packages/cli/vitest.config.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: 3개 패키지 vitest.config.ts 임계값 복원</name>
  <files>
    packages/adapters/solana/vitest.config.ts
    packages/admin/vitest.config.ts
    packages/cli/vitest.config.ts
  </files>
  <action>
3개 패키지의 vitest.config.ts에서 임시 하향된 커버리지 임계값을 원래 수준으로 복원한다:

1. **packages/adapters/solana/vitest.config.ts**:
   - `branches: 65` → `branches: 75`
   - 나머지 임계값(functions: 80, lines: 80, statements: 80)은 변경 없음

2. **packages/admin/vitest.config.ts**:
   - `functions: 55` → `functions: 70`
   - 나머지 임계값(branches: 65, lines: 70, statements: 70)은 변경 없음

3. **packages/cli/vitest.config.ts**:
   - `lines: 65` → `lines: 70`
   - `statements: 65` → `statements: 70`
   - 나머지 임계값(branches: 65, functions: 70)은 변경 없음

각 파일에서 해당 숫자만 정확히 변경하고 다른 부분은 건드리지 않는다.
  </action>
  <verify>
각 파일의 thresholds 섹션을 확인하여 값이 정확히 변경되었는지 검증:
- `grep "branches: 75" packages/adapters/solana/vitest.config.ts`
- `grep "functions: 70" packages/admin/vitest.config.ts`
- `grep "lines: 70" packages/cli/vitest.config.ts` (cli)
- `grep "statements: 70" packages/cli/vitest.config.ts` (cli)
  </verify>
  <done>
adapter-solana branches=75, admin functions=70, cli lines=70 + statements=70으로 모두 복원됨
  </done>
</task>

<task type="auto">
  <name>Task 2: 전체 테스트 스위트 실행 및 커버리지 임계값 통과 검증</name>
  <files></files>
  <action>
전체 테스트 스위트를 실행하여 복원된 임계값으로 모든 패키지가 통과하는지 검증한다:

1. 먼저 3개 패키지를 개별적으로 테스트하여 커버리지 임계값 통과 확인:
   - `cd packages/adapters/solana && pnpm test --coverage`
   - `cd packages/admin && pnpm test --coverage`
   - `cd packages/cli && pnpm test --coverage`

2. 전체 테스트 스위트 실행:
   - `pnpm test` (루트에서 실행)

3. 실패하는 패키지가 있으면:
   - 커버리지 리포트를 확인하여 부족한 영역 파악
   - 임계값을 달성 가능한 수준으로 조정 (가능한 한 목표값에 가깝게)
   - 다시 테스트 실행

모든 패키지가 0건 실패로 통과해야 한다.
  </action>
  <verify>
`pnpm test` 전체 실행 결과에서:
- 모든 패키지 테스트 통과 (0 failures)
- adapter-solana 커버리지 branches >= 75%
- admin 커버리지 functions >= 70%
- cli 커버리지 lines >= 70%, statements >= 70%
  </verify>
  <done>
pnpm test 전체 실행 시 모든 패키지가 커버리지 임계값을 만족하며 0건의 실패가 발생한다
  </done>
</task>

</tasks>

<verification>
1. packages/adapters/solana/vitest.config.ts의 thresholds.branches가 75인지 확인
2. packages/admin/vitest.config.ts의 thresholds.functions가 70인지 확인
3. packages/cli/vitest.config.ts의 thresholds.lines가 70이고 statements가 70인지 확인
4. `pnpm test` 전체 실행 결과 0 failures 확인
</verification>

<success_criteria>
- 3개 패키지의 vitest.config.ts 임계값이 원래 수준으로 복원됨
- 전체 테스트 스위트가 복원된 임계값으로 통과함
- 커버리지 리그레션 없이 품질 게이트가 복원됨
</success_criteria>

<output>
After completion, create `.planning/phases/181-threshold-restore/181-01-SUMMARY.md`
</output>
