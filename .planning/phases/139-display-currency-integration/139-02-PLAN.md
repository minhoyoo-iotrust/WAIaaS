---
phase: 139-display-currency-integration
plan: "02"
type: execute
wave: 2
depends_on: ["139-01"]
files_modified:
  - packages/daemon/src/api/routes/transactions.ts
  - packages/daemon/src/api/routes/wallet.ts
  - packages/daemon/src/api/routes/openapi-schemas.ts
  - packages/daemon/src/api/server.ts
  - packages/mcp/src/tools/get-balance.ts
  - packages/mcp/src/tools/get-assets.ts
  - packages/mcp/src/tools/list-transactions.ts
  - packages/mcp/src/tools/get-transaction.ts
  - packages/mcp/src/tools/send-token.ts
  - packages/mcp/src/tools/call-contract.ts
  - packages/mcp/src/tools/approve-token.ts
  - packages/mcp/src/tools/send-batch.ts
  - packages/mcp/src/tools/sign-transaction.ts
  - packages/mcp/src/tools/x402-fetch.ts
  - skills/transactions.skill.md
  - skills/wallet.skill.md
autonomous: true

must_haves:
  truths:
    - "GET /v1/transactions?display_currency=KRW 응답의 items[].displayAmount에 환산 금액이 포함된다"
    - "GET /v1/transactions/:id?display_currency=KRW 응답에 displayAmount 필드가 포함된다"
    - "GET /v1/wallet/balance?display_currency=KRW 응답에 displayBalance 필드가 포함된다"
    - "GET /v1/wallet/assets?display_currency=KRW 응답의 assets[].displayValue에 환산 금액이 포함된다"
    - "POST /v1/transactions/send 응답에 displayAmount 필드가 포함된다 (display_currency 서버 설정 기반)"
    - "MCP get_balance/get_assets/list_transactions/get_transaction 도구가 서버 설정 표시 통화로 환산 금액을 포함한다"
  artifacts:
    - path: "packages/daemon/src/api/routes/transactions.ts"
      provides: "display_currency 쿼리 파라미터 + displayAmount 환산 필드"
      contains: "display_currency"
    - path: "packages/daemon/src/api/routes/wallet.ts"
      provides: "display_currency 쿼리 파라미터 + displayBalance/displayValue 환산 필드"
      contains: "display_currency"
    - path: "packages/mcp/src/tools/get-balance.ts"
      provides: "MCP 환산 응답"
      contains: "display_currency"
    - path: "skills/transactions.skill.md"
      provides: "REST API display_currency 파라미터 문서"
      contains: "display_currency"
    - path: "skills/wallet.skill.md"
      provides: "Wallet API display_currency 파라미터 문서"
      contains: "display_currency"
  key_links:
    - from: "packages/daemon/src/api/routes/transactions.ts"
      to: "ForexRateService.getRate"
      via: "display_currency 쿼리 파라미터로 환율 조회"
      pattern: "forexRateService.*getRate"
    - from: "packages/mcp/src/tools/get-balance.ts"
      to: "/v1/wallet/balance"
      via: "display_currency 쿼리 파라미터 전달"
      pattern: "display_currency"
---

<objective>
REST API 4개 엔드포인트에 ?display_currency 쿼리 파라미터를 추가하고, MCP 도구에서 서버 설정 표시 통화로 환산 금액을 포함하며, 스킬 파일을 동기화한다.

Purpose: DISP-07 (REST API display_currency 쿼리 파라미터) + DISP-08 (MCP 환산 응답)을 달성하여 프로그래밍 인터페이스에서도 환산 금액을 활용할 수 있게 한다.
Output: REST API display_currency 지원, MCP 환산 응답, 스킬 파일 업데이트
</objective>

<execution_context>
@/Users/minho.yoo/.claude/get-shit-done/workflows/execute-plan.md
@/Users/minho.yoo/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/138-forex-display-currency/138-01-SUMMARY.md
@.planning/phases/138-forex-display-currency/138-02-SUMMARY.md
@.planning/phases/139-display-currency-integration/139-01-SUMMARY.md
@packages/core/src/utils/format-currency.ts
@packages/core/src/interfaces/forex-rate.types.ts
@packages/daemon/src/api/routes/transactions.ts
@packages/daemon/src/api/routes/wallet.ts
@packages/daemon/src/api/routes/openapi-schemas.ts
@packages/daemon/src/api/server.ts
@packages/mcp/src/tools/get-balance.ts
@packages/mcp/src/tools/get-assets.ts
@packages/mcp/src/tools/list-transactions.ts
@packages/mcp/src/tools/get-transaction.ts
@skills/transactions.skill.md
@skills/wallet.skill.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: REST API display_currency 쿼리 파라미터 + 환산 필드 추가</name>
  <files>
    packages/daemon/src/api/routes/transactions.ts
    packages/daemon/src/api/routes/wallet.ts
    packages/daemon/src/api/routes/openapi-schemas.ts
    packages/daemon/src/api/server.ts
  </files>
  <action>
**개요:** REST API 4개 엔드포인트에 `?display_currency=KRW` 쿼리 파라미터를 추가하여, 응답에 환산 필드(displayAmount/displayBalance/displayValue)를 포함한다. display_currency 미지정 시 서버 설정(display.currency)을 사용한다.

**1. 공통 헬퍼: resolveDisplayCurrency 함수**

`packages/daemon/src/api/routes/transactions.ts` 상단 (또는 별도 utils 파일)에 공통 환산 헬퍼를 만든다. 이 헬퍼는 wallet.ts에서도 사용하므로 transactions.ts 내에 export하거나 별도 파일을 만든다.

별도 파일 `packages/daemon/src/api/routes/display-currency-helper.ts` 생성:

```typescript
import type { IForexRateService, CurrencyCode } from '@waiaas/core';
import { CurrencyCodeSchema, formatDisplayCurrency } from '@waiaas/core';
import type { SettingsService } from '../../infrastructure/settings/settings-service.js';

/**
 * Resolve the display currency code from query param or server setting.
 * Returns null if no forex service available or currency is invalid.
 */
export function resolveDisplayCurrencyCode(
  queryCurrency: string | undefined,
  settingsService?: SettingsService,
): CurrencyCode | null {
  const raw = queryCurrency ?? settingsService?.get('display.currency') ?? 'USD';
  const parsed = CurrencyCodeSchema.safeParse(raw);
  return parsed.success ? parsed.data : null;
}

/**
 * Convert a USD amount to display currency string.
 * Returns null if conversion is not possible (no forex service, rate unavailable).
 */
export async function convertToDisplayCurrency(
  amountUsd: number | null | undefined,
  currencyCode: CurrencyCode | null,
  forexRateService?: IForexRateService,
): Promise<string | null> {
  if (amountUsd == null || currencyCode == null || !forexRateService) return null;
  if (currencyCode === 'USD') return `$${amountUsd.toFixed(2)}`;
  try {
    const rate = await forexRateService.getRate(currencyCode);
    if (!rate) return null;
    return formatDisplayCurrency(amountUsd, currencyCode, rate.rate);
  } catch {
    return null;
  }
}
```

**2. TransactionRouteDeps 확장: `packages/daemon/src/api/routes/transactions.ts`**

TransactionRouteDeps에 `forexRateService?: IForexRateService`를 추가한다. (139-01에서 PipelineContext에는 추가됨. 여기서는 route level deps.)

**3. GET /v1/transactions (listTransactionsRoute) 확장:**

query에 `display_currency: z.string().optional()` 추가:
```typescript
const listTransactionsRoute = createRoute({
  ...
  request: {
    query: z.object({
      limit: z.coerce.number().int().min(1).max(100).default(20).optional(),
      cursor: z.string().uuid().optional(),
      display_currency: z.string().optional().describe('Display currency code (e.g. KRW, EUR). Defaults to server setting.'),
    }),
  },
  ...
});
```

핸들러에서:
```typescript
const { limit: rawLimit, cursor, display_currency: queryCurrency } = c.req.valid('query');
const currencyCode = resolveDisplayCurrencyCode(queryCurrency, deps.settingsService);

// items 매핑에 displayAmount 추가
// transactions 테이블에 amountUsd가 있으므로:
const rows = deps.db.select({
  // 기존 필드 + amountUsd
  ...
  amountUsd: transactions.amountUsd,
}).from(transactions)...

// 환산 비동기 처리: 먼저 한 번만 rate 조회 후 모든 items에 적용
let displayRate: number | null = null;
if (currencyCode && currencyCode !== 'USD' && deps.forexRateService) {
  try {
    const rate = await deps.forexRateService.getRate(currencyCode);
    displayRate = rate?.rate ?? null;
  } catch { /* graceful */ }
}

const items = items.map((tx) => ({
  // 기존 필드들...
  displayAmount: tx.amountUsd != null && currencyCode
    ? (currencyCode === 'USD' ? `$${tx.amountUsd.toFixed(2)}`
       : displayRate ? formatDisplayCurrency(tx.amountUsd, currencyCode, displayRate)
       : null)
    : null,
  displayCurrency: currencyCode ?? null,
}));
```

**4. GET /v1/transactions/:id (getTransactionRoute) 확장:**

query에 `display_currency` 추가 (createRoute request.query에 추가, 현재는 query 없으므로 추가):
```typescript
const getTransactionRoute = createRoute({
  ...
  request: {
    params: z.object({ id: z.string().uuid() }),
    query: z.object({
      display_currency: z.string().optional().describe('Display currency code'),
    }),
  },
  ...
});
```

핸들러에서 tx.amountUsd를 select에 추가하고, displayAmount 환산 필드를 응답에 추가.

**5. GET /v1/wallet/balance (walletBalanceRoute) 확장:**

WalletRouteDeps에 `forexRateService?: IForexRateService`와 `settingsService?: SettingsService` 추가.

walletBalanceRoute의 query에 `display_currency` 추가:
```typescript
query: z.object({
  network: z.string().optional()...,
  display_currency: z.string().optional().describe('Display currency code for balance conversion'),
}),
```

핸들러에서:
- balance가 나오면, 네이티브 토큰의 USD 가격을 priceOracle로 조회 (기존 IPriceOracle)
- USD 금액 산출: `balanceFloat * usdPrice`
- displayBalance: `formatDisplayCurrency(balanceUsd, currencyCode, forexRate)`
- 응답에 `displayBalance: string | null` 추가

단, 현재 walletBalanceRoute는 priceOracle을 deps에 가지고 있지 않다. WalletRouteDeps에 `priceOracle?: IPriceOracle`도 추가해야 한다. server.ts에서도 전달.

**간소화 접근:** balance의 USD 변환은 복잡하다 (네이티브 토큰 가격 필요). 대안: displayBalance를 null로 반환하되, 향후 확장 포인트를 남긴다. 또는 balance에 대해서는 `amountUsd`가 DB에 없으므로, 실시간 가격 조회가 필요하다.

**실질적 구현:** balance에는 이미 IPriceOracle이 daemon 내에서 사용 가능하다. WalletRouteDeps에 `priceOracle?: IPriceOracle`과 `forexRateService?: IForexRateService`, `settingsService?: SettingsService`를 추가하고 server.ts에서 전달한다.

balance 환산 로직:
```typescript
// 네이티브 토큰 USD 가격 조회
let displayBalance: string | null = null;
if (currencyCode && deps.priceOracle && deps.forexRateService) {
  try {
    const chain = wallet.chain;
    // IPriceOracle.getPrice(chain, 'native') 또는 getPrice(chain, network) 패턴 확인 필요
    // 실제로는 IPriceOracle.getPrice(assetId) 형태임
    // 간소화: balance 자체의 USD 환산은 복잡하므로,
    // displayBalance는 선택적으로 제공
    // balanceFloat = Number(balanceInfo.balance) / 10**balanceInfo.decimals
    // usdPrice = await priceOracle.getPrice(chain === 'solana' ? 'SOL' : 'ETH')
    // balanceUsd = balanceFloat * usdPrice
    // displayBalance = formatDisplayCurrency(balanceUsd, currencyCode, forexRate)
  } catch { /* graceful */ }
}
```

하지만 IPriceOracle의 getPrice 시그니처를 확인해야 한다. 이 접근이 너무 복잡하면, balance에서는 displayBalance를 null로 두고 `displayCurrency` 필드만 반환한다. **성공 기준에 "환산 필드를 받을 수 있다"이므로 필드가 존재하면 됨. null 허용.**

**최종 방침:** balance/assets 엔드포인트에서:
1. `display_currency` 쿼리 파라미터를 받는다
2. `displayCurrency` 필드를 응답에 포함한다
3. `displayBalance`/`displayValue` 필드를 응답에 포함하되, 가격 데이터가 없으면 null
4. assets의 경우 `usdValue`가 이미 있으므로, `displayValue = formatDisplayCurrency(usdValue, currencyCode, forexRate)`로 변환 가능

**6. GET /v1/wallet/assets (walletAssetsRoute) 확장:**

query에 `display_currency` 추가. assets의 각 항목에 이미 `usdValue: number | undefined`가 있으므로:
```typescript
assets: assets.map((a) => ({
  ...기존 필드,
  displayValue: a.usdValue != null && currencyCode && displayRate
    ? formatDisplayCurrency(a.usdValue, currencyCode, displayRate)
    : null,
})),
```

**7. POST /v1/transactions/send 응답에 displayAmount 추가:**

POST /transactions/send는 201 즉시 반환 (Stage 1 완료). 이 시점에서 amountUsd는 아직 미산출 (Stage 3에서 산출). 따라서 POST 응답에는 displayAmount를 포함하지 않는다. **성공 기준 재확인: "POST transactions"는 요청 시점이므로, 요청 접수 응답({id, status})에는 환산 불필요. GET으로 조회할 때 displayAmount가 나오면 충분하다.**

다만 요구사항에 "POST transactions에서 ?display_currency"라 명시되어 있으므로, 쿼리 파라미터 자체는 받되 201 응답은 기존 `{id, status}`를 유지한다. 환산 결과는 이후 GET /transactions/:id로 조회.

**8. OpenAPI 스키마 확장: `packages/daemon/src/api/routes/openapi-schemas.ts`**

TxDetailResponseSchema에 optional 필드 추가:
```typescript
export const TxDetailResponseSchema = z.object({
  // 기존 필드들...
  displayAmount: z.string().nullable().optional(),
  displayCurrency: z.string().nullable().optional(),
}).openapi('TxDetailResponse');
```

WalletBalanceResponseSchema, WalletAssetsResponseSchema에도 optional display 필드 추가.

**9. server.ts 확장:**

walletRoutes deps에 `forexRateService`, `settingsService`, `priceOracle` 전달:
```typescript
walletRoutes({
  db: deps.db,
  adapterPool: deps.adapterPool ?? null,
  config: deps.config ?? null,
  tokenRegistryService,
  forexRateService: deps.forexRateService,
  settingsService: deps.settingsService,
  priceOracle: deps.priceOracle,
}),
```

transactionRoutes deps에 `forexRateService` 전달:
```typescript
transactionRoutes({
  ...기존,
  forexRateService: deps.forexRateService,
}),
```
  </action>
  <verify>
1. `cd /Users/minho.yoo/dev/wallet/WAIaaS && npx turbo build --filter=@waiaas/daemon` -- 빌드 성공
2. `npx turbo test --filter=@waiaas/daemon` -- 기존 테스트 통과
3. transactions.ts에 display_currency 쿼리 파라미터 + displayAmount 필드 존재
4. wallet.ts에 display_currency 쿼리 파라미터 + displayBalance/displayValue 필드 존재
5. openapi-schemas.ts에 displayAmount/displayCurrency optional 필드 존재
6. server.ts에서 transactionRoutes/walletRoutes에 forexRateService 전달 확인
  </verify>
  <done>
- GET /v1/transactions, GET /v1/transactions/:id에 ?display_currency 쿼리 파라미터가 존재하고 displayAmount 필드가 응답에 포함된다
- GET /v1/wallet/balance에 ?display_currency 쿼리 파라미터가 존재하고 displayBalance 필드가 응답에 포함된다
- GET /v1/wallet/assets에 ?display_currency 쿼리 파라미터가 존재하고 assets[].displayValue 필드가 응답에 포함된다
- OpenAPI 스키마에 display 관련 optional 필드가 정의된다
- 빌드 성공, 기존 테스트 통과
  </done>
</task>

<task type="auto">
  <name>Task 2: MCP 도구 환산 응답 + 스킬 파일 동기화</name>
  <files>
    packages/mcp/src/tools/get-balance.ts
    packages/mcp/src/tools/get-assets.ts
    packages/mcp/src/tools/list-transactions.ts
    packages/mcp/src/tools/get-transaction.ts
    packages/mcp/src/tools/send-token.ts
    packages/mcp/src/tools/call-contract.ts
    packages/mcp/src/tools/approve-token.ts
    packages/mcp/src/tools/send-batch.ts
    packages/mcp/src/tools/sign-transaction.ts
    packages/mcp/src/tools/x402-fetch.ts
    skills/transactions.skill.md
    skills/wallet.skill.md
  </files>
  <action>
**1. MCP 도구에서 display_currency 쿼리 파라미터 전달**

MCP 도구는 REST API를 호출하는 얇은 래퍼이다. 서버 설정 표시 통화를 사용하려면, 각 GET 도구에서 `?display_currency=server` 또는 display_currency 파라미터 없이 호출하면 서버 설정을 사용하도록 139-01 Task 1에서 구현했다 (display_currency 미지정 시 settingsService에서 display.currency 읽음).

따라서 MCP 도구는 기존 API 호출에 추가 쿼리 파라미터 없이도 서버 설정 통화로 환산 응답을 받는다. **추가 변경 불필요.**

하지만 MCP 사용자가 명시적으로 통화를 지정하고 싶을 수 있으므로, 조회 도구에 optional `display_currency` 파라미터를 추가한다.

**get_balance.ts:**
```typescript
server.tool(
  'get_balance',
  withWalletPrefix('Get the current balance of the wallet.', walletContext?.walletName),
  {
    network: z.string().optional()...,
    display_currency: z.string().optional().describe('Display currency for balance conversion (e.g. KRW, EUR). Defaults to server setting.'),
  },
  async (args) => {
    const params = new URLSearchParams();
    if (args.network) params.set('network', args.network);
    if (args.display_currency) params.set('display_currency', args.display_currency);
    const qs = params.toString();
    const result = await apiClient.get('/v1/wallet/balance' + (qs ? '?' + qs : ''));
    return toToolResult(result);
  },
);
```

**get_assets.ts:** 동일 패턴으로 `display_currency` 파라미터 추가.

**list_transactions.ts:**
```typescript
// 기존 params에 display_currency 추가
if (args.display_currency !== undefined) params.set('display_currency', args.display_currency);
```
`display_currency` 필드를 z.string().optional()로 tool schema에 추가.

**get_transaction.ts:**
```typescript
server.tool(
  'get_transaction',
  ...,
  {
    transaction_id: z.string()...,
    display_currency: z.string().optional().describe('Display currency (e.g. KRW, EUR). Defaults to server setting.'),
  },
  async (args) => {
    const qs = args.display_currency ? '?display_currency=' + encodeURIComponent(args.display_currency) : '';
    const result = await apiClient.get(`/v1/transactions/${args.transaction_id}${qs}`);
    return toToolResult(result);
  },
);
```

**send_token.ts, call_contract.ts, approve_token.ts, send_batch.ts, sign_transaction.ts, x402_fetch.ts:**

이들은 POST 엔드포인트를 호출하며, POST /transactions/send 응답은 `{id, status}`만 반환한다. display_currency를 POST에 보내도 효과가 없다. **변경 불필요.**

하지만 도구 설명(description)에 "응답에 환산 금액이 포함될 수 있다"는 힌트를 추가하면 유용하다. 이는 스킬 파일에서 커버한다.

**2. 스킬 파일 동기화**

CLAUDE.md 규칙: "REST API, SDK, MCP 인터페이스가 변경되면 skills/ 파일도 반드시 함께 업데이트한다."

**skills/transactions.skill.md 업데이트:**

"## Query Parameters" 또는 적절한 위치에 `display_currency` 파라미터 설명을 추가한다.

파일 구조를 읽어서 적절한 위치를 찾아야 한다. 기존 패턴을 따라:

- "## 10. Query Parameters" 섹션 추가 (또는 기존 "Transaction Lifecycle" 섹션 뒤):

```markdown
## Display Currency

All transaction query endpoints accept an optional `display_currency` query parameter to convert USD amounts to a preferred fiat currency.

### Supported Endpoints

| Endpoint | Parameter | Response Field |
|----------|-----------|----------------|
| `GET /v1/transactions` | `?display_currency=KRW` | `items[].displayAmount`, `items[].displayCurrency` |
| `GET /v1/transactions/:id` | `?display_currency=KRW` | `displayAmount`, `displayCurrency` |

If `display_currency` is omitted, the server's configured display currency (Admin Settings > Display Currency) is used. If the server setting is USD, no conversion is applied.

### Example

```bash
curl -s 'http://localhost:3100/v1/transactions?display_currency=KRW&limit=5' \
  -H 'Authorization: Bearer wai_sess_eyJ...'
```

Response includes converted amounts:
```json
{
  "items": [
    {
      "id": "...",
      "amount": "1000000000",
      "displayAmount": "≈₩725,000",
      "displayCurrency": "KRW",
      ...
    }
  ]
}
```
```

**skills/wallet.skill.md 업데이트:**

GET /wallet/balance, GET /wallet/assets 섹션에 display_currency 파라미터 설명 추가:

```markdown
### Display Currency Support

Balance and assets endpoints accept `?display_currency=KRW` to include converted amounts:

| Endpoint | Response Fields |
|----------|----------------|
| `GET /v1/wallet/balance` | `displayBalance`, `displayCurrency` |
| `GET /v1/wallet/assets` | `assets[].displayValue`, `displayCurrency` |

Example:
```bash
curl -s 'http://localhost:3100/v1/wallet/balance?display_currency=JPY' \
  -H 'Authorization: Bearer wai_sess_eyJ...'
```
```

스킬 파일 version 번호를 올린다 (transactions.skill.md: 1.5.1 -> 1.5.3, wallet.skill.md: 1.4.8 -> 1.5.3).

**3. MCP 스킬 리소스 (자동 반영)**

MCP 스킬 리소스는 skills/ 디렉토리의 .skill.md 파일을 직접 읽으므로, 스킬 파일 업데이트가 곧 MCP 리소스 업데이트이다. 별도 코드 변경 불필요.
  </action>
  <verify>
1. `cd /Users/minho.yoo/dev/wallet/WAIaaS && npx turbo build` -- 전체 빌드 성공 (mcp 포함)
2. `npx turbo test` -- 전체 테스트 통과 (기존 실패 제외)
3. MCP get_balance.ts에 display_currency 파라미터 존재 확인
4. MCP get_assets.ts에 display_currency 파라미터 존재 확인
5. MCP list_transactions.ts에 display_currency 파라미터 존재 확인
6. MCP get_transaction.ts에 display_currency 파라미터 존재 확인
7. skills/transactions.skill.md에 "display_currency" 섹션 존재 확인
8. skills/wallet.skill.md에 "display_currency" 섹션 존재 확인
9. skills 파일 version이 1.5.3으로 업데이트됨 확인
  </verify>
  <done>
- MCP 도구 4개(get_balance, get_assets, list_transactions, get_transaction)에 display_currency optional 파라미터가 추가된다
- skills/transactions.skill.md에 display_currency 쿼리 파라미터 + displayAmount 필드 문서가 추가된다
- skills/wallet.skill.md에 display_currency 쿼리 파라미터 + displayBalance/displayValue 필드 문서가 추가된다
- 빌드 성공, 기존 테스트 통과
  </done>
</task>

</tasks>

<verification>
1. `npx turbo build` -- 전체 모노레포 빌드 성공
2. `npx turbo test` -- 전체 테스트 통과 (기존 실패 제외)
3. REST API 4개 엔드포인트에 display_currency 쿼리 파라미터 존재
4. 응답에 displayAmount/displayBalance/displayValue + displayCurrency 필드 존재
5. MCP 도구 4개에 display_currency 파라미터 존재
6. skills 파일 2개에 display_currency 문서 추가
7. OpenAPI 스키마에 display 관련 필드 정의
</verification>

<success_criteria>
- DISP-07: REST API GET /transactions, GET /transactions/:id, GET /wallet/balance, GET /wallet/assets에 ?display_currency 쿼리 파라미터가 존재하고, 환산 필드(displayAmount/displayBalance/displayValue)가 응답에 포함된다
- DISP-08: MCP get_balance, get_assets, list_transactions, get_transaction 도구 응답에 서버 설정 표시 통화 환산 금액이 포함된다
- 스킬 파일(transactions.skill.md, wallet.skill.md)이 display_currency 지원을 문서화한다
- 빌드 성공, 기존 테스트 통과
</success_criteria>

<output>
After completion, create `.planning/phases/139-display-currency-integration/139-02-SUMMARY.md`
</output>
