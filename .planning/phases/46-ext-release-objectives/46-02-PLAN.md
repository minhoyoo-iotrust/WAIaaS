---
phase: 46-ext-release-objectives
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - objectives/v1.7-quality-cicd.md
  - objectives/v2.0-release.md
autonomous: true

must_haves:
  truths:
    - "v1.7 objective 문서가 설계 문서 46-51/64를 참조하고, 보안 시나리오 237건 + CI/CD 4-stage + 5 플랫폼 크로스 빌드 범위를 정의하며, 커버리지 게이트(Soft 60%/Hard 80%) 기준이 포함된다"
    - "v2.0 objective 문서가 릴리스 체크리스트(CI 3일 연속 통과, 237건 보안 전수, npm/Docker/GitHub Release) + 설계 부채 0건 기준 + [HUMAN] 항목(README, CHANGELOG)이 포함된다"
    - "두 문서 모두 부록 구조(목표, 구현 대상 설계 문서, 산출물, 기술 결정 사항, E2E 검증 시나리오, 의존, 리스크)를 갖추고, 각 E2E 시나리오에 [L0]~[L3] 또는 [HUMAN] 태그가 부여된다"
    - "두 문서 모두 리스크 섹션에서 알려진 기술적 위험을 최소 2건 이상 식별한다"
  artifacts:
    - path: "objectives/v1.7-quality-cicd.md"
      provides: "v1.7 품질 강화 + CI/CD 마일스톤 objective"
      contains: "## 목표"
    - path: "objectives/v2.0-release.md"
      provides: "v2.0 전 기능 완성 릴리스 마일스톤 objective"
      contains: "## 목표"
  key_links:
    - from: "objectives/v1.7-quality-cicd.md"
      to: "objectives/v1.0-implementation-planning.md"
      via: "v1.7 섹션 확장"
      pattern: "v1\\.7.*품질.*CI"
    - from: "objectives/v2.0-release.md"
      to: "objectives/v1.0-implementation-planning.md"
      via: "v2.0 섹션 확장"
      pattern: "v2\\.0.*릴리스"
---

<objective>
v1.7(품질 강화 + CI/CD)과 v2.0(전 기능 완성 릴리스) 마일스톤의 objective 문서 2개를 생성한다.

Purpose: v1.7은 설계 단계에서 정의한 300+ 테스트 시나리오 구현과 CI/CD 파이프라인 범위를, v2.0은 릴리스 체크리스트와 배포 전략을 정의하여, 구현 마지막 단계의 해석 여지를 제거한다.
Output: objectives/v1.7-quality-cicd.md, objectives/v2.0-release.md
</objective>

<execution_context>
@/Users/minho.yoo/.claude/get-shit-done/workflows/execute-plan.md
@/Users/minho.yoo/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@objectives/v1.0-implementation-planning.md

설계 문서 참조 (v1.7 대상):
@docs/v0.4/46-keystore-external-security-scenarios.md
@docs/v0.4/47-boundary-value-chain-scenarios.md
@docs/v0.4/48-blockchain-test-environment-strategy.md
@docs/v0.4/49-enum-config-consistency-verification.md
@docs/v0.4/50-cicd-pipeline-coverage-gate.md
@docs/v0.4/51-platform-test-scope.md
@docs/64-extension-test-strategy.md

v0.10 설계 결정 참조:
@objectives/v0.10-pre-implementation-design-completion.md

기존 objective 문서 (패턴 참조):
@objectives/v1.4-token-contract-extension.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: v1.7 품질 강화 + CI/CD objective 문서 생성</name>
  <files>objectives/v1.7-quality-cicd.md</files>
  <action>
objectives/v1.0-implementation-planning.md의 "v1.7 — 품질 강화 + CI/CD" 섹션을 기반으로, 부록 템플릿 구조에 맞는 완전한 objective 문서를 생성한다. 한글로 작성한다. objectives/v1.4-token-contract-extension.md의 구조와 깊이를 참고하여 동일 수준으로 작성한다.

**1. 목표:** "설계 단계에서 정의한 300+ 테스트 시나리오를 구현하고, CI/CD 파이프라인으로 지속적 품질을 보장하는 상태"

**2. 구현 대상 설계 문서:** 아래 설계 문서를 읽고 각각의 구현 범위(전체/부분)를 테이블로 정리한다:
- 46 (keystore-external-security-scenarios) — 전체: 키스토어 보안 공격 시나리오 (메모리 덤프, 파일 권한, 암호화 키 유출 등)
- 47 (boundary-value-chain-scenarios) — 전체: 경계값 + 보안 시나리오 (합계 71건 공격 시나리오)
- 48 (blockchain-test-environment-strategy) — 전체: 3단계 블록체인 테스트 환경 (Unit Mock → Local Validator → Devnet)
- 49 (enum-config-consistency-verification) — 전체: 빌드타임 SSoT 검증 (as const → Zod → Drizzle → DB CHECK 일치)
- 50 (cicd-pipeline-coverage-gate) — 전체: GitHub Actions 4-stage 파이프라인 (push/PR/nightly/release), Soft/Hard 커버리지 게이트
- 51 (platform-test-scope) — 전체: 4 타겟 플랫폼별 테스트 시나리오 118건 (CLI 32 + Docker 18 + Tauri 34 + Telegram 34)
- 64 (extension-test-strategy) — 전체: 확장 기능 테스트 전략 166 시나리오, Mock 10개 경계, Contract Test 7 시나리오

각 문서에서 구현할 구체적 테스트 범위를 상세히 기술한다.

**3. 산출물:** v1.0-implementation-planning.md의 산출물 테이블을 확장한다:
- 단위 테스트: 모듈별 Vitest 테스트 스위트, 커버리지 게이트 (v1.1~v1.3: Soft 40% / v1.4~v1.6: Soft 60% / v1.7: Hard 80%)
- Contract Test: Mock 10개 경계(IChainAdapter, IPriceOracle, INotificationChannel 등), 7 Contract Test 시나리오(mock ↔ 실제 구현 동작 동일성 검증)
- 블록체인 테스트: 3단계 환경 — Level 1 Unit Mock(빠른 피드백), Level 2 Local Validator(solana-test-validator/Anvil 통합), Level 3 Devnet(외부 API nightly)
- 보안 테스트: 71건 공격 시나리오 구현 — 세션 탈취/위조(15건), TOCTOU 경합(8건), 키스토어 공격(12건), 정책 우회(10건), API 인증 우회(8건), 입력 주입(6건), 암호화 공격(12건)
- 플랫폼 테스트: CLI 32건 + Docker 18건 + Tauri 34건 + Telegram 34건 = 118건
- 확장 기능 테스트: 166 시나리오 — 토큰(32), 컨트랙트(28), Approve(24), 배치(22), Oracle(20), Action Provider(16), Swap(12), ChainError(12)
- Enum 검증: 빌드타임 SSoT 검증 스크립트 — as const 값과 DB CHECK 제약 조건 일치 검증, Zod 스키마 파싱 테스트
- CI/CD: GitHub Actions 4 YAML
  - `push.yml`: lint + type-check + unit test + coverage (every push)
  - `pr.yml`: full test suite + coverage gate + Solana validator (PR)
  - `nightly.yml`: Devnet 통합 + 보안 237건 전수 + Hardhat/Anvil (cron)
  - `release.yml`: 5 플랫폼 크로스 빌드 + Docker 이미지 + npm publish (tag)
- 크로스 빌드: macOS ARM64/x64, Windows x64, Linux x64/ARM64 — 5 타겟, prebuildify native addon

각 테스트 스위트의 디렉토리 구조와 주요 테스트 파일을 나열한다. CI/CD 각 YAML의 주요 step을 기술한다.

**4. 기술 결정 사항:**
- Vitest workspace 설정: 루트 vitest.workspace.ts vs 패키지별 vitest.config.ts
- 커버리지 리포터: c8 vs istanbul (vitest 내장)
- 보안 테스트 분류: 별도 디렉토리 vs 모듈별 __security__ 디렉토리
- CI 러너: ubuntu-latest vs self-hosted (Solana validator 성능)
- Docker 빌드 캐시: GitHub Actions cache vs Docker layer cache
- 크로스 플랫폼 빌드: GitHub Actions matrix vs 별도 워크플로우
- Solana validator CI 설정: setup-solana action vs 수동 설치 스크립트
- 커버리지 게이트 구현: vitest --coverage.thresholds vs CI script assert

**5. E2E 검증 시나리오:** v1.7은 [HUMAN] 0건이다 — 전체 자동화:
- git push → CI push.yml 트리거 → lint + type-check + unit test 통과 [L0]
- PR 생성 → CI pr.yml 트리거 → full test suite + coverage gate 통과 [L0]
- PR 커버리지 < Soft 60% → 경고 댓글 (통과) [L0]
- PR 커버리지 < Hard 80% (v1.7 이후) → 머지 차단 [L0]
- nightly → Solana validator + Anvil 통합 테스트 전수 통과 [L1]
- nightly → 보안 시나리오 237건 전수 통과 (71건 보안 + 166건 확장) [L0]
- release tag → 5 플랫폼 바이너리 빌드 성공 [L1]
- release tag → Docker 이미지 빌드 + push [L1]
- release tag → npm publish (dry-run) [L1]
- Enum SSoT 빌드타임 검증: as const ↔ DB CHECK 일치 [L0]
- Contract Test: IChainAdapter mock ↔ SolanaAdapter 동작 동일성 [L0]
- Contract Test: IPriceOracle mock ↔ CoinGeckoOracle 동작 동일성 [L0]
- 블록체인 Level 2: solana-test-validator SOL 전송 + SPL 전송 통합 [L1]
- 블록체인 Level 2: Anvil ETH 전송 + ERC-20 전송 통합 [L1]
- 블록체인 Level 3: Devnet 실 트랜잭션 (nightly only) [L1]
- 플랫폼 CLI: 32건 시나리오 전수 통과 [L0]
- 플랫폼 Docker: 18건 시나리오 전수 통과 [L1]

**6. 의존:** v1.6 (Desktop + Telegram Bot + Docker)

**7. 리스크:**
- Solana validator CI 환경 안정성 (validator 시작/종료 타이밍, 포트 충돌)
- native addon 크로스 빌드 호환성 (sodium-native, better-sqlite3 — 5 플랫폼 prebuildify)
- CI 실행 시간 (보안 237건 + 통합 테스트 → nightly 30분+ 예상)
- 커버리지 게이트 Hard 80% 달성 난이도 (UI 컴포넌트, 외부 API 의존 코드)
- GitHub Actions 무료 러너 제한 (macOS 빌드 시간 제약)
- Devnet 테스트 외부 의존성 (Solana Devnet/EVM testnet 불안정)

**작성 규칙:**
- 한글로 작성
- 설계 문서 번호와 이름을 정확히 기재
- 각 E2E 시나리오에 자동화 수준 태그 필수
- 보안 시나리오 총 237건 = 71건(46-47) + 166건(64) 명시
- 커버리지 게이트 단계별 기준(v1.1~v1.3: 40%, v1.4~v1.6: 60%, v1.7: 80%) 명시
- v1.1~v1.6에서 이미 작성된 테스트와 v1.7에서 추가하는 테스트 범위를 구분
  </action>
  <verify>
- objectives/v1.7-quality-cicd.md 파일이 존재한다
- 문서에 7개 섹션(목표, 구현 대상 설계 문서, 산출물, 기술 결정 사항, E2E 검증 시나리오, 의존, 리스크)이 모두 존재한다
- 구현 대상 설계 문서 테이블에 7개 문서(46, 47, 48, 49, 50, 51, 64)가 나열된다
- E2E 검증 시나리오에 [L0]/[L1] 태그가 부여되고, [HUMAN] 항목이 0건이다
- 커버리지 게이트(Soft 60%/Hard 80%) 기준이 포함된다
- 보안 시나리오 237건 전수 통과 시나리오가 포함된다
- 리스크 섹션에 최소 2건 이상 기술적 위험이 식별된다
  </verify>
  <done>objectives/v1.7-quality-cicd.md가 부록 구조를 완전히 갖추고, 7개 설계 문서의 구현 범위가 명시되며, 17개 이상 E2E 검증 시나리오에 자동화 수준 태그가 부여되고, 커버리지 게이트 기준 + 보안 237건 + CI/CD 4-stage 범위가 포함된 상태</done>
</task>

<task type="auto">
  <name>Task 2: v2.0 전 기능 완성 릴리스 objective 문서 생성</name>
  <files>objectives/v2.0-release.md</files>
  <action>
objectives/v1.0-implementation-planning.md의 "v2.0 — 전 기능 완성 릴리스" 섹션을 기반으로, 부록 템플릿 구조에 맞는 완전한 objective 문서를 생성한다. 한글로 작성한다.

**1. 목표:** "v0.1~v0.10에서 설계한 모든 기능이 구현·테스트·문서화되어 공개 릴리스 가능한 상태"

**2. 구현 대상 설계 문서:** v2.0은 새로운 설계 문서를 구현하는 것이 아니라, v1.1~v1.7에서 구현한 모든 설계 문서(30개)의 최종 검증과 릴리스 준비를 수행한다. 설계 문서 매핑 테이블로 30개 문서의 구현 완료 확인 범위를 정리한다:
- 24~29 (코어 아키텍처) — v1.1에서 구현, v2.0에서 최종 검증
- 30~32 (세션/트랜잭션) — v1.2에서 구현, v2.0에서 최종 검증
- 33~36 (보안) — v1.2/v1.4/v1.6에서 구현, v2.0에서 최종 검증
- 37~40 (클라이언트) — v1.3/v1.6에서 구현, v2.0에서 최종 검증
- 45 (Enum) — v1.1에서 구현, v2.0에서 최종 검증
- 46~51 (테스트) — v1.7에서 구현, v2.0에서 최종 검증
- 52~55 (인증/DX) — v1.2/v1.3에서 구현, v2.0에서 최종 검증
- 56~64 (블록체인 확장) — v1.4/v1.5/v1.7에서 구현, v2.0에서 최종 검증

**3. 산출물:** v1.0-implementation-planning.md의 산출물 테이블을 확장한다:
- 코드: 7 패키지 전체 구현 완료 확인 (core, daemon, adapter-solana, adapter-evm, sdk, mcp, cli) + Tauri Desktop + Telegram Bot
- 테스트: 커버리지 Hard 80% 게이트 통과, 보안 시나리오 237건 전수 통과, 플랫폼 테스트 118건 전수 통과
- 문서:
  - API 레퍼런스 (OpenAPI 3.0 자동 생성 + 수동 보완)
  - 배포 가이드 (CLI/Docker/Desktop 설치 방법)
  - 기여 가이드 (CONTRIBUTING.md — 개발 환경 설정, 코드 스타일, PR 프로세스)
  - README 최종판 (프로젝트 소개, 빠른 시작, 아키텍처 개요, 라이선스)
  - CHANGELOG.md (v1.1~v2.0 변경 이력)
- 배포:
  - npm 패키지: @waiaas/core, @waiaas/sdk, @waiaas/mcp (공개), @waiaas/daemon, @waiaas/cli, @waiaas/adapter-* (공개 또는 비공개)
  - Docker 이미지: Docker Hub push (waiaas/daemon:latest, waiaas/daemon:2.0.0)
  - Desktop 바이너리: 5 플랫폼 (macOS ARM64/x64, Windows x64, Linux x64/ARM64) — GitHub Release 첨부
- 릴리스:
  - GitHub Release (v2.0.0 태그, 릴리스 노트, 바이너리 첨부)
  - CHANGELOG.md (전체 변경 이력)
  - 마이그레이션 가이드 (해당 없음 — 첫 릴리스)

**4. 기술 결정 사항:**
- npm publish 범위: 공개 패키지 vs 비공개 패키지 결정 (core/sdk/mcp = 공개, daemon/cli/adapters = ?)
- Docker 이미지 태깅 전략: latest + semver (2.0.0) + SHA
- GitHub Release 자동화: release-please vs manual tag + CI
- README 언어: 영문 기본 + 한글 README.ko.md 여부
- 라이선스 선택: MIT vs Apache 2.0 vs AGPL
- 문서 호스팅: GitHub Pages vs 별도 사이트 vs README only
- CHANGELOG 포맷: Keep a Changelog vs Conventional Commits 자동 생성

**5. E2E 검증 시나리오 (릴리스 체크리스트):** v2.0은 [HUMAN] 2~3건이다:
- CI/CD nightly 3일 연속 통과 확인 [L0] (자동 판정)
- 보안 시나리오 237건 전수 통과 [L0] (Vitest 자동 실행)
- 커버리지 Hard 80% 게이트 통과 [L0] (CI 자동 판정)
- Enum SSoT 빌드타임 검증 통과 [L0]
- 플랫폼 테스트 118건 전수 통과 [L0]
- npm publish --dry-run 성공 (공개 패키지) [L1]
- Docker Hub push 성공 [L1]
- GitHub Release 생성 + 5 플랫폼 바이너리 첨부 [L1]
- 설계 부채 0건 확인 (또는 v2.1 이연 명시) [L0] (design-debt.md 확인)
- 설계 문서 30개 구현 매핑 전수 확인 [L0] (매핑 테이블 자동 검증)
- OpenAPI 3.0 스펙 유효성 검증 [L0]
- [HUMAN] README 영문 버전 내용 검토 + 품질 확인
- [HUMAN] CHANGELOG.md 최종 검토 + 누락 확인
- [HUMAN] 설계 부채 이연 판단 (0건이 아닌 경우 v2.1 이연 결정)

**6. 의존:** v1.7 (품질 강화 + CI/CD)

**7. 리스크:**
- 설계 부채 잔존 — v2.0 전 0건 달성 목표이나, 불가피한 경우 v2.1 이연 필요
- npm 패키지 네이밍 충돌 — @waiaas 스코프 사전 확보 필요
- Docker Hub 이미지 크기 — native addon 포함 시 500MB+ 가능성 (multi-stage 최적화)
- 5 플랫폼 바이너리 호환성 — Node.js SEA + native addon 조합으로 일부 플랫폼 빌드 실패 가능
- 문서 품질 — 자동 생성 OpenAPI 외 수동 문서(README, CHANGELOG, 가이드)는 [HUMAN] 검토 필수
- 릴리스 롤백 — 릴리스 후 크리티컬 이슈 발견 시 npm unpublish 24시간 제한

**작성 규칙:**
- 한글로 작성
- v2.0은 새 기능 구현이 아니라 "최종 검증 + 릴리스 준비" 마일스톤임을 명확히
- 릴리스 체크리스트를 E2E 검증 시나리오와 통합하여 각 항목에 자동화 수준 태그 부여
- [HUMAN] 항목은 2~3건으로 제한 (README, CHANGELOG, 설계 부채 이연)
- 설계 문서 30개 전수 매핑 확인 범위를 포함
- v1.1~v1.7에서 이미 구현/테스트된 부분과 v2.0에서 새로 수행하는 작업(문서, 배포, 릴리스)을 구분
  </action>
  <verify>
- objectives/v2.0-release.md 파일이 존재한다
- 문서에 7개 섹션(목표, 구현 대상 설계 문서, 산출물, 기술 결정 사항, E2E 검증 시나리오, 의존, 리스크)이 모두 존재한다
- 릴리스 체크리스트가 E2E 검증 시나리오에 포함된다
- [HUMAN] 항목이 2~3건이다 (README, CHANGELOG, 설계 부채 이연)
- 설계 부채 0건 기준이 명시된다
- npm/Docker/GitHub Release 배포 항목이 포함된다
- 리스크 섹션에 최소 2건 이상 기술적 위험이 식별된다
  </verify>
  <done>objectives/v2.0-release.md가 부록 구조를 완전히 갖추고, 릴리스 체크리스트(CI 3일 연속, 237건 보안, 설계 부채 0건)가 E2E 시나리오로 포함되며, 14개 이상 검증 항목에 자동화 수준 태그가 부여되고, [HUMAN] 2~3건(README, CHANGELOG, 부채 이연)이 명시된 상태</done>
</task>

</tasks>

<verification>
1. objectives/v1.7-quality-cicd.md 존재 + 7개 섹션 구조 확인
2. objectives/v2.0-release.md 존재 + 7개 섹션 구조 확인
3. v1.7 문서에 설계 문서 7개(46-51, 64) 참조 테이블 포함
4. v1.7 문서에 커버리지 게이트(Soft 60%/Hard 80%) 기준 포함
5. v1.7 문서에 보안 시나리오 237건 전수 시나리오 포함
6. v2.0 문서에 릴리스 체크리스트(CI 3일, 237건, npm/Docker/GitHub) 포함
7. v2.0 문서에 설계 부채 0건 기준 포함
8. 모든 E2E 시나리오에 [L0]~[L3] 또는 [HUMAN] 태그 부여
9. v1.7 [HUMAN] 0건, v2.0 [HUMAN] 2~3건
10. 두 문서 모두 리스크 섹션에 최소 2건 이상 기술적 위험 식별
</verification>

<success_criteria>
- objectives/v1.7-quality-cicd.md: 설계 문서 7개 참조, 테스트 영역 8개 산출물, E2E 17개+ 시나리오, [HUMAN] 0건, 커버리지 게이트 + 보안 237건 + CI/CD 4-stage 포함
- objectives/v2.0-release.md: 설계 문서 30개 최종 검증 범위, 릴리스 산출물 4개 영역, E2E 14개+ 시나리오(릴리스 체크리스트 통합), [HUMAN] 2~3건, 설계 부채 0건 기준 포함
- 두 문서 모두 부록 구조(7개 섹션) 완전 준수 + 리스크 각 2건 이상
</success_criteria>

<output>
After completion, create `.planning/phases/46-ext-release-objectives/46-02-SUMMARY.md`
</output>
