---
phase: 47-design-debt-verification
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - objectives/design-debt.md
  - objectives/v1.0-implementation-planning.md
autonomous: true

must_haves:
  truths:
    - "objectives/design-debt.md가 존재하며, 설계 부채 추적 테이블 구조(ID/발견 시점/내용/영향 문서/Tier/처리 예정)와 관리 규칙(Tier 1~3 허용 기준, 마일스톤 시작 시 리뷰, v2.0 전 0건 목표)이 정의된다"
    - "v1.0-implementation-planning.md의 매핑 테이블에서 37개 설계 문서 번호(24~40, 45~64, 대응표 41~44 제외)가 각각 하나 이상의 구현 마일스톤에 매핑되고, 매핑 누락 0건이다. 참고: 프로젝트에서 '30개 설계 문서'로 지칭하는 것은 코어 설계 문서만의 카운트이며, 매핑 테이블은 테스트 전략 문서(46~51, 64)까지 포함하여 총 37개 문서 번호를 추적한다. 매핑 테이블에 '46~47' 같은 결합 행이 존재할 수 있으며, 이는 2개 문서를 포함하는 것으로 간주한다."
    - "8개 objective 문서(v1.1~v2.0)에서 참조하는 설계 문서 번호 합집합이 37개 설계 문서 번호를 전수 포함하여, objective 문서와 매핑 테이블이 양방향 일치한다"
  artifacts:
    - path: "objectives/design-debt.md"
      provides: "설계 부채 추적 테이블 + 관리 규칙"
      contains: "| ID | 발견 시점 | 내용 | 영향 문서 | Tier | 처리 예정 |"
    - path: "objectives/v1.0-implementation-planning.md"
      provides: "설계 문서 -> 구현 마일스톤 매핑 테이블 (37개 문서 번호 전수)"
      contains: "설계 문서 → 구현 마일스톤 매핑"
  key_links:
    - from: "objectives/design-debt.md"
      to: "objectives/v1.0-implementation-planning.md"
      via: "설계 부채 관리 규칙 참조"
      pattern: "objectives/design-debt.md"
    - from: "objectives/v1.0-implementation-planning.md 매핑 테이블"
      to: "objectives/v1.1~v2.0 objective 문서 8개"
      via: "설계 문서 번호 양방향 일치"
      pattern: "구현 마일스톤"
---

<objective>
설계 부채 추적 파일을 초기화하고, 37개 설계 문서 번호(24~64번, 대응표 41~44 제외)가 구현 마일스톤(v1.1~v2.0)에 빠짐없이 매핑되었는지 전수 검증하여, v1.0 마일스톤의 마지막 phase를 완료한다.

Purpose: v1.1 구현 착수 전에 (1) 설계 부채를 추적할 체계가 갖춰지고, (2) 37개 설계 문서 번호가 구현 로드맵에 누락 없이 포함되었음을 확인하여, 구현 준비 완료 상태를 확정한다. 참고: 프로젝트에서 '30개 설계 문서'로 통칭하는 것은 코어 설계 문서(24~40, 45, 52~63)만의 카운트이며, 매핑 테이블은 테스트 전략 문서(46~51, 64)까지 포함하여 총 37개 문서 번호를 추적한다.
Output: objectives/design-debt.md (신규 생성), objectives/v1.0-implementation-planning.md (검증 결과 반영)
</objective>

<execution_context>
@/Users/minho.yoo/.claude/get-shit-done/workflows/execute-plan.md
@/Users/minho.yoo/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@objectives/v1.0-implementation-planning.md
@objectives/v1.1-core-infrastructure.md
@objectives/v1.2-auth-policy-engine.md
@objectives/v1.3-sdk-mcp-notifications.md
@objectives/v1.4-token-contract-extension.md
@objectives/v1.5-defi-price-oracle.md
@objectives/v1.6-desktop-telegram-docker.md
@objectives/v1.7-quality-cicd.md
@objectives/v2.0-release.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: 설계 부채 추적 파일 초기화 (design-debt.md)</name>
  <files>objectives/design-debt.md</files>
  <action>
objectives/design-debt.md를 신규 생성한다. 다음 내용을 포함해야 한다:

1. **제목 및 목적**: "설계 부채 추적" -- 구현 중 발견되지만 즉시 처리하지 않는 설계 미비점을 추적한다

2. **추적 테이블**: 빈 테이블로 초기화 (컬럼: ID, 발견 시점, 내용, 영향 문서, Tier, 처리 예정)
   ```
   | ID | 발견 시점 | 내용 | 영향 문서 | Tier | 처리 예정 |
   |----|----------|------|----------|------|----------|
   | (v1.1 구현 시작 시 항목 추가) | | | | | |
   ```

3. **Tier 정의 및 허용 기준**:
   - Tier 1: 인라인 수정 (영향 문서 1개, 30분 이내) -- 설계 문서 직접 수정 후 구현 계속, `> [vX.Y 구현 중 변경]` 주석 추가
   - Tier 2: 소수 페이즈 삽입 (영향 문서 2~5개, 1~3일) -- Phase X.1 형태 삽입, 설계 보완 후 재개
   - Tier 3: 설계 마일스톤 삽입 (영향 문서 5개+, 3일+) -- 구현 중단, vX.Yd 독립 마일스톤 삽입

4. **누적 허용 규칙**:
   - Tier 1~2: 다음 마일스톤 시작 전까지 누적 허용
   - Tier 3: 즉시 처리 (구현 중단)
   - 매 마일스톤 시작 시 설계 부채 리뷰 필수 -- 처리 또는 이연 결정
   - v2.0 릴리스 전 부채 0건 달성 목표 (또는 v2.1 이연 명시)

5. **운영 절차**:
   - 발견 시: 이 테이블에 행 추가, ID는 DD-{순번} 형식
   - 처리 시: 처리 마일스톤 기록, 행 유지 (삭제하지 않음, 처리 완료 표시)
   - 마일스톤 시작 시: 미처리 항목 리뷰, Tier 재평가

6. **참조**: objectives/v1.0-implementation-planning.md의 "설계 부채 관리" 섹션과 동일한 규칙을 기반으로 하되, 이 파일이 **운영 SSoT**이다.

파일 형식은 Markdown. 한글로 작성. v1.0-implementation-planning.md에 이미 정의된 Tier 구조(섹션 4 "설계 부채 관리")를 그대로 반영하되, 실제 운영에 필요한 절차(발견/처리/리뷰)를 추가한다.
  </action>
  <verify>
1. `cat objectives/design-debt.md` 실행하여 파일 존재 확인
2. 테이블 헤더 6개 컬럼 확인: ID, 발견 시점, 내용, 영향 문서, Tier, 처리 예정
3. Tier 1/2/3 정의가 각각 존재하는지 확인
4. "v2.0 릴리스 전 부채 0건" 문구 존재 확인
5. "매 마일스톤 시작 시" 리뷰 규칙 존재 확인
  </verify>
  <done>
objectives/design-debt.md가 존재하며, 추적 테이블 구조(6컬럼), Tier 1~3 정의, 누적 허용 규칙(Tier 3 즉시처리, v2.0 전 0건), 운영 절차(발견/처리/리뷰)가 모두 포함된다.
  </done>
</task>

<task type="auto">
  <name>Task 2: 설계 문서 37개 번호 전수 매핑 검증 + 양방향 일치 확인</name>
  <files>objectives/v1.0-implementation-planning.md</files>
  <action>
37개 설계 문서 번호(24~40, 45~64, 대응표 41~44 제외)가 구현 마일스톤에 빠짐없이 매핑되었는지 전수 검증한다. 두 가지 방향에서 교차 확인한다.

**문서 수 카운트 참고:**
프로젝트에서 "총 30개 설계 문서 + 5개 대응표 + 11개 테스트 전략 문서"로 분류하고 있으나, 매핑 테이블은 대응표(41~44)만 제외하고 나머지 전체를 매핑한다. 범위별 문서 번호:
- 24~40: 17개 (코어 아키텍처 + 세션/트랜잭션 + 보안 + 클라이언트)
- 45: 1개 (enum 통합 매핑)
- 46~51: 6개 (테스트 전략 — 보안 시나리오, 블록체인 테스트, Enum 검증, CI/CD, 플랫폼 테스트)
- 52~55: 4개 (인증 + DX)
- 56~64: 9개 (블록체인 확장)
- **합계: 37개 문서 번호**

**매핑 테이블 형식 주의:**
현재 매핑 테이블에 `| 46~47 | 보안 시나리오 | v1.7 |`과 같이 2개 문서 번호가 하나의 행으로 결합된 경우가 있다. 검증 시 결합 행은 포함하는 모든 문서 번호를 커버하는 것으로 간주한다. 결합 행을 개별 행으로 분리하지 않는다 (기존 문서 형식 유지).

**검증 1: v1.0-implementation-planning.md 매핑 테이블 완전성**

대상 문서 37개: 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64

매핑 테이블(v1.0-implementation-planning.md의 "설계 문서 → 구현 마일스톤 매핑" 섹션)에서:
- 각 문서 번호가 개별 행 또는 결합 행(`46~47` 형태)에 포함되어 있는지 확인
- 각 행에 구현 마일스톤이 하나 이상 할당되어 있는지 확인
- 누락된 문서가 있으면 해당 행을 추가

**검증 2: objective 문서 8개와의 양방향 일치**

8개 objective 문서(v1.1~v2.0)의 "구현 대상 설계 문서" 섹션에서 참조하는 문서 번호를 수집하여:
- 합집합이 37개 설계 문서 번호를 전수 포함하는지 확인
- 매핑 테이블에는 있지만 objective에서 참조하지 않는 문서가 있는지 확인
- objective에서 참조하지만 매핑 테이블에 없는 문서가 있는지 확인

**검증 결과 기록**:
- v1.0-implementation-planning.md 하단에 "## 매핑 검증 결과" 섹션을 추가 (이미 있으면 갱신)
- 검증 일자, 대상 문서 수(37개), 매핑 누락 수, 양방향 일치 여부를 기록
- 누락이 있었다면 수정 내역도 기록
- "총 30개 설계 문서" 용어와 "37개 문서 번호" 실제 카운트의 차이를 명시 (프로젝트 용어 "30개 설계 문서"는 코어 설계 문서만 카운트, 매핑 테이블은 테스트 전략 문서까지 포함하여 37개)

주의: 매핑 테이블 자체는 이미 v1.0-implementation-planning.md에 존재한다. 새로 만드는 것이 아니라 **기존 테이블을 검증**하는 것이다. 누락이 발견되면 기존 테이블에 행을 추가하여 보정한다.

참고로 현재 매핑 테이블에 이미 포함된 문서 목록 (결합 행 포함):
24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 45, 46~47(결합), 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64

참고로 objective 문서 합집합에서 확인된 참조 (사전 분석):
- v1.1: 24,25,26,27,28,29,31,32,45,54
- v1.2: 29,30,32,33,34,52,53 (+ 일부 참조)
- v1.3: 35,37,38,55 (+ 일부 참조)
- v1.4: 27,36,56,57,58,59,60 (+ 일부 참조)
- v1.5: 61,62,63 (+ 일부 참조)
- v1.6: 36,39,40 (+ 일부 참조)
- v1.7: 46,47,48,49,50,51,64 (+ 일부 참조)
- v2.0: 전체 참조

양방향 검증에서 각 objective의 "구현 대상 설계 문서" 테이블의 "전체/부분" 컬럼까지 확인하여, 부분 구현 문서가 후속 마일스톤에서 나머지를 커버하는지도 검증한다.
  </action>
  <verify>
1. v1.0-implementation-planning.md의 매핑 테이블에 37개 문서 번호가 모두 존재하는지 확인. 결합 행을 고려한 grep 패턴:
   ```bash
   # 개별 행 문서 (46, 47 제외한 나머지)
   for doc in 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 45 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64; do
     grep -qE "^\| $doc " objectives/v1.0-implementation-planning.md || echo "MISSING: $doc"
   done
   # 결합 행 문서 (46~47)
   grep -qE "^\| 46~47 |^\| 46 |^\| 47 " objectives/v1.0-implementation-planning.md || echo "MISSING: 46 and/or 47"
   ```
   (위 패턴은 예시. 실제로는 46~47 결합 행이 존재하면 46과 47 모두 커버되는 것으로 판정한다.)
2. "매핑 검증 결과" 섹션이 v1.0-implementation-planning.md에 존재하는지 확인
3. "매핑 누락 0건" 또는 수정 내역이 기록되어 있는지 확인
4. "양방향 일치" 결과가 기록되어 있는지 확인
5. 문서 수 카운트 설명("37개 문서 번호")이 검증 결과에 포함되어 있는지 확인
  </verify>
  <done>
(1) 매핑 테이블에 37개 설계 문서 번호가 전수 존재하고(결합 행 포함) 각각 하나 이상의 구현 마일스톤에 매핑됨, (2) 8개 objective 문서 참조 합집합이 37개 문서 번호를 전수 포함함, (3) 매핑 테이블과 objective 문서가 양방향 일치함, (4) 검증 결과가 v1.0-implementation-planning.md에 기록되며 "30개 설계 문서" 용어와 "37개 문서 번호" 실제 카운트의 관계가 명시됨
  </done>
</task>

</tasks>

<verification>
Phase 47 전체 검증:

1. objectives/design-debt.md 파일 존재 + 테이블 구조 + Tier 규칙 + 운영 절차 포함
2. v1.0-implementation-planning.md 매핑 테이블에 37개 문서 번호 전수 매핑 (누락 0건)
3. 8개 objective 문서 참조 합집합 = 37개 설계 문서 번호 (양방향 일치)
4. 검증 결과가 v1.0-implementation-planning.md에 기록됨

확인 명령:
```bash
# design-debt.md 존재 + 구조 확인
test -f objectives/design-debt.md && echo "EXISTS" || echo "MISSING"
grep -c "Tier" objectives/design-debt.md  # 3 이상

# 매핑 테이블 37개 문서 번호 확인 (결합 행 고려)
# 개별 행으로 존재하는 35개 문서 번호
for doc in 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 45 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64; do
  grep -qE "^\| $doc " objectives/v1.0-implementation-planning.md || echo "MISSING: $doc"
done
# 결합 행 "46~47" 확인 (doc 46과 47을 커버)
grep -q "46~47" objectives/v1.0-implementation-planning.md && echo "46~47 FOUND (covers docs 46 and 47)" || echo "MISSING: 46~47 combined row"

# 검증 결과 섹션 존재
grep -q "매핑 검증 결과" objectives/v1.0-implementation-planning.md && echo "FOUND" || echo "MISSING"
```
</verification>

<success_criteria>
1. objectives/design-debt.md가 존재하며, 추적 테이블(6컬럼) + Tier 1~3 정의 + 관리 규칙(v2.0 전 0건) + 운영 절차가 포함된다
2. v1.0-implementation-planning.md 매핑 테이블에서 37개 설계 문서 번호(24~40, 45~64, 대응표 41~44 제외) 전수 매핑 확인, 누락 0건. 결합 행(예: "46~47")은 포함하는 문서 번호 전체를 커버하는 것으로 간주한다.
3. 8개 objective 문서 참조 합집합이 37개 설계 문서 번호를 전수 포함하며, 매핑 테이블과 양방향 일치
4. 검증 결과가 v1.0-implementation-planning.md에 기록되며, "30개 설계 문서" 프로젝트 용어와 "37개 문서 번호" 실제 매핑 카운트의 관계가 명시됨
</success_criteria>

<output>
After completion, create `.planning/phases/47-design-debt-verification/47-01-SUMMARY.md`
</output>
