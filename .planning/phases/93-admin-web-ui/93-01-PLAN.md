---
phase: 93-admin-web-ui
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/admin/src/api/endpoints.ts
  - packages/admin/src/components/layout.tsx
  - packages/admin/src/pages/agents.tsx
  - packages/admin/src/pages/dashboard.tsx
  - packages/admin/src/pages/sessions.tsx
  - packages/admin/src/pages/policies.tsx
  - packages/admin/src/pages/notifications.tsx
  - packages/admin/src/pages/settings.tsx
  - packages/admin/src/utils/error-messages.ts
  - packages/admin/src/styles/global.css
  - packages/admin/src/__tests__/agents.test.tsx
  - packages/admin/src/__tests__/dashboard.test.tsx
  - packages/admin/src/__tests__/sessions.test.tsx
  - packages/admin/src/__tests__/policies.test.tsx
  - packages/admin/src/__tests__/notifications.test.tsx
autonomous: true

must_haves:
  truths:
    - "/admin Wallets tab renders and 'Agents' text appears 0 times in UI output"
    - "Dashboard StatCard displays 'Wallets' label and reads walletCount field"
    - "Sessions/Policies/Notifications pages have 0 agentId references in source"
    - "Admin tests (6 files) pass with walletId/walletCount fixtures"
  artifacts:
    - path: "packages/admin/src/pages/wallets.tsx"
      provides: "Wallets page (renamed from agents.tsx)"
      contains: "WalletsPage"
    - path: "packages/admin/src/__tests__/wallets.test.tsx"
      provides: "Wallets page tests (renamed from agents.test.tsx)"
      contains: "WalletsPage"
    - path: "packages/admin/src/api/endpoints.ts"
      provides: "API endpoint constants with /v1/wallets paths"
      contains: "WALLETS"
    - path: "packages/admin/src/components/layout.tsx"
      provides: "Layout with Wallets nav item and /wallets routes"
      contains: "/wallets"
  key_links:
    - from: "packages/admin/src/pages/wallets.tsx"
      to: "packages/admin/src/api/endpoints.ts"
      via: "API.WALLETS and API.WALLET(id)"
      pattern: "API\\.WALLET"
    - from: "packages/admin/src/components/layout.tsx"
      to: "packages/admin/src/pages/wallets.tsx"
      via: "import WalletsPage and /wallets route"
      pattern: "WalletsPage"
    - from: "packages/admin/src/pages/sessions.tsx"
      to: "packages/admin/src/api/endpoints.ts"
      via: "API.WALLETS for wallet dropdown"
      pattern: "API\\.WALLETS"
---

<objective>
Rename all agent terminology to wallet in the Admin Web UI package (15 files).

Purpose: The backend API (Phase 91) now serves `/v1/wallets` with `walletId` fields. The Admin UI must match to avoid runtime 404s and field mismatches. This is the final code-level phase before documentation cleanup.

Output: All Admin UI source files and tests use wallet terminology. File renames: agents.tsx -> wallets.tsx, agents.test.tsx -> wallets.test.tsx.
</objective>

<execution_context>
@/Users/minho.yoo/.claude/get-shit-done/workflows/execute-plan.md
@/Users/minho.yoo/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@packages/admin/src/pages/agents.tsx
@packages/admin/src/api/endpoints.ts
@packages/admin/src/components/layout.tsx
@packages/admin/src/pages/dashboard.tsx
@packages/admin/src/pages/sessions.tsx
@packages/admin/src/pages/policies.tsx
@packages/admin/src/pages/notifications.tsx
@packages/admin/src/pages/settings.tsx
@packages/admin/src/utils/error-messages.ts
@packages/admin/src/styles/global.css
@packages/admin/src/__tests__/agents.test.tsx
@packages/admin/src/__tests__/dashboard.test.tsx
@packages/admin/src/__tests__/sessions.test.tsx
@packages/admin/src/__tests__/policies.test.tsx
@packages/admin/src/__tests__/notifications.test.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rename agent -> wallet in Admin UI source files (11 files)</name>
  <files>
    packages/admin/src/api/endpoints.ts
    packages/admin/src/components/layout.tsx
    packages/admin/src/pages/agents.tsx (rename to wallets.tsx)
    packages/admin/src/pages/dashboard.tsx
    packages/admin/src/pages/sessions.tsx
    packages/admin/src/pages/policies.tsx
    packages/admin/src/pages/notifications.tsx
    packages/admin/src/pages/settings.tsx
    packages/admin/src/utils/error-messages.ts
    packages/admin/src/styles/global.css
  </files>
  <action>
    Rename all agent terminology to wallet across 11 Admin UI source files. File rename first, then content changes.

    **Step 1: Rename file**
    - `git mv packages/admin/src/pages/agents.tsx packages/admin/src/pages/wallets.tsx`

    **Step 2: endpoints.ts** (2 changes)
    - `AGENTS: '/v1/agents'` -> `WALLETS: '/v1/wallets'`
    - `AGENT: (id: string) => \`/v1/agents/${id}\`` -> `WALLET: (id: string) => \`/v1/wallets/${id}\``

    **Step 3: layout.tsx** (9 changes)
    - `import AgentsPage from '../pages/agents'` -> `import WalletsPage from '../pages/wallets'`
    - PAGE_TITLES: `'/agents': 'Agents'` -> `'/wallets': 'Wallets'`
    - `if (path.startsWith('/agents/')) return 'Agent Detail'` -> `if (path.startsWith('/wallets/')) return 'Wallet Detail'`
    - NAV_ITEMS: `{ path: '/agents', label: 'Agents' }` -> `{ path: '/wallets', label: 'Wallets' }`
    - PageRouter: `if (path.startsWith('/agents')) return <AgentsPage />` -> `if (path.startsWith('/wallets')) return <WalletsPage />`
    - isActive: `item.path === '/agents'` -> `item.path === '/wallets'`
    - isActive: `currentPath.value.startsWith('/agents')` -> `currentPath.value.startsWith('/wallets')`

    **Step 4: wallets.tsx (formerly agents.tsx)** -- comprehensive rename:
    - Interface `Agent` -> `Wallet` (2 interfaces: Wallet, WalletDetail)
    - Interface `AgentDetail` -> `WalletDetail`
    - `agentColumns` -> `walletColumns` (Column<Wallet>[])
    - Function `AgentDetailView` -> `WalletDetailView`
    - Signal `agent` -> `wallet` (useSignal<WalletDetail | null>)
    - `fetchAgent` -> `fetchWallet`, `API.AGENT(id)` -> `API.WALLET(id)`
    - `handleSaveName`: `API.AGENT(id)` -> `API.WALLET(id)`, toast `'Agent name updated'` -> `'Wallet name updated'`
    - `handleDelete`: `API.AGENT(id)` -> `API.WALLET(id)`, toast `'Agent terminated'` -> `'Wallet terminated'`, `window.location.hash = '#/agents'` -> `'#/wallets'`
    - JSX: `href="#/agents"` -> `href="#/wallets"`, `"Back to Agents"` -> `"Back to Wallets"`
    - CSS class: `class="agent-detail"` -> `class="wallet-detail"`
    - Button text: `"Terminate Agent"` -> `"Terminate Wallet"`
    - Modal title: `"Terminate Agent"` -> `"Terminate Wallet"`
    - Modal text: `terminate agent` -> `terminate wallet`
    - EmptyState: `"Agent not found"` -> `"Wallet not found"`, `"The agent may have been deleted."` -> `"The wallet may have been deleted."`
    - Function `AgentListView` -> `WalletListView`
    - Signal `agents` -> `wallets` (useSignal<Wallet[]>)
    - `fetchAgents` -> `fetchWallets`, `API.AGENTS` -> `API.WALLETS`
    - Toast: `'Agent created'` -> `'Wallet created'`
    - `navigateToDetail`: `window.location.hash = '#/agents/' + agent.id` -> `'#/wallets/' + wallet.id`, param name `agent` -> `wallet`
    - Table: `columns={agentColumns}` -> `columns={walletColumns}`, `emptyMessage="No agents yet"` -> `"No wallets yet"`
    - Button: `"Create Agent"` -> `"Create Wallet"`
    - Export: `AgentsPage` -> `WalletsPage`
    - Path parsing: `path.startsWith('/agents/')` -> `path.startsWith('/wallets/')`, `path.slice('/agents/'.length)` -> `path.slice('/wallets/'.length)`
    - Variable: `agentId` -> `walletId` (in the default export function)

    **Step 5: dashboard.tsx** (2 changes)
    - Interface AdminStatus: `agentCount: number` -> `walletCount: number`
    - StatCard: `label="Agents"` -> `label="Wallets"`, `value={data.value?.agentCount?.toString()` -> `value={data.value?.walletCount?.toString()`

    **Step 6: sessions.tsx** (15+ changes)
    - Interface `Agent` -> `Wallet`
    - Interface `Session`: `agentId: string` -> `walletId: string`
    - Interface `CreatedSession`: `agentId: string` -> `walletId: string`
    - Signal: `selectedAgentId` -> `selectedWalletId`
    - Signal: `agents` -> `wallets`
    - `fetchAgents` -> `fetchWallets`, `API.AGENTS` -> `API.WALLETS`
    - `fetchSessions`: `?agentId=${selectedAgentId.value}` -> `?walletId=${selectedWalletId.value}`, guard `selectedAgentId.value` -> `selectedWalletId.value`
    - `handleCreate`: `agentId: selectedAgentId.value` -> `walletId: selectedWalletId.value`
    - `agentsLoading` -> `walletsLoading`
    - useEffect deps: `selectedAgentId.value` -> `selectedWalletId.value`
    - CSS class: `session-agent-select` -> `session-wallet-select`
    - Label: `"Agent"` -> `"Wallet"` (for the select)
    - HTML id: `id="agent-select"` -> `id="wallet-select"`
    - `selectedAgentId.value` -> `selectedWalletId.value` (in JSX bindings)
    - Option text: `"Select an agent..."` -> `"Select a wallet..."`
    - `agents.value.map` -> `wallets.value.map`
    - `disabled={!selectedAgentId.value}` -> `disabled={!selectedWalletId.value}`
    - EmptyState: `"Select an agent"` -> `"Select a wallet"`, `"Choose an agent from the dropdown above to view its sessions."` -> `"Choose a wallet from the dropdown above to view its sessions."`
    - `emptyMessage="No sessions for this agent"` -> `"No sessions for this wallet"`

    **Step 7: policies.tsx** (15+ changes)
    - Interface `Agent` -> `Wallet`
    - Interface `Policy`: `agentId: string | null` -> `walletId: string | null`
    - Signal: `filterAgentId` -> `filterWalletId`
    - Signal: `formAgentId` -> `formWalletId`
    - Signal: `agents` -> `wallets`
    - `fetchAgents` -> `fetchWallets`, `API.AGENTS` -> `API.WALLETS`
    - `fetchPolicies`: `filterAgentId.value` -> `filterWalletId.value`, query param `?agentId=` -> `?walletId=`
    - `handleCreate`: `agentId: formAgentId.value || undefined` -> `walletId: formWalletId.value || undefined`, reset `formAgentId.value = ''` -> `formWalletId.value = ''`
    - `getAgentName` -> `getWalletName`, param `agentId` -> `walletId`, `agentList` -> `walletList`
    - `agentsLoading` -> `walletsLoading`
    - useEffect deps: `filterAgentId.value` -> `filterWalletId.value`
    - policyColumns: `key: 'agentId'` -> `key: 'walletId'`, `header: 'Agent'` -> `header: 'Wallet'`, `getAgentName(p.agentId, agents.value)` -> `getWalletName(p.walletId, wallets.value)`
    - Filter label: `"Filter by Agent"` -> `"Filter by Wallet"`
    - `id="policy-agent-filter"` -> `id="policy-wallet-filter"`
    - Form label: `"Agent"` name `"agentId"` -> `"Wallet"` name `"walletId"`
    - `formAgentId.value` -> `formWalletId.value` (in JSX bindings)
    - Option: `'Global (no agent)'` -> `'Global (no wallet)'`
    - `p.agentId` -> `p.walletId` (in filter callback `result.filter`)

    **Step 8: notifications.tsx** (3 changes)
    - Interface NotificationLogEntry: `agentId: string | null` -> `walletId: string | null`
    - logColumns: `key: 'agentId'` -> `key: 'walletId'`, `header: 'Agent ID'` -> `header: 'Wallet ID'`
    - render: `entry.agentId` -> `entry.walletId`

    **Step 9: settings.tsx** (2 changes)
    - `"suspends all agent operations"` -> `"suspends all wallet operations"`
    - `"Agents will need new sessions"` -> `"Wallets will need new sessions"` (in JWT rotation modal text, currently says "tokens will remain valid for 5 more minutes, then expire. Agents will" -> change "Agents" to "Wallets")

    **Step 10: error-messages.ts** (6 changes)
    - Comment: `// AGENT domain (3)` -> `// WALLET domain (3)`
    - `AGENT_NOT_FOUND: 'Agent not found.'` -> `WALLET_NOT_FOUND: 'Wallet not found.'`
    - `AGENT_SUSPENDED: 'This agent is currently suspended.'` -> `WALLET_SUSPENDED: 'This wallet is currently suspended.'`
    - `AGENT_TERMINATED: 'This agent has been terminated.'` -> `WALLET_TERMINATED: 'This wallet has been terminated.'`
    - OWNER domain: `'connected to this agent.'` -> `'connected to this wallet.'` (2 entries: OWNER_ALREADY_CONNECTED, OWNER_NOT_CONNECTED)

    **Step 11: global.css** (6 selector changes)
    - `.agent-detail` -> `.wallet-detail`
    - `.session-agent-select` -> `.session-wallet-select` (3 selectors: base, label, select)
    - `.session-agent-select select:focus` -> `.session-wallet-select select:focus`
    - Comment: `/* Agent Detail */` -> `/* Wallet Detail */`
  </action>
  <verify>
    Run `grep -r 'agent' packages/admin/src/ --include='*.tsx' --include='*.ts' --include='*.css' -i -l` and confirm the ONLY matches are in files that legitimately reference "AI agent" concept (settings.tsx JWT rotation text is borderline -- the word "Agents" in the modal body should now say "Wallets"). The old file agents.tsx should NOT exist.
    Run `ls packages/admin/src/pages/wallets.tsx` to confirm rename.
    Run `tsc --noEmit -p packages/admin/tsconfig.json` or equivalent to verify no compile errors.
  </verify>
  <done>
    All 11 Admin UI source files use wallet terminology. File agents.tsx renamed to wallets.tsx. Zero occurrences of "Agent" in UI-facing text (button labels, headings, table headers, form labels, toast messages, error messages, CSS class names) except where contextually appropriate (e.g., "AI agent" in documentation).
  </done>
</task>

<task type="auto">
  <name>Task 2: Rename agent -> wallet in Admin test files (5 files) and verify all tests pass</name>
  <files>
    packages/admin/src/__tests__/agents.test.tsx (rename to wallets.test.tsx)
    packages/admin/src/__tests__/dashboard.test.tsx
    packages/admin/src/__tests__/sessions.test.tsx
    packages/admin/src/__tests__/policies.test.tsx
    packages/admin/src/__tests__/notifications.test.tsx
  </files>
  <action>
    Rename all agent terminology to wallet in 5 Admin test files. File rename first, then content changes.

    **Step 1: Rename file**
    - `git mv packages/admin/src/__tests__/agents.test.tsx packages/admin/src/__tests__/wallets.test.tsx`

    **Step 2: wallets.test.tsx (formerly agents.test.tsx)** -- comprehensive rename:
    - Mock: `currentPath: signal('/agents')` -> `signal('/wallets')`
    - Import: `AgentsPage from '../pages/agents'` -> `WalletsPage from '../pages/wallets'`
    - Import: `{ chainNetworkOptions } from '../pages/agents'` -> `from '../pages/wallets'`
    - `mockAgents` -> `mockWallets`, fixture IDs: `'agent-1'` -> `'wallet-1'`, `'agent-2'` -> `'wallet-2'`
    - `mockAgentDetail` -> `mockWalletDetail`
    - Describe: `'AgentsPage'` -> `'WalletsPage'`
    - beforeEach: `currentPath.value = '/agents'` -> `'/wallets'`
    - All `render(<AgentsPage />)` -> `render(<WalletsPage />)`
    - Test "create form": `apiPost` assertion URL `/v1/agents` -> `/v1/wallets`, mock response id `'agent-3'` -> `'wallet-3'`
    - Button text assertion: `'Create Agent'` -> `'Create Wallet'`
    - Test "agent detail view": `currentPath.value = '/agents/agent-1'` -> `'/wallets/wallet-1'`
    - Test "edit agent name": `currentPath.value = '/agents/agent-1'` -> `'/wallets/wallet-1'`, `apiPut` assertion URL `/v1/agents/agent-1` -> `/v1/wallets/wallet-1`
    - Test "delete agent": `currentPath.value = '/agents/agent-1'` -> `'/wallets/wallet-1'`, button text `'Terminate Agent'` -> `'Terminate Wallet'`, `apiDelete` URL `/v1/agents/agent-1` -> `/v1/wallets/wallet-1`
    - Modal text assertion: `terminate agent` -> `terminate wallet`

    **Step 3: dashboard.test.tsx** (2 changes)
    - `mockStatus`: `agentCount: 3` -> `walletCount: 3`
    - The label "Agents" is asserted via StatCard text "3" -- no label assertion exists, but verify the `walletCount` field name is correct so dashboard.tsx reads it.

    **Step 4: sessions.test.tsx** (8+ changes)
    - `mockAgents` -> `mockWallets`, fixture IDs: `'agent-1'` -> `'wallet-1'`
    - `mockSessions[0].agentId` -> `walletId: 'wallet-1'`
    - `mockCreatedSession.agentId` -> `walletId: 'wallet-1'`
    - Label assertion: `screen.getByLabelText('Agent')` -> `screen.getByLabelText('Wallet')`
    - Select value: `{ target: { value: 'agent-1' } }` -> `{ target: { value: 'wallet-1' } }`
    - `apiPost` assertion: `{ agentId: 'agent-1' }` -> `{ walletId: 'wallet-1' }`

    **Step 5: policies.test.tsx** (5+ changes)
    - `mockAgents` -> `mockWallets`, fixture IDs: `'agent-1'` -> `'wallet-1'`
    - `mockPolicies[0].agentId` stays `null` (global policy, correct)
    - `mockPolicies[1].agentId` -> `walletId: 'wallet-1'`

    **Step 6: notifications.test.tsx** (5+ changes)
    - `mockLogs.logs[*].agentId` -> `walletId`: `'agent-001-abcd'` -> `'wallet-001-abcd'`, `'agent-002-efgh'` -> `'wallet-002-efgh'`
    - `mockLogsPage1` factory: `agentId: \`agent-${i}\`` -> `walletId: \`wallet-${i}\``
    - Pagination mock: `agentId: 'agent-20'` -> `walletId: 'wallet-20'`

    **Step 7: Run tests**
    - `cd packages/admin && pnpm test` (or `pnpm vitest run`)
    - All 6 test files should pass (wallets, dashboard, sessions, policies, notifications, + auth/settings/utils)
  </action>
  <verify>
    `cd packages/admin && pnpm test` -- all tests pass.
    `grep -r 'agentId\|agentCount\|Agent' packages/admin/src/__tests__/ --include='*.tsx' --include='*.ts'` returns 0 matches (no stale agent terminology in test files). Exception: string "agent" may appear in test descriptions if referencing the concept, but fixture data and assertions must all use wallet*.
  </verify>
  <done>
    All 5 Admin test files use wallet terminology. File agents.test.tsx renamed to wallets.test.tsx. Test fixtures use walletId/walletCount. All Admin package tests pass with 0 failures.
  </done>
</task>

</tasks>

<verification>
1. `ls packages/admin/src/pages/wallets.tsx` -- file exists (agents.tsx should NOT exist)
2. `ls packages/admin/src/__tests__/wallets.test.tsx` -- file exists (agents.test.tsx should NOT exist)
3. `grep -rn 'agentId\|agentCount\|AGENT_NOT_FOUND\|AGENT_SUSPENDED\|AGENT_TERMINATED\|AgentsPage\|AgentDetail\|fetchAgents\|selectedAgentId\|filterAgentId\|formAgentId\|getAgentName\|agentColumns\|agent-detail\|session-agent-select' packages/admin/src/ --include='*.tsx' --include='*.ts' --include='*.css'` returns 0 matches
4. `grep -c 'Agents' packages/admin/src/pages/wallets.tsx` returns 0
5. `cd packages/admin && pnpm test` -- all tests pass
6. `grep -rn 'walletId\|walletCount\|WALLET_NOT_FOUND\|WalletsPage\|WalletDetail\|fetchWallets\|selectedWalletId\|filterWalletId\|formWalletId\|getWalletName\|walletColumns\|wallet-detail\|session-wallet-select' packages/admin/src/ --include='*.tsx' --include='*.ts' --include='*.css'` returns matches in all expected files
</verification>

<success_criteria>
- Zero `Agent`/`agentId`/`agentCount` references in Admin UI source (verified by grep)
- All Admin tests pass with `walletId`/`walletCount` fixtures
- API endpoint constants point to `/v1/wallets` (matching backend)
- File renames: agents.tsx -> wallets.tsx, agents.test.tsx -> wallets.test.tsx
- CSS classes: .wallet-detail, .session-wallet-select (matching JSX)
- Error messages: WALLET_NOT_FOUND, WALLET_SUSPENDED, WALLET_TERMINATED
</success_criteria>

<output>
After completion, create `.planning/phases/93-admin-web-ui/93-01-SUMMARY.md`
</output>
