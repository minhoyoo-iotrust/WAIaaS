# Requirements Archive: v0.2 Self-Hosted Secure Wallet Design

**Archived:** 2026-02-05
**Status:** SHIPPED

This is the archived requirements specification for v0.2.

---

## v0.2 Requirements

### Core Keystore (암호화 키 저장)

- [x] **KEYS-01**: 에이전트 지갑 키를 AES-256-GCM + Argon2id로 암호화하여 로컬 파일에 저장
- [x] **KEYS-02**: 트랜잭션 서명 시 키를 sodium-native guarded memory에서만 복호화하고 서명 후 즉시 제로화
- [x] **KEYS-03**: 지갑 잔액 및 주소 조회 가능
- [x] **KEYS-04**: 암호화된 키스토어 백업 및 복원 기능

### Session Auth (세션 기반 인증 -- Layer 1)

- [x] **SESS-01**: Owner가 개인 지갑 서명(SIWS/SIWE)으로 세션 생성 승인
- [x] **SESS-02**: 세션 토큰에 만료 시간, 누적 지출 한도, 단건 한도, 허용 작업 목록 내장
- [x] **SESS-03**: 세션별 사용량(거래 수, 누적 금액) 실시간 추적
- [x] **SESS-04**: Owner가 활성 세션을 즉시 폐기 가능
- [x] **SESS-05**: 활성 세션 목록 조회 가능

### Time-Lock + Approval (시간 지연 + 승인 -- Layer 2)

- [x] **LOCK-01**: 거래를 금액 기준 4단계로 분류 (즉시/알림/대기/승인), 기준 금액 설정 가능
- [x] **LOCK-02**: 대기(Delay) 등급: 거래 큐잉 -> 쿨다운 대기 -> 미취소 시 자동 실행, Owner 취소 가능
- [x] **LOCK-03**: 승인(Approval) 등급: Owner 지갑 서명으로 명시적 승인 필요
- [x] **LOCK-04**: 미승인 거래는 타임아웃 후 자동 만료/취소

### Monitoring + Kill Switch (모니터링 + 긴급 정지 -- Layer 3)

- [x] **NOTI-01**: 멀티 채널 알림 발송 (Telegram Bot, Discord Webhook, ntfy.sh Push)
- [x] **NOTI-02**: 알림 채널 최소 2개 설정 필수, 전달 실패 시 폴백 채널로 재시도
- [x] **NOTI-03**: Kill Switch 발동 시 모든 세션 취소 + 모든 대기 거래 취소 + 에이전트 정지
- [x] **NOTI-04**: 자동 정지 규칙 엔진 (연속 실패, 비정상 시간, 한도 임계 등 설정 가능)
- [x] **NOTI-05**: Kill Switch 복구 절차 (Owner 인증 후 재활성화)

### Owner Wallet Connection (소유자 지갑 연결)

- [x] **OWNR-01**: 브라우저 익스텐션 지갑 연결 (WalletConnect QR 방식)
- [x] **OWNR-02**: WalletConnect v2로 모바일 지갑 QR 연결
- [x] **OWNR-03**: Owner 지갑 서명으로 세션 승인, 거래 승인, 설정 변경 인증

### Chain Abstraction (체인 추상화)

- [x] **CHAIN-01**: ChainAdapter 인터페이스 정의 (buildTx, simulateTx, submitTx, getBalance, isValidAddress 등)
- [x] **CHAIN-02**: Solana Adapter 완전 구현 (@solana/kit 3.x)
- [x] **CHAIN-03**: EVM Adapter 인터페이스 준수 스텁 (향후 구현 준비)

### REST API (에이전트 접근 API)

- [x] **API-01**: Hono 기반 로컬 HTTP 서버, 127.0.0.1 바인딩, 세션 토큰 + Owner 서명 인증 미들웨어
- [x] **API-02**: 지갑 엔드포인트 (GET /v1/wallet/balance, /v1/wallet/address)
- [x] **API-03**: 세션 엔드포인트 (POST/GET/DELETE /v1/sessions)
- [x] **API-04**: 거래 엔드포인트 (POST /v1/transactions/send, GET /v1/transactions, GET /v1/transactions/pending)
- [x] **API-05**: Owner 전용 엔드포인트 (POST /v1/owner/approve/:txId, /v1/owner/reject/:txId, /v1/owner/kill-switch)
- [x] **API-06**: Zod 스키마 기반 OpenAPI 3.0 스펙 자동 생성

### CLI Daemon (CLI 데몬)

- [x] **CLI-01**: `waiaas init` 대화형 초기 설정 (마스터 비밀번호, 알림 채널, Owner 주소)
- [x] **CLI-02**: `waiaas start` 백그라운드 데몬 실행 + `waiaas stop` 우아한 종료
- [x] **CLI-03**: `waiaas status` 데몬 상태 (가동 시간, 활성 세션, 최근 거래)
- [x] **CLI-04**: npm 글로벌 패키지로 설치 가능 (`npm install -g @waiaas/daemon`)

### SDK (개발자 SDK)

- [x] **SDK-01**: TypeScript SDK (@waiaas/sdk) -- 완전한 타입 정의, 세션 토큰 관리, 자동 재시도
- [x] **SDK-02**: Python SDK (waiaas) -- async/await 지원, 동일 기능

### MCP Server (LLM 에이전트 통합)

- [x] **MCP-01**: MCP Server 패키지 (@waiaas/mcp) -- get_balance, send_token, get_address, list_transactions 도구
- [x] **MCP-02**: Claude Desktop에서 MCP 연동 후 자연어 거래 가능

### Desktop App (데스크톱 애플리케이션)

- [x] **DESK-01**: Tauri 기반 데스크톱 앱, 시스템 트레이 상주 (상태 아이콘: 초록/노랑/빨강)
- [x] **DESK-02**: 대시보드 (잔액, 오늘 거래, 활성 세션) + 대기 중 거래 승인/거부 인터페이스
- [x] **DESK-03**: macOS, Windows, Linux 빌드 배포
- [x] **DESK-04**: 네이티브 OS 알림 + 자동 업데이트

### Docker (컨테이너 배포)

- [x] **DOCK-01**: Docker 이미지 + docker-compose 템플릿 제공

### Interactive Telegram Bot (인터랙티브 텔레그램 봇)

- [x] **TGBOT-01**: Telegram 인라인 키보드로 거래 승인/거부 (모바일에서 즉시 관리)
- [x] **TGBOT-02**: 봇 명령어 (/sessions, /revoke, /killswitch, /status)

---

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| KEYS-01 | Phase 6: Core Daemon | Complete |
| KEYS-02 | Phase 6: Core Daemon | Complete |
| KEYS-03 | Phase 6: Core Daemon | Complete |
| KEYS-04 | Phase 6: Core Daemon | Complete |
| SESS-01 | Phase 7: Session & Transaction | Complete |
| SESS-02 | Phase 7: Session & Transaction | Complete |
| SESS-03 | Phase 7: Session & Transaction | Complete |
| SESS-04 | Phase 7: Session & Transaction | Complete |
| SESS-05 | Phase 7: Session & Transaction | Complete |
| LOCK-01 | Phase 8: Security Layers | Complete |
| LOCK-02 | Phase 8: Security Layers | Complete |
| LOCK-03 | Phase 8: Security Layers | Complete |
| LOCK-04 | Phase 8: Security Layers | Complete |
| NOTI-01 | Phase 8: Security Layers | Complete |
| NOTI-02 | Phase 8: Security Layers | Complete |
| NOTI-03 | Phase 8: Security Layers | Complete |
| NOTI-04 | Phase 8: Security Layers | Complete |
| NOTI-05 | Phase 8: Security Layers | Complete |
| OWNR-01 | Phase 8: Security Layers | Complete |
| OWNR-02 | Phase 8: Security Layers | Complete |
| OWNR-03 | Phase 8: Security Layers | Complete |
| CHAIN-01 | Phase 6: Core Daemon | Complete |
| CHAIN-02 | Phase 7: Session & Transaction | Complete |
| CHAIN-03 | Phase 8: Security Layers | Complete |
| API-01 | Phase 6: Core Daemon | Complete |
| API-02 | Phase 7: Session & Transaction | Complete |
| API-03 | Phase 7: Session & Transaction | Complete |
| API-04 | Phase 7: Session & Transaction | Complete |
| API-05 | Phase 8: Security Layers | Complete |
| API-06 | Phase 6: Core Daemon | Complete |
| CLI-01 | Phase 6: Core Daemon | Complete |
| CLI-02 | Phase 6: Core Daemon | Complete |
| CLI-03 | Phase 6: Core Daemon | Complete |
| CLI-04 | Phase 6: Core Daemon | Complete |
| SDK-01 | Phase 9: Integration & Client | Complete |
| SDK-02 | Phase 9: Integration & Client | Complete |
| MCP-01 | Phase 9: Integration & Client | Complete |
| MCP-02 | Phase 9: Integration & Client | Complete |
| DESK-01 | Phase 9: Integration & Client | Complete |
| DESK-02 | Phase 9: Integration & Client | Complete |
| DESK-03 | Phase 9: Integration & Client | Complete |
| DESK-04 | Phase 9: Integration & Client | Complete |
| DOCK-01 | Phase 9: Integration & Client | Complete |
| TGBOT-01 | Phase 9: Integration & Client | Complete |
| TGBOT-02 | Phase 9: Integration & Client | Complete |

---

## Milestone Summary

**Shipped:** 45 of 45 v0.2 requirements
**Adjusted:** OWNR-01 adjusted from "browser extension wallet connection" to "WalletConnect QR" (Tauri WebView doesn't support browser extensions)
**Dropped:** None

---
*Archived: 2026-02-05 as part of v0.2 milestone completion*
