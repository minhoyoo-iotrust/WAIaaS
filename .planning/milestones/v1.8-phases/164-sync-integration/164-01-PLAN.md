---
phase: 164-sync-integration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/sdk/src/types.ts
  - packages/sdk/src/index.ts
  - skills/quickstart.skill.md
  - skills/admin.skill.md
autonomous: true
requirements: [SYNC-01]

must_haves:
  truths:
    - "SDK에 HealthResponse 타입이 정의되어 있고, latestVersion/updateAvailable/schemaVersion 필드를 포함한다"
    - "quickstart.skill.md의 /health 응답 예시가 latestVersion, updateAvailable, schemaVersion 필드를 포함한다"
    - "admin.skill.md에 /health 엔드포인트 참조가 업데이트된 필드를 반영한다"
  artifacts:
    - path: "packages/sdk/src/types.ts"
      provides: "HealthResponse interface"
      contains: "latestVersion"
    - path: "packages/sdk/src/index.ts"
      provides: "HealthResponse export"
      contains: "HealthResponse"
    - path: "skills/quickstart.skill.md"
      provides: "Updated health check example"
      contains: "latestVersion"
  key_links:
    - from: "packages/sdk/src/types.ts"
      to: "packages/daemon/src/api/routes/openapi-schemas.ts"
      via: "field parity (manual SSoT mirror)"
      pattern: "latestVersion.*updateAvailable.*schemaVersion"
    - from: "skills/quickstart.skill.md"
      to: "packages/daemon/src/api/routes/health.ts"
      via: "response example matches actual output"
      pattern: "latestVersion.*null"
---

<objective>
SDK HealthResponse 타입 추가 + 스킬 파일 /health 응답 예시 동기화

Purpose: Phase 160에서 HealthResponseSchema에 추가된 latestVersion, updateAvailable, schemaVersion 필드가 SDK 타입과 스킬 문서에 반영되지 않은 상태를 해소한다. CLAUDE.md 인터페이스 동기화 규칙을 준수한다.
Output: SDK HealthResponse 타입 + quickstart/admin 스킬 파일 업데이트
</objective>

<execution_context>
@/Users/minho.yoo/.claude/get-shit-done/workflows/execute-plan.md
@/Users/minho.yoo/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/160-version-check-infra/160-02-SUMMARY.md

# Source of truth for HealthResponse fields
@packages/daemon/src/api/routes/openapi-schemas.ts
@packages/daemon/src/api/routes/health.ts

# Files to update
@packages/sdk/src/types.ts
@packages/sdk/src/index.ts
@skills/quickstart.skill.md
@skills/admin.skill.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: SDK HealthResponse 타입 추가 + 스킬 파일 /health 응답 동기화</name>
  <files>
    packages/sdk/src/types.ts
    packages/sdk/src/index.ts
    skills/quickstart.skill.md
    skills/admin.skill.md
  </files>
  <action>
1. **SDK 타입 추가** (`packages/sdk/src/types.ts`):
   - 파일 상단 `// Health Response` 섹션을 추가 (Wallet Responses 섹션 위).
   - HealthResponse 인터페이스 정의:
     ```typescript
     export interface HealthResponse {
       /** Daemon status (always "ok" when running) */
       status: string;
       /** Current daemon version (semver) */
       version: string;
       /** Latest available version from npm registry, null if check not performed */
       latestVersion: string | null;
       /** True when a newer version is available */
       updateAvailable: boolean;
       /** Current database schema version number */
       schemaVersion: number;
       /** Seconds since daemon start */
       uptime: number;
       /** Current epoch timestamp (seconds) */
       timestamp: number;
     }
     ```
   - 이 타입은 HealthResponseSchema (openapi-schemas.ts)의 Zod 스키마와 1:1 대응한다.

2. **SDK barrel export** (`packages/sdk/src/index.ts`):
   - `HealthResponse`를 type export에 추가.

3. **quickstart.skill.md 업데이트** (`skills/quickstart.skill.md`):
   - Step 1: Health Check 섹션의 응답 예시를 갱신:
     ```json
     {
       "status": "ok",
       "version": "1.8.0",
       "latestVersion": null,
       "updateAvailable": false,
       "schemaVersion": 16,
       "uptime": 42,
       "timestamp": 1707000000
     }
     ```
   - version 필드를 "1.4.6"에서 "1.8.0"으로 갱신.
   - 프론트매터의 version을 "1.8.0"으로 갱신.

4. **admin.skill.md 업데이트** (`skills/admin.skill.md`):
   - 프론트매터의 version을 "1.8.0"으로 갱신.
   - "1. Daemon Status & Control" 섹션 아래에 GET /health 엔드포인트 참조를 추가 (GET /v1/admin/status 위, 또는 바로 아래에 "See also: GET /health (no auth, includes version check info)" 한 줄 노트 추가).
   - 기존 /v1/admin/status 응답에는 변경 없음 (다른 스키마).

주의사항:
- MCP system-status 리소스는 /v1/admin/status를 읽으며 /health와 다른 스키마다. MCP 코드 변경 불필요.
- SDK WAIaaSClient에 getHealth() 메서드는 추가하지 않는다 (unauthenticated endpoint이므로 SDK 클라이언트 패턴에 맞지 않음). 타입만 export하여 사용자가 직접 fetch한 결과에 타입을 적용할 수 있게 한다.
  </action>
  <verify>
- `grep -c 'HealthResponse' packages/sdk/src/types.ts` >= 1
- `grep -c 'HealthResponse' packages/sdk/src/index.ts` >= 1
- `grep -c 'latestVersion' skills/quickstart.skill.md` >= 1
- `grep -c 'schemaVersion' skills/quickstart.skill.md` >= 1
- `npx tsc -p packages/sdk/tsconfig.json --noEmit` passes
  </verify>
  <done>
SDK에 HealthResponse 타입이 export되고, quickstart.skill.md의 /health 응답 예시가 7개 필드를 모두 포함하며, admin.skill.md에 /health 참조가 추가되어 있다.
  </done>
</task>

</tasks>

<verification>
1. SDK 타입이 daemon HealthResponseSchema 필드와 1:1 대응하는지 확인
2. 스킬 파일의 응답 예시가 실제 /health 출력과 일치하는지 확인
3. TypeScript 컴파일 오류 없음
</verification>

<success_criteria>
- HealthResponse 타입이 SDK에 정의/export되고 7개 필드(status, version, latestVersion, updateAvailable, schemaVersion, uptime, timestamp)를 포함한다
- quickstart.skill.md Step 1 응답 예시가 새 필드를 포함한다
- admin.skill.md에 /health 엔드포인트 참조가 존재한다
- `npx tsc --noEmit` 통과
</success_criteria>

<output>
After completion, create `.planning/phases/164-sync-integration/164-01-SUMMARY.md`
</output>
