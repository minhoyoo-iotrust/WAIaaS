---
phase: 163-release-please
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - scripts/tag-release.sh
  - CLAUDE.md
autonomous: true
requirements: [RLSE-08]

must_haves:
  truths:
    - "tag-release.sh가 폐기 표시되어 실행 시 release-please 사용 안내를 출력한다"
    - "CLAUDE.md의 Milestone Completion 규칙이 v1.8.1 이후 2-게이트 모델만 기술한다"
  artifacts:
    - path: "scripts/tag-release.sh"
      provides: "폐기 안내 스크립트 (deprecated wrapper)"
      contains: "DEPRECATED"
    - path: "CLAUDE.md"
      provides: "갱신된 Milestone Completion 규칙"
      contains: "release-please"
  key_links:
    - from: "CLAUDE.md (Milestone Completion)"
      to: ".github/workflows/release-please.yml"
      via: "릴리스 흐름 설명"
      pattern: "release-please"
---

<objective>
tag-release.sh를 폐기하고 CLAUDE.md의 Milestone Completion 규칙을 갱신하여, release-please 기반 2-게이트 모델이 유일한 릴리스 경로임을 명시한다.

Purpose: 수동 릴리스 스크립트를 제거하여 이중 관리를 방지하고, 프로젝트 규칙을 현행화한다
Output: 폐기된 `scripts/tag-release.sh`, 갱신된 `CLAUDE.md`
</objective>

<execution_context>
@/Users/minho.yoo/.claude/get-shit-done/workflows/execute-plan.md
@/Users/minho.yoo/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@scripts/tag-release.sh (현재 상태: 수동 버전 범프 + 태그 생성 스크립트)
@CLAUDE.md (Milestone Completion 섹션에 v1.8.1 이전/이후 규칙 존재)
@objectives/v1.8-upgrade-distribution.md (기술 결정 #11: tag-release.sh 폐기)
</context>

<tasks>

<task type="auto">
  <name>Task 1: tag-release.sh 폐기 + CLAUDE.md 규칙 갱신</name>
  <files>
    scripts/tag-release.sh
    CLAUDE.md
  </files>
  <action>
**1. `scripts/tag-release.sh` 폐기**

기존 스크립트 내용을 폐기 안내로 교체한다. 실행하면 에러와 함께 release-please 사용 안내를 출력한다.

```bash
#!/bin/bash
# DEPRECATED: This script has been replaced by release-please.
# See .github/workflows/release-please.yml
#
# Release flow (2-gate model):
#   1. Merge PRs with Conventional Commits (feat:, fix:, etc.)
#   2. release-please auto-creates Release PR
#   3. Gate 1: Merge Release PR → CHANGELOG + GitHub Release + tag
#   4. Gate 2: release.yml quality gate → manual deploy approval
#
# Original script archived below for reference.

echo "ERROR: tag-release.sh is DEPRECATED since v1.8.1"
echo ""
echo "Release management is now handled by release-please."
echo "See: .github/workflows/release-please.yml"
echo ""
echo "Release flow:"
echo "  1. Merge PRs with Conventional Commits (feat:, fix:, BREAKING CHANGE:)"
echo "  2. release-please auto-creates/updates Release PR"
echo "  3. Merge Release PR when ready to release (Gate 1)"
echo "  4. Quality gate runs, then approve deploy (Gate 2)"
exit 1

# --- ARCHIVED ORIGINAL SCRIPT ---
# The following was the original tag-release.sh before deprecation.
# Kept for historical reference only.
#
# TAG="$1"
# VERSION="${TAG#v}"
# pnpm -r exec -- npm version "$VERSION" --no-git-tag-version
# if [ -f python-sdk/pyproject.toml ]; then
#   sed -i '' "s/^version = \".*\"/version = \"$VERSION\"/" python-sdk/pyproject.toml
# fi
# git add packages/*/package.json packages/adapters/*/package.json python-sdk/pyproject.toml
# git commit -m "chore: bump version to $VERSION"
# git tag "$TAG"
```

**2. `CLAUDE.md` Milestone Completion 섹션 갱신**

현재 내용:
```markdown
## Milestone Completion

- **v1.8.1 이전**: 마일스톤 완료 시 `./scripts/tag-release.sh v{version}`을 실행하여 모든 패키지 버전을 범프하고 태그를 생성한다. 태그가 이미 존재하는 경우 버전 범프만 수동으로 수행한다.
- **v1.8.1 이후 (2-게이트 모델)**: release-please가 버전 범프 + 태그 + CHANGELOG를 자동 관리한다. `tag-release.sh`는 폐기. 릴리스 흐름: PR 머지 → release-please Release PR 자동 생성 → Release PR 머지(게이트 1: 릴리스 의사 결정) → release.yml 품질 게이트 → deploy job 수동 승인(게이트 2: 배포 실행).
```

변경 후:
```markdown
## Milestone Completion

- release-please가 버전 범프 + 태그 + CHANGELOG를 자동 관리한다 (2-게이트 모델).
- `tag-release.sh`는 v1.8.1에서 폐기됨. 직접 실행하지 않는다.
- **릴리스 흐름**: PR 머지(Conventional Commits) → release-please Release PR 자동 생성 → Release PR 머지(게이트 1: 릴리스 의사 결정) → release.yml 품질 게이트 → deploy job 수동 승인(게이트 2: 배포 실행).
- **커밋 규약**: `feat:` (minor), `fix:` (patch), `BREAKING CHANGE:` (major). `docs:`, `test:`, `chore:`, `ci:` 등은 CHANGELOG에 포함되지 않는다.
```

CLAUDE.md의 나머지 섹션은 변경하지 않는다. Milestone Completion 섹션만 교체한다.
  </action>
  <verify>
- `bash scripts/tag-release.sh v1.8.0` 실행 시 "DEPRECATED" 메시지와 함께 exit 1로 종료되는지 확인
- CLAUDE.md에 "v1.8.1 이전" 문구가 더 이상 존재하지 않는지 확인
- CLAUDE.md에 "release-please"와 "2-게이트 모델" 문구가 존재하는지 확인
- CLAUDE.md에 커밋 규약(feat:, fix:, BREAKING CHANGE:) 안내가 포함되어 있는지 확인
  </verify>
  <done>
- tag-release.sh 실행 시 폐기 안내를 출력하고 exit 1로 종료한다
- CLAUDE.md Milestone Completion 섹션이 2-게이트 모델만 기술하고, v1.8.1 이전 규칙이 제거되었다
- 커밋 규약(Conventional Commits) 안내가 CLAUDE.md에 포함되어 있다
  </done>
</task>

</tasks>

<verification>
1. `scripts/tag-release.sh` 실행 시 "DEPRECATED" 메시지 출력 + exit 1
2. CLAUDE.md에 "v1.8.1 이전" 텍스트가 없고, release-please 기반 2-게이트 모델만 기술
3. CLAUDE.md에 Conventional Commits 규약(feat:/fix:/BREAKING CHANGE:) 안내 포함
4. tag-release.sh에 ARCHIVED 주석으로 원본 스크립트가 보존됨 (참조용)
</verification>

<success_criteria>
- tag-release.sh가 폐기되어 실행 시 release-please 안내를 출력한다
- CLAUDE.md가 현행 릴리스 모델(2-게이트)만 반영한다
- 프로젝트 규칙에서 수동 릴리스 경로가 완전히 제거되었다
</success_criteria>

<output>
After completion, create `.planning/phases/163-release-please/163-03-SUMMARY.md`
</output>
