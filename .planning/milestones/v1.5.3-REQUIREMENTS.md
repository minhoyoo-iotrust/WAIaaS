# Requirements Archive: WAIaaS v1.5.3

**Milestone:** v1.5.3 USD 정책 확장 (누적 지출 한도 + 표시 통화)
**Shipped:** 2026-02-16
**Status:** All 19 requirements validated

## 누적 지출 한도 (Cumulative Spending Limit)

- [x] **CUMUL-01**: transactions 테이블에 amount_usd / reserved_amount_usd 컬럼 추가, DB v13 마이그레이션 적용 — Phase 136
- [x] **CUMUL-02**: 트랜잭션 Stage 3에서 resolveEffectiveAmountUsd() 결과가 amount_usd / reserved_amount_usd로 DB에 기록 — Phase 136
- [x] **CUMUL-03**: SpendingLimitRuleSchema에 daily_limit_usd / monthly_limit_usd 필드 추가, Zod 검증 동작 — Phase 136
- [x] **CUMUL-04**: evaluateAndReserve()에서 24시간/30일 롤링 윈도우 누적 USD 집계, 한도 초과 시 APPROVAL 격상 — Phase 136
- [x] **CUMUL-05**: PENDING/QUEUED/SIGNED 상태의 reserved_amount_usd 누적 합산에 포함, 이중 지출 방지 — Phase 136
- [x] **CUMUL-06**: 누적 지출 80% 도달 시 CUMULATIVE_LIMIT_WARNING 알림 발송 — Phase 136
- [x] **CUMUL-07**: TX_APPROVAL_REQUIRED 이벤트에 reason 필드(per_tx/cumulative_daily/cumulative_monthly) 추가 — Phase 136
- [x] **CUMUL-08**: Admin SpendingLimitForm에서 daily_limit_usd / monthly_limit_usd 입력/수정 가능 — Phase 137
- [x] **CUMUL-09**: PolicyRulesSummary에서 누적 한도 설정값 시각화 — Phase 137
- [x] **CUMUL-10**: TS/Python SDK와 MCP에서 누적 한도 필드 포함 정책 생성/조회 가능 — Phase 137

## 표시 통화 (Display Currency)

- [x] **DISP-01**: IForexRateService 인터페이스로 USD→법정 통화 환율 조회 가능 — Phase 138
- [x] **DISP-02**: CoinGecko vs_currencies로 환율 조회, InMemoryPriceCache 30분 TTL 캐시 — Phase 138
- [x] **DISP-03**: SettingsService display 카테고리 추가, display.currency hot-reload 즉시 반영 — Phase 138
- [x] **DISP-04**: Admin Settings 통화 드롭다운(43개, 검색 가능) + 환율 미리보기 — Phase 138
- [x] **DISP-05**: Admin 대시보드 환산 표시 — Phase 139
- [x] **DISP-06**: 알림 메시지에 환산 금액 포함 — Phase 139
- [x] **DISP-07**: REST API 4개 엔드포인트에 ?display_currency 쿼리 파라미터 — Phase 139
- [x] **DISP-08**: MCP 도구 응답에 서버 설정 표시 통화 환산 금액 포함 — Phase 139
- [x] **DISP-09**: Intl.NumberFormat 기반 통화별 포매팅 + "≈" 접두사 — Phase 138

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| CUMUL-01 | Phase 136 | Validated |
| CUMUL-02 | Phase 136 | Validated |
| CUMUL-03 | Phase 136 | Validated |
| CUMUL-04 | Phase 136 | Validated |
| CUMUL-05 | Phase 136 | Validated |
| CUMUL-06 | Phase 136 | Validated |
| CUMUL-07 | Phase 136 | Validated |
| CUMUL-08 | Phase 137 | Validated |
| CUMUL-09 | Phase 137 | Validated |
| CUMUL-10 | Phase 137 | Validated |
| DISP-01 | Phase 138 | Validated |
| DISP-02 | Phase 138 | Validated |
| DISP-03 | Phase 138 | Validated |
| DISP-04 | Phase 138 | Validated |
| DISP-05 | Phase 139 | Validated |
| DISP-06 | Phase 139 | Validated |
| DISP-07 | Phase 139 | Validated |
| DISP-08 | Phase 139 | Validated |
| DISP-09 | Phase 138 | Validated |

**Coverage:** 19/19 requirements validated (100%)

---
*Archived: 2026-02-16*
