---
phase: 214-verification-sdk-type-fix
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - .planning/phases/213-integration-layer/213-VERIFICATION.md
autonomous: true
gap_closure: true
requirements: [INTG-01, INTG-02, INTG-03, INTG-04, INTG-05, INTG-06, INTG-07, INTG-08, INTG-09, INTG-10]

must_haves:
  truths:
    - "Phase 213 VERIFICATION.md exists with passed status"
    - "INTG-01 through INTG-10 each have SATISFIED status with code evidence"
    - "All 5 success criteria from ROADMAP.md are verified with file:line references"
  artifacts:
    - path: ".planning/phases/213-integration-layer/213-VERIFICATION.md"
      provides: "Phase 213 verification report"
      contains: "INTG-01"
  key_links:
    - from: "213-VERIFICATION.md"
      to: "ROADMAP.md success criteria"
      via: "10 requirement entries + 5 observable truths"
      pattern: "INTG-(0[1-9]|10).*SATISFIED"
---

<objective>
Create Phase 213 VERIFICATION.md with code-level evidence for all 10 requirements (INTG-01~10).

Purpose: Close the audit gap where Phase 213 lacks a formal verification report despite all work being complete.
Output: `.planning/phases/213-integration-layer/213-VERIFICATION.md`
</objective>

<execution_context>
@/Users/minho.yoo/.claude/get-shit-done/workflows/execute-plan.md
@/Users/minho.yoo/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md (Phase 213 section — success criteria and requirements)
@.planning/v26.4-MILESTONE-AUDIT.md (gap definitions)
@.planning/phases/213-integration-layer/213-01-SUMMARY.md
@.planning/phases/213-integration-layer/213-02-SUMMARY.md
@.planning/phases/213-integration-layer/213-03-SUMMARY.md
@.planning/phases/213-integration-layer/213-04-SUMMARY.md
@.planning/phases/210-session-model-restructure/210-VERIFICATION.md (format reference)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Phase 213 VERIFICATION.md with INTG-01~10 evidence</name>
  <files>.planning/phases/213-integration-layer/213-VERIFICATION.md</files>
  <action>
Create 213-VERIFICATION.md following the exact format of 210-VERIFICATION.md. The report must include:

**Frontmatter:**
- phase: 213-integration-layer
- verified: current ISO timestamp
- status: passed
- score: 5/5 success criteria verified (from ROADMAP.md Phase 213 success criteria)
- re_verification: false
- gaps: []
- human_verification: []

**Observable Truths (5, from ROADMAP.md Phase 213 success criteria):**

For each truth, grep the actual source files to find line numbers and code references:

1. "SDK에서 createSession({ walletIds })로 멀티 지갑 세션을 생성하고 getConnectInfo()로 자기 발견 정보를 조회할 수 있다"
   - Evidence: `packages/sdk/src/client.ts` — createSession() method with walletIds param, auto-updates sessionToken/sessionId
   - Evidence: `packages/sdk/src/client.ts` — getConnectInfo() method with sessionAuth
   - Evidence: `packages/sdk/src/types.ts` — CreateSessionParams, ConnectInfoResponse types
   - Evidence: `python-sdk/waiaas/client.py` — get_connect_info() method

2. "MCP가 단일 인스턴스로 동작하며, connect-info 도구와 기존 도구의 선택적 walletId 파라미터가 동작한다"
   - Evidence: `packages/mcp/src/tools/connect-info.ts` — connect_info tool
   - Evidence: `packages/mcp/src/index.ts` — WAIAAS_WALLET_ID optional with multi-wallet mode log
   - Evidence: Multiple tool files with `wallet_id` parameter (grep for `wallet_id` description pattern across mcp/src/tools/)
   - Evidence: `packages/mcp/src/__tests__/server.test.ts` — 19 tools registered

3. "Admin UI 세션 생성 폼에서 다중 지갑 선택과 기본 지갑 지정이 가능하고, 세션 상세에서 연결된 지갑 목록과 기본 지갑 배지가 표시된다"
   - Evidence: `packages/admin/src/pages/sessions.tsx` — modal with wallet checkboxes + default radio + wallets column with default badge

4. "CLI quickset이 단일 멀티 지갑 세션 + 단일 MCP config entry를 생성하고, 스킬 파일과 가이드 문서에서 마스터 패스워드 의존이 제거된다"
   - Evidence: `packages/cli/src/commands/quickstart.ts` — single POST /v1/sessions { walletIds }, single mcp-token file, single MCP config entry
   - Evidence: `skills/quickstart.skill.md`, `skills/wallet.skill.md`, `skills/admin.skill.md` — connect-info sections
   - Evidence: `docs/guides/openclaw-integration.md`, `docs/guides/claude-code-integration.md`, `docs/guides/agent-skills-integration.md` — master password removed

5. "지갑 동적 추가/제거 시 SESSION_WALLET_ADDED/SESSION_WALLET_REMOVED 알림 이벤트가 발송된다"
   - Evidence: `packages/core/src/enums/notification.ts` — 2 new event types
   - Evidence: `packages/core/src/i18n/en.ts` and `ko.ts` — notification templates
   - Evidence: `packages/daemon/src/api/routes/sessions.ts` — fire-and-forget notify calls on addWallet/removeWallet

**Required Artifacts:** List each key file with VERIFIED status. Key files per subsystem:
- SDK: client.ts, types.ts, index.ts (exports)
- Python SDK: client.py, models.py
- MCP: connect-info.ts, server.ts, index.ts, 18 tool files with wallet_id, server.test.ts
- Admin UI: sessions.tsx
- CLI: quickstart.ts
- Skills: quickstart.skill.md, wallet.skill.md, admin.skill.md
- Guides: openclaw-integration.md, claude-code-integration.md, agent-skills-integration.md
- Notification: notification.ts, en.ts, ko.ts, signing-protocol.ts, enums.test.ts, sessions.ts

**Key Link Verification:** Wire connections between:
- SDK client.ts imports types from types.ts
- MCP connect-info.ts calls GET /v1/connect-info
- MCP tool files use wallet_id -> walletId conversion
- Admin sessions.tsx calls POST /v1/sessions with walletIds
- CLI quickstart.ts calls POST /v1/sessions with walletIds
- sessions.ts dispatches notification events on wallet add/remove
- notification.ts event types match i18n keys

**Requirements Coverage (INTG-01~10):**
For each requirement, provide:
- Plan that claimed it (from ROADMAP.md/SUMMARY frontmatter)
- SATISFIED status
- Code evidence with file paths and line numbers (grep the actual source to get real line numbers)

INTG-01: SDK createSession/getConnectInfo (213-01)
INTG-02: MCP connect-info tool (213-02)
INTG-03: MCP walletId parameter on tools (213-02)
INTG-04: MCP single instance (213-02)
INTG-05: Admin UI multi-wallet session form (213-03)
INTG-06: Admin UI session wallet list + badge (213-03)
INTG-07: CLI quickset single session (213-03)
INTG-08: Skill files updated (213-04)
INTG-09: Guide docs master password removed (213-04)
INTG-10: Notification events (213-04)

Use `grep -n` on the actual source files to find precise line numbers for all evidence references. Do NOT use placeholder line numbers.

**Note on INTG-01 SDK type mismatch:** Acknowledge in the verification report that ConnectInfoResponse in SDK types.ts has policies embedded in wallets rather than as a top-level Record. Note this is addressed in Plan 214-03. Mark INTG-01 as SATISFIED (SDK methods exist and function) with a note about the type refinement in Plan 03.
  </action>
  <verify>
1. File exists: `ls .planning/phases/213-integration-layer/213-VERIFICATION.md`
2. Contains all 10 requirement IDs: `grep -c 'INTG-' .planning/phases/213-integration-layer/213-VERIFICATION.md` returns >= 10
3. All marked SATISFIED: `grep 'SATISFIED' .planning/phases/213-integration-layer/213-VERIFICATION.md | wc -l` >= 10
4. Has passed status: `grep 'status: passed' .planning/phases/213-integration-layer/213-VERIFICATION.md`
  </verify>
  <done>213-VERIFICATION.md exists with INTG-01~10 each having SATISFIED status and code-level evidence with actual line numbers from source files</done>
</task>

</tasks>

<verification>
- Phase 213 VERIFICATION.md exists at `.planning/phases/213-integration-layer/213-VERIFICATION.md`
- Frontmatter has `status: passed` and `score: 5/5`
- All 5 observable truths from ROADMAP.md success criteria are VERIFIED
- INTG-01 through INTG-10 are each SATISFIED with code evidence
- Format matches 210-VERIFICATION.md structure
- INTG-01 includes note about SDK type refinement in Plan 03
</verification>

<success_criteria>
Phase 213 VERIFICATION.md exists, contains all 10 INTG requirements with SATISFIED status and file:line evidence, and follows the established verification report format.
</success_criteria>

<output>
After completion, create `.planning/phases/214-verification-sdk-type-fix/214-02-SUMMARY.md`
</output>
