---
phase: 205-admin-settings-skills-sync
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - skills/wallet.skill.md
  - skills/admin.skill.md
  - packages/skills/skills/wallet.skill.md
  - packages/skills/skills/admin.skill.md
autonomous: true
requirements: [WALLET-07, CONF-01]

must_haves:
  truths:
    - "wallet.skill.md documents approval_method field in PUT /wallets/:id/owner"
    - "wallet.skill.md documents approvalMethod field in wallet detail response"
    - "admin.skill.md documents signing_sdk settings category with all 6 keys"
    - "admin.skill.md documents telegram settings category with 3 keys"
    - "admin.skill.md settings category table lists all 11 categories"
  artifacts:
    - path: "skills/wallet.skill.md"
      provides: "Wallet skill with approval_method documentation"
      contains: "approval_method"
    - path: "skills/admin.skill.md"
      provides: "Admin skill with signing_sdk settings documentation"
      contains: "signing_sdk"
  key_links:
    - from: "skills/wallet.skill.md"
      to: "PUT /v1/wallets/{id}/owner"
      via: "documents approval_method parameter"
      pattern: "approval_method"
    - from: "skills/admin.skill.md"
      to: "GET /v1/admin/settings"
      via: "documents signing_sdk category"
      pattern: "signing_sdk"
---

<objective>
Synchronize wallet.skill.md and admin.skill.md with the current API state, documenting approval_method fields and signing_sdk/telegram settings categories.

Purpose: Per CLAUDE.md rules, skill files must be updated when REST API or settings interfaces change. Phases 202-204 added approval_method to the wallet owner endpoint, signing_sdk settings to SettingsService, and telegram bot settings. These changes are not reflected in the skill files yet.

Output: Updated wallet.skill.md and admin.skill.md with accurate documentation.
</objective>

<execution_context>
@/Users/minho.yoo/.claude/get-shit-done/workflows/execute-plan.md
@/Users/minho.yoo/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@skills/wallet.skill.md
@skills/admin.skill.md
@packages/daemon/src/infrastructure/settings/setting-keys.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update wallet.skill.md with approval_method documentation</name>
  <files>
    skills/wallet.skill.md
    packages/skills/skills/wallet.skill.md
  </files>
  <action>
Update wallet.skill.md (both copies: skills/ and packages/skills/skills/) with these changes:

1. **PUT /v1/wallets/{id}/owner section** (~line 144-174):
   Add `approval_method` to the Parameters list:
   ```
   - `approval_method` (optional): Owner approval method override for this wallet.
     Valid values: `"sdk_ntfy"`, `"sdk_telegram"`, `"walletconnect"`, `"telegram_bot"`, `"rest"`, or `null` (auto-detect).
     Set to `null` to clear and use automatic channel detection.
   ```

   Add to the response JSON example:
   ```json
   "approvalMethod": null
   ```

2. **GET /v1/wallets/{id} section** (~line 83-111):
   Add `approvalMethod` to the response JSON example:
   ```json
   "approvalMethod": null,
   ```
   Add to the description after Owner states line:
   ```
   Approval methods: `sdk_ntfy` (Wallet SDK via ntfy), `sdk_telegram` (Wallet SDK via Telegram), `walletconnect` (WalletConnect), `telegram_bot` (Telegram Bot), `rest` (REST API polling), or `null` (auto-detect based on infrastructure).
   ```

3. **Update version** in frontmatter from "2.3.0" to "2.6.1".

Both files (skills/wallet.skill.md and packages/skills/skills/wallet.skill.md) must be identical.
  </action>
  <verify>
Both files should be identical: `diff skills/wallet.skill.md packages/skills/skills/wallet.skill.md` should produce no output.
  </verify>
  <done>
wallet.skill.md documents approval_method parameter in PUT /wallets/:id/owner, approvalMethod in wallet detail response, and lists all valid approval method values.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update admin.skill.md with signing_sdk and telegram settings categories</name>
  <files>
    skills/admin.skill.md
    packages/skills/skills/admin.skill.md
  </files>
  <action>
Update admin.skill.md (both copies: skills/ and packages/skills/skills/) with these changes:

1. **Section 4 header** (~line 265): Change "organized by 5 categories" to "organized by category" (the number has grown and will keep growing).

2. **GET /admin/settings response example** (~line 280-325): Add the missing categories to the JSON example:
   ```json
   "oracle": {
     "oracle.coingecko_api_key": false,
     "oracle.cross_validation_threshold": "5"
   },
   "display": {
     "display.currency": "USD"
   },
   "autostop": {
     "autostop.enabled": "true",
     "autostop.consecutive_failures_threshold": "5",
     "autostop.unusual_activity_threshold": "20",
     "autostop.unusual_activity_window_sec": "300",
     "autostop.idle_timeout_sec": "3600",
     "autostop.idle_check_interval_sec": "60"
   },
   "monitoring": {
     "monitoring.enabled": "true",
     "monitoring.check_interval_sec": "300",
     "monitoring.low_balance_threshold_sol": "0.01",
     "monitoring.low_balance_threshold_eth": "0.005",
     "monitoring.cooldown_hours": "24"
   },
   "telegram": {
     "telegram.enabled": "false",
     "telegram.bot_token": false,
     "telegram.locale": "en"
   },
   "signing_sdk": {
     "signing_sdk.enabled": "false",
     "signing_sdk.request_expiry_min": "30",
     "signing_sdk.preferred_channel": "ntfy",
     "signing_sdk.preferred_wallet": "",
     "signing_sdk.ntfy_request_topic_prefix": "waiaas-sign",
     "signing_sdk.ntfy_response_topic_prefix": "waiaas-response"
   }
   ```

3. **Categories table** (~line 328-336): Add rows for the missing categories:
   ```
   | `oracle`      | coingecko_api_key, cross_validation_threshold           | Price oracle configuration.              |
   | `display`     | currency                                                 | Display currency for USD conversion.     |
   | `autostop`    | enabled, consecutive_failures_*, unusual_activity_*, idle_* | Automatic protection rules.            |
   | `monitoring`  | enabled, check_interval_sec, low_balance_threshold_*, cooldown_hours | Balance monitoring configuration. |
   | `telegram`    | enabled, bot_token, locale                               | Telegram Bot interactive commands.       |
   | `signing_sdk` | enabled, request_expiry_min, preferred_channel, preferred_wallet, ntfy_*_topic_prefix | Wallet Signing SDK for owner approval. |
   ```

4. **PUT /admin/settings valid setting keys** (~line 379-420): Add the missing categories' keys:

   Oracle:
   - `oracle.coingecko_api_key` -- CoinGecko API key (credential, encrypted at rest)
   - `oracle.cross_validation_threshold` -- Price deviation threshold % (default: "5")

   Display:
   - `display.currency` -- Display currency code (default: "USD")

   AutoStop:
   - `autostop.enabled` -- Enable/disable autostop ("true"/"false", default: "true")
   - `autostop.consecutive_failures_threshold` -- Consecutive failure threshold (default: "5")
   - `autostop.unusual_activity_threshold` -- Unusual activity count threshold (default: "20")
   - `autostop.unusual_activity_window_sec` -- Unusual activity time window (default: "300")
   - `autostop.idle_timeout_sec` -- Session idle timeout (default: "3600")
   - `autostop.idle_check_interval_sec` -- Idle check interval (default: "60")

   Monitoring:
   - `monitoring.enabled` -- Enable/disable balance monitoring (default: "true")
   - `monitoring.check_interval_sec` -- Check interval (default: "300")
   - `monitoring.low_balance_threshold_sol` -- SOL low balance threshold (default: "0.01")
   - `monitoring.low_balance_threshold_eth` -- ETH low balance threshold (default: "0.005")
   - `monitoring.cooldown_hours` -- Alert cooldown hours (default: "24")

   Telegram:
   - `telegram.enabled` -- Enable Telegram bot ("true"/"false", default: "false")
   - `telegram.bot_token` -- Telegram bot API token (credential, encrypted at rest)
   - `telegram.locale` -- Telegram bot locale ("en", "ko", default: "en")

   Signing SDK:
   - `signing_sdk.enabled` -- Enable Signing SDK ("true"/"false", default: "false")
   - `signing_sdk.request_expiry_min` -- Sign request expiry in minutes (default: "30")
   - `signing_sdk.preferred_channel` -- Preferred signing channel ("ntfy" or "telegram", default: "ntfy")
   - `signing_sdk.preferred_wallet` -- Preferred wallet app name (default: "")
   - `signing_sdk.ntfy_request_topic_prefix` -- Ntfy request topic prefix (default: "waiaas-sign")
   - `signing_sdk.ntfy_response_topic_prefix` -- Ntfy response topic prefix (default: "waiaas-response")

5. **Update version** in frontmatter from "2.3.0" to "2.6.1".

Both files (skills/admin.skill.md and packages/skills/skills/admin.skill.md) must be identical.
  </action>
  <verify>
Both files should be identical: `diff skills/admin.skill.md packages/skills/skills/admin.skill.md` should produce no output.
  </verify>
  <done>
admin.skill.md documents all 11 settings categories with complete key listings. signing_sdk and telegram categories are fully documented with all keys, defaults, and descriptions.
  </done>
</task>

</tasks>

<verification>
1. `diff skills/wallet.skill.md packages/skills/skills/wallet.skill.md` produces no output
2. `diff skills/admin.skill.md packages/skills/skills/admin.skill.md` produces no output
3. wallet.skill.md mentions approval_method in PUT /wallets/:id/owner
4. wallet.skill.md mentions approvalMethod in GET /wallets/:id response
5. admin.skill.md lists all 11 categories in the categories table
6. admin.skill.md lists all signing_sdk.* keys in the valid settings section
</verification>

<success_criteria>
- wallet.skill.md fully documents approval_method (parameter + response field + valid values)
- admin.skill.md lists all 11 settings categories with complete key documentation
- admin.skill.md signing_sdk section has all 6 operational keys documented
- Both root skills/ and packages/skills/skills/ copies are identical
</success_criteria>

<output>
After completion, create `.planning/phases/205-admin-settings-skills-sync/205-03-SUMMARY.md`
</output>
