---
phase: 182-ui-shared-components
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/admin/src/components/tab-nav.tsx
  - packages/admin/src/components/field-group.tsx
  - packages/admin/src/components/form.tsx
  - packages/admin/src/styles/global.css
  - packages/admin/src/__tests__/shared-components.test.tsx
autonomous: true
requirements: [TAB-01, FGRP-01, DESC-02]

must_haves:
  truths:
    - "TabNav renders a list of tabs and highlights the active tab"
    - "Clicking a tab calls the onTabChange callback with the new tab key"
    - "FieldGroup wraps children in a fieldset with a legend heading"
    - "FormField with description prop renders help text below the input"
  artifacts:
    - path: "packages/admin/src/components/tab-nav.tsx"
      provides: "Reusable TabNav component"
      exports: ["TabNav", "TabNavProps", "TabItem"]
    - path: "packages/admin/src/components/field-group.tsx"
      provides: "Semantic fieldset+legend wrapper"
      exports: ["FieldGroup", "FieldGroupProps"]
    - path: "packages/admin/src/components/form.tsx"
      provides: "FormField with description prop"
      exports: ["FormField", "FormFieldProps"]
    - path: "packages/admin/src/__tests__/shared-components.test.tsx"
      provides: "Tests for TabNav, FieldGroup, FormField description"
      min_lines: 60
  key_links:
    - from: "packages/admin/src/components/tab-nav.tsx"
      to: "packages/admin/src/styles/global.css"
      via: "CSS classes tab-nav, tab-btn, tab-btn.active"
      pattern: "tab-nav|tab-btn"
    - from: "packages/admin/src/components/field-group.tsx"
      to: "packages/admin/src/styles/global.css"
      via: "CSS classes field-group, field-group-legend"
      pattern: "field-group"
    - from: "packages/admin/src/components/form.tsx"
      to: "packages/admin/src/styles/global.css"
      via: "CSS class form-description"
      pattern: "form-description"
---

<objective>
TabNav, FieldGroup, FormField description 3개 공용 컴포넌트를 생성하여 Phase 183 이후 페이지에서 재사용할 수 있게 한다.

Purpose: 이후 5개 페이지(Wallets/Sessions/Policies/Notifications/Security)의 탭 전환, 설정 그룹화, 필드 설명을 위한 공용 컴포넌트 기반을 마련한다.
Output: tab-nav.tsx, field-group.tsx, 수정된 form.tsx, CSS 추가, 테스트 파일
</objective>

<execution_context>
@/Users/minho.yoo/.claude/get-shit-done/workflows/execute-plan.md
@/Users/minho.yoo/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@packages/admin/src/components/form.tsx
@packages/admin/src/pages/notifications.tsx
@packages/admin/src/styles/global.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: TabNav + FieldGroup 컴포넌트 생성 및 FormField description 추가</name>
  <files>
    packages/admin/src/components/tab-nav.tsx
    packages/admin/src/components/field-group.tsx
    packages/admin/src/components/form.tsx
    packages/admin/src/styles/global.css
  </files>
  <action>
1. **TabNav 컴포넌트** (`packages/admin/src/components/tab-nav.tsx`):
   - `TabItem` 타입: `{ key: string; label: string }` 정의
   - `TabNavProps` 인터페이스: `{ tabs: TabItem[]; activeTab: string; onTabChange: (key: string) => void }` 정의
   - 기존 `notifications.tsx`의 인라인 탭 패턴을 컴포넌트화: `<div class="tab-nav">` 안에 `tabs.map()`으로 `<button class="tab-btn {active}">` 렌더링
   - 클릭 시 `onTabChange(tab.key)` 호출
   - 기존 CSS 클래스 `.tab-nav`, `.tab-btn`, `.tab-btn.active`를 그대로 사용 (global.css에 이미 존재)
   - `TabNav`, `TabNavProps`, `TabItem`을 named export

2. **FieldGroup 컴포넌트** (`packages/admin/src/components/field-group.tsx`):
   - `FieldGroupProps` 인터페이스: `{ legend: string; children: ComponentChildren; description?: string }` 정의
   - `<fieldset class="field-group">` + `<legend class="field-group-legend">{legend}</legend>` + `{description && <p class="field-group-description">{description}</p>}` + `<div class="field-group-body">{children}</div>` 구조
   - `FieldGroup`, `FieldGroupProps`를 named export

3. **FormField description prop 추가** (`packages/admin/src/components/form.tsx`):
   - `FormFieldProps`에 `description?: string` 추가
   - 함수 매개변수 디스트럭처링에 `description` 추가
   - checkbox 타입 렌더링: error 앞에 `{description && <span class="form-description">{description}</span>}` 추가
   - 일반 타입 렌더링: error 앞에 `{description && <span class="form-description">{description}</span>}` 추가

4. **CSS 추가** (`packages/admin/src/styles/global.css`):
   - `.field-group` 스타일: `border: 1px solid var(--color-border); border-radius: var(--radius-lg); padding: var(--space-4) var(--space-6); margin-bottom: var(--space-4);`
   - `.field-group-legend` 스타일: `font-size: var(--font-size-lg); font-weight: var(--font-weight-semibold); padding: 0 var(--space-2);`
   - `.field-group-description` 스타일: `font-size: var(--font-size-sm); color: var(--color-text-secondary); margin-bottom: var(--space-3);`
   - `.field-group-body` 스타일: `display: flex; flex-direction: column; gap: var(--space-3);`
   - `.form-description` 스타일: `display: block; font-size: var(--font-size-xs); color: var(--color-text-secondary); margin-top: var(--space-1);` (`.form-error` 직후에 배치)
  </action>
  <verify>
    `cd /Users/minho.yoo/dev/wallet/WAIaaS && pnpm turbo run typecheck --filter=@waiaas/admin` 통과 확인
  </verify>
  <done>
    - tab-nav.tsx가 TabNav/TabNavProps/TabItem을 export한다
    - field-group.tsx가 FieldGroup/FieldGroupProps를 export한다
    - FormFieldProps에 description?: string이 추가되고 렌더링된다
    - CSS에 field-group, form-description 스타일이 추가되었다
  </done>
</task>

<task type="auto">
  <name>Task 2: TabNav + FieldGroup + FormField description 테스트 작성</name>
  <files>packages/admin/src/__tests__/shared-components.test.tsx</files>
  <action>
기존 테스트 파일 패턴(`notifications.test.tsx`)을 참고하여 `shared-components.test.tsx` 작성.

1. **TabNav 테스트** (`describe('TabNav')`):
   - `it('renders all tab buttons')`: tabs=[{key:'a', label:'Tab A'}, {key:'b', label:'Tab B'}], activeTab='a' 전달 -> 'Tab A', 'Tab B' 버튼 렌더링 확인
   - `it('marks active tab with active class')`: activeTab='a' -> Tab A 버튼에 'active' 클래스 포함 확인
   - `it('calls onTabChange when tab clicked')`: Tab B 클릭 -> onTabChange가 'b'로 호출 확인
   - `it('renders with empty tabs')`: tabs=[] -> 컨테이너만 렌더링, 버튼 없음 확인

2. **FieldGroup 테스트** (`describe('FieldGroup')`):
   - `it('renders fieldset with legend')`: legend='Test Group' -> fieldset 엘리먼트 존재, 'Test Group' 텍스트 확인
   - `it('renders children inside group')`: children으로 `<p>Child</p>` 전달 -> 'Child' 텍스트 확인
   - `it('renders description when provided')`: description='Help text' -> 'Help text' 텍스트 확인
   - `it('does not render description when not provided')`: description 없이 -> 'field-group-description' 클래스 엘리먼트 미존재 확인

3. **FormField description 테스트** (`describe('FormField description')`):
   - `it('renders description text below input')`: description='Enter your name' 전달 -> 텍스트 확인
   - `it('does not render description when not provided')`: description 없이 -> 'form-description' 클래스 엘리먼트 미존재 확인
   - `it('renders description for checkbox type')`: type='checkbox', description='Enable feature' -> 텍스트 확인

모든 테스트에서 `@testing-library/preact`의 `render`, `screen`, `fireEvent` 사용. `vi.fn()` 으로 콜백 모킹.
  </action>
  <verify>
    `cd /Users/minho.yoo/dev/wallet/WAIaaS && pnpm turbo run test --filter=@waiaas/admin -- --run packages/admin/src/__tests__/shared-components.test.tsx` 전체 통과 확인
  </verify>
  <done>
    - TabNav 4개 테스트 통과 (렌더링, 활성 탭, 탭 전환 콜백, 빈 탭)
    - FieldGroup 4개 테스트 통과 (fieldset+legend, children, description 유무)
    - FormField description 3개 테스트 통과 (렌더링, 미제공 시 미표시, checkbox)
  </done>
</task>

</tasks>

<verification>
1. `pnpm turbo run typecheck --filter=@waiaas/admin` 통과
2. `pnpm turbo run test --filter=@waiaas/admin -- --run packages/admin/src/__tests__/shared-components.test.tsx` 전체 통과
3. `pnpm turbo run lint --filter=@waiaas/admin` 통과
</verification>

<success_criteria>
1. TabNav 컴포넌트가 탭 목록을 렌더링하고 활성 탭을 표시하며 클릭 시 콜백을 호출한다
2. FieldGroup 컴포넌트가 fieldset+legend 시맨틱 구조로 자식을 감싼다
3. FormField에 description prop을 전달하면 필드 아래에 help text가 표시된다
4. 11개 테스트가 모두 통과한다
</success_criteria>

<output>
After completion, create `.planning/phases/182-ui-shared-components/182-01-SUMMARY.md`
</output>
