# 요구사항: WAIaaS (AI 에이전트를 위한 Wallet-as-a-Service)

**정의일:** 2025-02-04
**핵심 가치:** AI 에이전트가 안전하고 자율적으로 온체인 거래를 수행할 수 있어야 한다 — 동시에 에이전트 주인(사람)이 자금 통제권을 유지하면서.

## v1 요구사항

첫 번째 마일스톤(리서치 & 기획)의 요구사항. 모든 산출물은 설계 문서.

### 커스터디 모델 분석 (CUST)

- [ ] **CUST-01**: Custodial, Non-custodial, MPC/TSS 모델의 장단점 비교 분석 문서
- [ ] **CUST-02**: AI 에이전트 지갑에 특화된 커스터디 고려사항 도출
- [ ] **CUST-03**: 주요 프로바이더 (Turnkey, Crossmint, Dfns) 기능 비교표
- [ ] **CUST-04**: WAIaaS에 권장하는 커스터디 모델 제안서 (근거 포함)

### 아키텍처 설계 (ARCH)

- [ ] **ARCH-01**: Dual Key 아키텍처 상세 설계 문서 (Owner Key / Agent Key 분리)
- [ ] **ARCH-02**: 시스템 컴포넌트 다이어그램 (경계 및 책임 정의)
- [ ] **ARCH-03**: 트랜잭션 데이터 흐름 다이어그램 (생성 -> 서명 -> 제출)
- [ ] **ARCH-04**: 보안 위협 모델링 문서 (공격 벡터 및 대응 방안)
- [ ] **ARCH-05**: 멀티체인 확장성 설계 (Solana -> EVM 확장 경로)

### API 설계 (API)

- [ ] **API-01**: 에이전트 지갑 REST API 스펙 (OpenAPI 3.0)
- [ ] **API-02**: 에이전트 인증 모델 설계 (API Key, OAuth 2.1 등)
- [ ] **API-03**: 권한 및 정책 모델 설계 (한도, 화이트리스트, 시간 제어)
- [ ] **API-04**: 에러 코드 및 처리 규격 정의
- [ ] **API-05**: SDK 인터페이스 설계 (TypeScript/Python)
- [ ] **API-06**: MCP(Model Context Protocol) 통합 스펙 (에이전트 프레임워크 연동)

### 소유자-에이전트 관계 모델 (REL)

- [ ] **REL-01**: 소유자 -> 에이전트 자금 충전 프로세스 정의
- [ ] **REL-02**: 에이전트 -> 소유자 자금 회수 프로세스 정의
- [ ] **REL-03**: 에이전트 키 폐기/교체 절차 정의
- [ ] **REL-04**: 비상 자금 회수 메커니즘 설계 (에이전트 장애 시)
- [ ] **REL-05**: 멀티 에이전트 관리 모델 (한 소유자, 다수 에이전트)

### 기술 스택 결정 (TECH)

- [x] **TECH-01**: 권장 기술 스택 최종 확정 문서 (프레임워크, 라이브러리, 인프라) ✓
- [x] **TECH-02**: Solana 개발 환경 및 도구 선정 (SDK, 테스트넷 전략) ✓
- [x] **TECH-03**: 데이터베이스 및 캐싱 전략 결정 ✓

## v2 요구사항

다음 마일스톤(구현)에서 다룰 항목. 현재 마일스톤에서는 설계만.

### 구현

- **IMPL-01**: 코어 지갑 서비스 구현 (지갑 생성, 조회, 서명)
- **IMPL-02**: 트랜잭션 서비스 구현 (전송, 수신, 상태 조회)
- **IMPL-03**: 정책 엔진 구현 (규칙 평가, 승인/거부)
- **IMPL-04**: API 서버 구현 (Fastify 기반)
- **IMPL-05**: SDK 구현 (TypeScript, Python)

### 인프라

- **INFRA-01**: TEE 환경 구축 (AWS Nitro Enclaves 또는 동등)
- **INFRA-02**: 모니터링 및 알림 시스템
- **INFRA-03**: CI/CD 파이프라인

## 범위 외

| 기능 | 이유 |
|------|------|
| 실제 코드 구현 | 이번 마일스톤은 리서치 & 기획에 집중 |
| UI/대시보드 설계 | API 우선, 관리 인터페이스는 추후 |
| 멀티체인 상세 구현 설계 | Solana 우선, 확장 경로만 정의 |
| 법률/규정 준수 상세 | 기본 방향만 정립, 상세는 구현 시 |
| 가격/비즈니스 모델 | 기술 설계 완료 후 별도 검토 |

## 추적성

요구사항-페이즈 매핑.

| 요구사항 | 페이즈 | 상태 |
|----------|--------|------|
| TECH-01 | Phase 1 | 완료 |
| TECH-02 | Phase 1 | 완료 |
| TECH-03 | Phase 1 | 완료 |
| CUST-01 | Phase 2 | 대기 |
| CUST-02 | Phase 2 | 대기 |
| CUST-03 | Phase 2 | 대기 |
| CUST-04 | Phase 2 | 대기 |
| ARCH-01 | Phase 3 | 대기 |
| ARCH-02 | Phase 3 | 대기 |
| ARCH-03 | Phase 3 | 대기 |
| ARCH-04 | Phase 3 | 대기 |
| ARCH-05 | Phase 3 | 대기 |
| REL-01 | Phase 4 | 대기 |
| REL-02 | Phase 4 | 대기 |
| REL-03 | Phase 4 | 대기 |
| REL-04 | Phase 4 | 대기 |
| REL-05 | Phase 4 | 대기 |
| API-01 | Phase 5 | 대기 |
| API-02 | Phase 5 | 대기 |
| API-03 | Phase 5 | 대기 |
| API-04 | Phase 5 | 대기 |
| API-05 | Phase 5 | 대기 |
| API-06 | Phase 5 | 대기 |

**커버리지:**
- v1 요구사항: 23개
- 페이즈 매핑됨: 23개
- 미매핑: 0개

---
*요구사항 정의: 2025-02-04*
*최종 업데이트: 2026-02-04 Phase 1 완료 (TECH-01, TECH-02, TECH-03)*
